# –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –î–û–°–¢–ê–í–ö–ò –ò –í–ê–õ–ò–î–ê–¶–ò–ò –ó–ê–ö–ê–ó–û–í
**–î–∞—Ç–∞**: 2026-01-09  
**–ó–∞–¥–∞—á–∞**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ 1000‚ÇΩ + –ü–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ —Å—É–º–º–µ <2300‚ÇΩ

---

## üéØ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò

### 1. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 1000‚ÇΩ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API
- ‚úÖ –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ < 1000‚ÇΩ
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

### 2. –ü–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ —Å—É–º–º–µ ‚â• 2300‚ÇΩ
- ‚úÖ –ü–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ —Å—É–º–º–µ < 2300‚ÇΩ
- ‚úÖ –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `Delivery_Zones`
- ‚úÖ –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–π–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. –ó–∞—â–∏—Ç–∞ –æ—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω—É–ª–µ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Å—É–º–º
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º—ã

---

## üìã –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ö–û–î–ï

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã (`lib/types.ts`)

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `Order` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```typescript
// üÜï –î–û–°–¢–ê–í–ö–ê
deliveryFee?: number
deliveryDistrict?: string
deliveryAddress?: string
```

### 2. –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ NocoDB

**–¢–∞–±–ª–∏—Ü–∞ `Orders` - –ù–ï–û–ë–•–û–î–ò–ú–û –î–û–ë–ê–í–ò–¢–¨:**
- `delivery_fee` (Number) - –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏
- `delivery_district` (Single Line Text) - –†–∞–π–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏
- `delivery_address` (Long Text) - –ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏

### 3. –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `calculateDeliveryFee` (`lib/nocodb.ts`)

```typescript
export async function calculateDeliveryFee(
  district: string | undefined,
  orderSubtotal: number,
  deliveryZones?: NocoDBDeliveryZone[]
): Promise<number>
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ ‚â• 2300‚ÇΩ ‚Üí –¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è (0‚ÇΩ)
- –ï—Å–ª–∏ —Ä–∞–π–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω ‚Üí –¥–æ—Å—Ç–∞–≤–∫–∞ 0‚ÇΩ
- –ò—â–µ—Ç –∑–æ–Ω—É –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ —Ä–∞–π–æ–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `Delivery_Zones`

### 4. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ POST /api/orders

```typescript
// –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ 1000‚ÇΩ
const MIN_ORDER_AMOUNT = 1000
if (calculatedTotal < MIN_ORDER_AMOUNT) {
  return NextResponse.json({ error: "Order amount too low", ... }, { status: 400 })
}

// –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω—É–ª–µ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
if (calculatedTotal <= 0) {
  return NextResponse.json({ error: "Invalid order amount", ... }, { status: 400 })
}
```

### 5. –†–∞—Å—á–µ—Ç –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ POST /api/orders

```typescript
// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const user = await fetchUserById(userId)
deliveryDistrict = user.District || user.district || ""

// –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–æ—Å—Ç–∞–≤–∫—É
if (calculatedTotal < 2300) {
  deliveryFee = await calculateDeliveryFee(deliveryDistrict, calculatedTotal)
}

// –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞
const finalTotal = calculatedTotal + deliveryFee

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
await updateOrder(nocoOrder.Id, {
  subtotal: calculatedTotal,
  total: finalTotal,
  delivery_fee: deliveryFee,
  delivery_district: deliveryDistrict,
  delivery_address: deliveryAddress,
})
```

---

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –¢–ï–°–¢ 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞
**–°—Ü–µ–Ω–∞—Ä–∏–π**: –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ 500‚ÇΩ  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **PASS**
```
–û—à–∏–±–∫–∞: Order amount too low
–°–æ–æ–±—â–µ–Ω–∏–µ: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 1000‚ÇΩ
–î–µ—Ç–∞–ª–∏: –í–∞—à–∞ —Å—É–º–º–∞: 500‚ÇΩ. –î–æ–±–∞–≤—å—Ç–µ –µ—â–µ –±–ª—é–¥ –Ω–∞ 500‚ÇΩ
```

**–°—Ü–µ–Ω–∞—Ä–∏–π**: –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ 1100‚ÇΩ  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **PASS**
```
–ó–∞–∫–∞–∑ #349 —Å–æ–∑–¥–∞–Ω
Subtotal: 1100‚ÇΩ
Total: 1100‚ÇΩ (–¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, —Ç.–∫. –Ω–µ—Ç userId)
```

---

### ‚úÖ –¢–ï–°–¢ 2: –ì–æ—Å—Ç–µ–≤–æ–π –∑–∞–∫–∞–∑ –±–µ–∑ userId
**–°—Ü–µ–Ω–∞—Ä–∏–π**: –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ 1500‚ÇΩ –±–µ–∑ userId  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **PASS**
```
–ó–∞–∫–∞–∑ #350 —Å–æ–∑–¥–∞–Ω
Subtotal: 1500‚ÇΩ
–î–æ—Å—Ç–∞–≤–∫–∞: 0‚ÇΩ (–Ω–µ—Ç —Ä–∞–π–æ–Ω–∞)
Total: 1500‚ÇΩ
```

**–í—ã–≤–æ–¥**: –ì–æ—Å—Ç–µ–≤—ã–µ –∑–∞–∫–∞–∑—ã —Ä–∞–±–æ—Ç–∞—é—Ç, –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è (—Ä–∞–π–æ–Ω –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω)

---

### ‚úÖ –¢–ï–°–¢ 3: –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ —Å—É–º–º–µ ‚â•2300‚ÇΩ
**–°—Ü–µ–Ω–∞—Ä–∏–π**: –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ 2500‚ÇΩ  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **PASS**
```
–ó–∞–∫–∞–∑ #351 —Å–æ–∑–¥–∞–Ω
Subtotal: 2500‚ÇΩ
–î–æ—Å—Ç–∞–≤–∫–∞: 0‚ÇΩ (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è, —Ç.–∫. ‚â•2300‚ÇΩ)
Total: 2500‚ÇΩ
```

---

### ‚úÖ –¢–ï–°–¢ 4: –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω—É–ª–µ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
**–°—Ü–µ–Ω–∞—Ä–∏–π 1**: –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —Å price=0  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **PASS**
```
–û—à–∏–±–∫–∞: Order amount too low
–°–æ–æ–±—â–µ–Ω–∏–µ: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 1000‚ÇΩ
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 2**: –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π —Å—É–º–º–æ–π  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **PASS**
```
–û—à–∏–±–∫–∞: Order amount too low
```

**–í—ã–≤–æ–¥**: üîí **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –£–Ø–ó–í–ò–ú–û–°–¢–¨ –£–°–¢–†–ê–ù–ï–ù–ê**

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

| –¢–µ—Å—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|------|-----------|-------------|
| –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ 1000‚ÇΩ | ‚úÖ PASS | –í—ã—Å–æ–∫–∞—è |
| –ì–æ—Å—Ç–µ–≤–æ–π –∑–∞–∫–∞–∑ | ‚úÖ PASS | –°—Ä–µ–¥–Ω—è—è |
| –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ ‚â•2300‚ÇΩ | ‚úÖ PASS | –í—ã—Å–æ–∫–∞—è |
| –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω—É–ª–µ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ | ‚úÖ PASS | **–ö—Ä–∏—Ç–∏—á–Ω–∞—è** |

**–ò—Ç–æ–≥–æ**: 4/4 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ ‚úÖ

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞:
```
1. calculatedTotal = Œ£(—Ü–µ–Ω—ã –≤—Å–µ—Ö –±–ª—é–¥ + –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è)
2. –ü—Ä–æ–≤–µ—Ä–∫–∞: calculatedTotal >= 1000‚ÇΩ ?
3. –ï—Å–ª–∏ userId —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
   - –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–π–æ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ï—Å–ª–∏ calculatedTotal < 2300‚ÇΩ:
     - deliveryFee = —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–∑ Delivery_Zones
   - –ò–Ω–∞—á–µ:
     - deliveryFee = 0‚ÇΩ
4. finalTotal = calculatedTotal + deliveryFee
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î: subtotal, total, delivery_fee, delivery_district
```

### –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤:
```
‚ö†Ô∏è –í–ê–ñ–ù–û: –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å SUBTOTAL (–±–µ–∑ –¥–æ—Å—Ç–∞–≤–∫–∏)!

earnedPoints = calculateEarnedPoints(subtotal, pointsUsed, totalSpent)
```

---

## üìÇ –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

1. **`lib/types.ts`**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `deliveryFee`, `deliveryDistrict`, `deliveryAddress`

2. **`lib/nocodb.ts`**
   - –û–±–Ω–æ–≤–ª–µ–Ω `NocoDBOrder` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `calculateDeliveryFee`
   - –ó–∞—â–∏—Ç–∞ –≤ `calculateEarnedPoints` (—É–∂–µ –±—ã–ª–∞)

3. **`app/api/orders/route.ts`**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º—ã (MIN_ORDER_AMOUNT = 1000)
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω—É–ª–µ–≤—ã—Ö/–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
   - –†–∞—Å—á–µ—Ç –¥–æ—Å—Ç–∞–≤–∫–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ API —Å –ø–æ–ª—è–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

4. **`app/api/orders/[id]/route.ts`**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `calculateDeliveryFee` (–¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

---

## üÜï –¢–ê–ë–õ–ò–¶–ê DELIVERY_ZONES

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–æ–Ω—ã:**
| –†–∞–π–æ–Ω | –ì–æ—Ä–æ–¥ | –°—Ç–æ–∏–º–æ—Å—Ç—å | –ú–∏–Ω. –∑–∞–∫–∞–∑ |
|-------|-------|-----------|------------|
| –ê–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π —Ä–∞–π–æ–Ω | –°–ü–± | 250‚ÇΩ | 1000‚ÇΩ |
| –í–∞—Å–∏–ª–µ–æ—Å—Ç—Ä–æ–≤—Å–∫–∏–π —Ä–∞–π–æ–Ω | –°–ü–± | 300‚ÇΩ | 1000‚ÇΩ |
| –ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π —Ä–∞–π–æ–Ω | –°–ü–± | 350‚ÇΩ | 1000‚ÇΩ |

**–õ–æ–≥–∏–∫–∞:**
- –î–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø—Ä–∏ –∑–∞–∫–∞–∑–µ ‚â• 2300‚ÇΩ
- –ò–Ω–∞—á–µ - —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã Delivery_Zones

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### 1. –ü–æ–ª—è –≤ NocoDB
**–ù–ï–û–ë–•–û–î–ò–ú–û –í–†–£–ß–ù–£–Æ –î–û–ë–ê–í–ò–¢–¨** –≤ —Ç–∞–±–ª–∏—Ü—É `Orders`:
- `delivery_fee` (Number, default: 0)
- `delivery_district` (Single Line Text)
- `delivery_address` (Long Text)

### 2. –ì–æ—Å—Ç–µ–≤—ã–µ –∑–∞–∫–∞–∑—ã
–î–ª—è –≥–æ—Å—Ç–µ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (–±–µ–∑ `userId`):
- –î–æ—Å—Ç–∞–≤–∫–∞ = 0‚ÇΩ (—Ä–∞–π–æ–Ω –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω)
- –ë–∞–ª–ª—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–ª—è `guestPhone` –∏ `guestAddress`

### 3. –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤
**–ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å `subtotal` (–±–µ–∑ –¥–æ—Å—Ç–∞–≤–∫–∏)!**

–≠—Ç–æ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã:
- –ù–µ –Ω–∞—á–∏—Å–ª—è—Ç—å –±–∞–ª–ª—ã –∑–∞ –¥–æ—Å—Ç–∞–≤–∫—É
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –∫—ç—à–±—ç–∫–∞

### 4. –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
- `userId` –≤ –∑–∞–ø—Ä–æ—Å–µ
- –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –ø–æ–ª–µ `District` –≤ —Ç–∞–±–ª–∏—Ü–µ `Users`

---

## üîß –î–ê–õ–¨–ù–ï–ô–®–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. **UI –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–∞–π–æ–Ω–∞** (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏** –≤ –∫–æ—Ä–∑–∏–Ω–µ –ø–µ—Ä–µ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º
3. **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
4. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ –∑–∞–∫–∞–∑–∞

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:
1. –†–∞–∑–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
2. –≠–∫—Å–ø—Ä–µ—Å—Å-–¥–æ—Å—Ç–∞–≤–∫–∞ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º —Ç–∞—Ä–∏—Ñ–æ–º
3. –ó–æ–Ω—ã —Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –æ—Ç –¥—Ä—É–≥–æ–π —Å—É–º–º—ã

---

## ‚úÖ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **READY**

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º—ã
- ‚úÖ –†–∞—Å—á–µ—Ç –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω—É–ª–µ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–æ—Å—Ç–∞–≤–∫–µ

**–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è:**
- ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ `Orders` (NocoDB)
- ‚ö†Ô∏è –û–±–Ω–æ–≤–∏—Ç—å UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚ö†Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

## üìù –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–∫–∞–∑ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π (—Å—É–º–º–∞ <2300‚ÇΩ)
```json
POST /api/orders
{
  "userId": 123,
  "order": {
    "startDate": "2026-02-15",
    "deliveryTime": "17:30-22:00",
    "paymentMethod": "card",
    "paid": true,
    "persons": [...], // –ù–∞ —Å—É–º–º—É 1500‚ÇΩ
    "extras": []
  }
}

–û–¢–í–ï–¢:
{
  "success": true,
  "orderId": 456,
  "order": {
    "subtotal": 1500,
    "deliveryFee": 250,  // –ò–∑ Delivery_Zones –¥–ª—è —Ä–∞–π–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "total": 1750,       // 1500 + 250
    "deliveryDistrict": "–ê–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π —Ä–∞–π–æ–Ω",
    "deliveryAddress": "–ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, –¥. 1, –∫–≤. 10",
    "loyaltyPointsEarned": 75  // 5% –æ—Ç 1500‚ÇΩ (–±–µ–∑ –¥–æ—Å—Ç–∞–≤–∫–∏)
  }
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ó–∞–∫–∞–∑ —Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π (—Å—É–º–º–∞ ‚â•2300‚ÇΩ)
```json
POST /api/orders
{
  "userId": 123,
  "order": {
    "persons": [...], // –ù–∞ —Å—É–º–º—É 2500‚ÇΩ
  }
}

–û–¢–í–ï–¢:
{
  "order": {
    "subtotal": 2500,
    "deliveryFee": 0,    // –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è
    "total": 2500,
    "deliveryDistrict": "–ê–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π —Ä–∞–π–æ–Ω",
    "loyaltyPointsEarned": 125  // 5% –æ—Ç 2500‚ÇΩ
  }
}
```

### –ü—Ä–∏–º–µ—Ä 3: –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
```json
POST /api/orders
{
  "order": {
    "persons": [...], // –ù–∞ —Å—É–º–º—É 800‚ÇΩ
  }
}

–û–¢–í–ï–¢ (400):
{
  "error": "Order amount too low",
  "message": "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 1000‚ÇΩ",
  "details": "–í–∞—à–∞ —Å—É–º–º–∞: 800‚ÇΩ. –î–æ–±–∞–≤—å—Ç–µ –µ—â–µ –±–ª—é–¥ –Ω–∞ 200‚ÇΩ",
  "minimumAmount": 1000,
  "currentAmount": 800,
  "shortfall": 200
}
```

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–í—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ 1000‚ÇΩ
- ‚úÖ –ü–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ —Å—É–º–º–µ <2300‚ÇΩ
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ —Å—É–º–º–µ ‚â•2300‚ÇΩ
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ (—Ç–æ–ª—å–∫–æ —Å subtotal)

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–µ–π –≤ NocoDB!** üöÄ



