# üîç –û—Ç–ª–∞–¥–∫–∞ –±–∞–ª–ª–æ–≤ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ - –°–¢–ê–†–¢

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω)
npm run dev

# 2. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
node scripts/test-loyalty-flow.js
```

## üìä –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ç–µ—Å—Ç–∞:
```
‚úÖ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù! –ë–∞–ª–ª—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞—á–∏—Å–ª–µ–Ω—ã (+11)

–ë–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤:
  –ë—ã–ª–æ:    0
  –°—Ç–∞–ª–æ:   11
  –ò–∑–º–µ–Ω–µ–Ω–∏–µ: +11
```

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞ (npm run dev):
```
üîç ========== –ù–ê–ß–ê–õ–û –û–¢–õ–ê–î–ö–ò –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø –ë–ê–õ–õ–û–í (POST) ==========
üîç [POST] 1Ô∏è‚É£ –í—Ö–æ–¥—è—â–∏–π payload: { paymentMethod: undefined, ... }
üîç [POST] ‚ùå –£—Å–ª–æ–≤–∏–µ –ù–ï –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –Ω–µ —É–∫–∞–∑–∞–Ω
üîç ========== –ö–û–ù–ï–¶ –û–¢–õ–ê–î–ö–ò –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø –ë–ê–õ–õ–û–í (POST) ==========

üîç ========== –ù–ê–ß–ê–õ–û –û–¢–õ–ê–î–ö–ò –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø –ë–ê–õ–õ–û–í (PATCH partial) ==========
üîç [PATCH partial 123] 5Ô∏è‚É£ –í—ã–∑–æ–≤ calculateEarnedPoints
üîç [PATCH partial 123] 8Ô∏è‚É£ –†–µ–∑—É–ª—å—Ç–∞—Ç awardLoyaltyPoints: —É—Å–ø–µ—à–Ω–æ
üîç ========== –ö–û–ù–ï–¶ –û–¢–õ–ê–î–ö–ò –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø –ë–ê–õ–õ–û–í (PATCH partial) ==========
```

## üìÅ –§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `TEST_LOYALTY_QUICK_START.md` | üß™ –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é |
| `DEBUG_LOYALTY_POINTS_LOGS_2026_01_11.md` | üìã –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ª–æ–≥–æ–≤ |
| `SUMMARY_LOYALTY_DEBUG_2026_01_11.md` | üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ —Å —á–µ–∫–ª–∏—Å—Ç–æ–º |

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

```
–°–û–ó–î–ê–ù–ò–ï –ó–ê–ö–ê–ó–ê (POST)
‚îî‚îÄ paymentMethod –ù–ï —É–∫–∞–∑–∞–Ω
   ‚îî‚îÄ ‚ùå –ë–∞–ª–ª—ã –ù–ï –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è (–æ–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã)

–û–ü–õ–ê–¢–ê –ó–ê–ö–ê–ó–ê (PATCH)
‚îî‚îÄ paymentMethod = "card" / "sbp"
   ‚îî‚îÄ ‚úÖ –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –°–†–ê–ó–£
      ‚îî‚îÄ –°–æ–∑–¥–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è type="earned", status="completed"

–û–ü–õ–ê–¢–ê –ó–ê–ö–ê–ó–ê (PATCH)
‚îî‚îÄ paymentMethod = "cash"
   ‚îî‚îÄ ‚è≥ –ë–∞–ª–ª—ã –≤ PENDING
      ‚îî‚îÄ –°–æ–∑–¥–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è type="earned", status="pending"
```

## üîç –ì–¥–µ –∏—Å–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É

1. **–ë–∞–ª–ª—ã –Ω–µ –Ω–∞—á–∏—Å–ª–∏–ª–∏—Å—å –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ?**
   - –°–º–æ—Ç—Ä–∏—Ç–µ —à–∞–≥ 6Ô∏è‚É£: `calculateEarnedPoints` –≤–µ—Ä–Ω—É–ª –∑–Ω–∞—á–µ–Ω–∏–µ?
   - –°–º–æ—Ç—Ä–∏—Ç–µ —à–∞–≥ 8Ô∏è‚É£: `awardLoyaltyPoints` –≤—ã–∑–≤–∞–ª—Å—è?

2. **orderTotal = 0?**
   - –°–º–æ—Ç—Ä–∏—Ç–µ —à–∞–≥ 3Ô∏è‚É£: –∫–∞–∫ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω orderTotal?
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î: —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è –ª–∏ `total` –≤ –∑–∞–∫–∞–∑–µ?

3. **–£—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å?**
   - –°–º–æ—Ç—Ä–∏—Ç–µ —à–∞–≥ 6Ô∏è‚É£: –∫–∞–∫–∏–µ —É—Å–ª–æ–≤–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è?
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ payload: –µ—Å—Ç—å –ª–∏ `paymentMethod`?

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ß–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `SUMMARY_LOYALTY_DEBUG_2026_01_11.md`


