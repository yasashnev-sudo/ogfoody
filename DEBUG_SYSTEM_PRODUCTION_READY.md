# üöÄ Debug System - Production Ready!

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. üî• –ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–≤–∞—Ç –í–°–ï–• –æ—à–∏–±–æ–∫ –±—Ä–∞—É–∑–µ—Ä–∞

**–§–∞–π–ª:** `hooks/useDebugRecorder.tsx`

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≤–∏—Ç:
- ‚úÖ `console.log/error/warn/info` - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ `window.onerror` - –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ JS –æ—à–∏–±–∫–∏
- ‚úÖ `unhandledrejection` - –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ Promise rejections
- ‚úÖ React Error Boundary - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è** –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º!

```typescript
// –ü—Ä–∏–º–µ—Ä: –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:
throw new Error("Something went wrong");

// –ò–ª–∏ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π Promise:
fetch('/api/broken').catch(() => {
  // –û—à–∏–±–∫–∞ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞
});

// ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è Debug –æ—Ç—á—ë—Ç!
```

---

### 2. üì± –£–ª—É—á—à–µ–Ω–Ω—ã–π UI –¥–ª—è iPhone

**–§–∞–π–ª:** `components/debug/DebugFloatingButton.tsx`

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞** –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö (16√ó16 –≤–º–µ—Å—Ç–æ 14√ó14)
- ‚úÖ **Vibration feedback** –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ iPhone)
- ‚úÖ **–ë–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—à–∏–±–æ–∫** (–∫—Ä–∞—Å–Ω—ã–π –∫—Ä—É–∂–æ–∫ —Å —á–∏—Å–ª–æ–º)
- ‚úÖ **–£–±—Ä–∞–Ω–∞ —Å–∏–Ω—è—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞** –Ω–∞ iOS (`-webkit-tap-highlight-color`)
- ‚úÖ **–ê–Ω–∏–º–∞—Ü–∏—è pulse** –Ω–∞ –±–µ–π–¥–∂–µ —Å –æ—à–∏–±–∫–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Å–æ–ª–∏** –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á—ë—Ç–∞

```typescript
// –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É:
- –õ—ë–≥–∫–∞—è –≤–∏–±—Ä–∞—Ü–∏—è (50ms)
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Å–æ–ª—å
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç—á—ë—Ç–∞ - –≤–∏–±—Ä–∞—Ü–∏—è (200ms)
```

---

### 3. üìÇ –ò–Ω–¥–µ–∫—Å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è AI

**–§–∞–π–ª:** `app/api/debug/report/route.ts`

–°–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª `debug_reports/index.json` —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö –æ—Ç—á—ë—Ç–æ–≤:

```json
{
  "reports": [
    {
      "id": "2026-01-13T12-30-45-123Z",
      "userId": "95",
      "userEmail": "test@example.com",
      "errorMessage": "Failed to award loyalty points",
      "timestamp": "2026-01-13T12:30:45.123Z",
      "url": "https://yoursite.com/checkout",
      "userAgent": "Mozilla/5.0 (iPhone...)",
      "hasComment": true,
      "userComment": "–ë–∞–ª–ª—ã –Ω–µ –Ω–∞—á–∏—Å–ª–∏–ª–∏—Å—å –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞–ª–∏—á–Ω—ã–º–∏",
      "files": {
        "log": "2026-01-13T12-30-45-123Z_user-95_logs.txt",
        "screenshot": "2026-01-13T12-30-45-123Z_user-95_screenshot.png"
      }
    }
  ]
}
```

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?**

–¢–µ–ø–µ—Ä—å AI –∞–≥–µ–Ω—Ç (Cursor) –º–æ–∂–µ—Ç:
1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å `index.json`
2. –£–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
3. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –Ω—É–∂–Ω—ã–π –ª–æ–≥ —Ñ–∞–π–ª
4. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ!

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å AI:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏"

AI: 
1. –ß–∏—Ç–∞–µ—Ç /debug_reports/index.json
2. –í–∏–¥–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç—á—ë—Ç
3. –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª –ª–æ–≥–æ–≤
4. –ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç fix! üéØ
```

---

### 4. üîî Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–§–∞–π–ª:** `app/api/debug/report/route.ts`

–ü—Ä–∏ –∫–∞–∂–¥–æ–π –æ—à–∏–±–∫–µ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram:

```
üêû –ù–æ–≤—ã–π Debug Report

‚ùå –û—à–∏–±–∫–∞: Failed to award loyalty points
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: test@example.com
üì± URL: https://yoursite.com/checkout
üïê –í—Ä–µ–º—è: 13.01.2026, 12:30:45

üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ë–∞–ª–ª—ã –Ω–µ –Ω–∞—á–∏—Å–ª–∏–ª–∏—Å—å –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞–ª–∏—á–Ω—ã–º–∏

üìÇ –õ–æ–≥ —Ñ–∞–π–ª: 2026-01-13T12-30-45_user-95_logs.txt
üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç: 2026-01-13T12-30-45_user-95_screenshot.png
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

–§–∞–π–ª `.env.local` —É–∂–µ —Å–æ–∑–¥–∞–Ω —Å —Ç–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
```bash
TELEGRAM_BOT_TOKEN=8581334096:AAG2-h00EDRFj9kXiYCf5jpRw6WQjheTpUY
TELEGRAM_CHAT_ID=163996864
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –û—Ç–∫—Ä–æ–π https://t.me/myproject_debug_bot
2. –ù–∞–∂–º–∏ "Start"
3. –ì–æ—Ç–æ–≤–æ! üéâ

---

### 5. üõ°Ô∏è React Error Boundary

**–§–∞–π–ª:** `components/debug/ErrorBoundary.tsx`

–ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ React (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—à–∏–±–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∞), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –∫—Ä–∞—Å–∏–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–º–µ—Å—Ç–æ –±–µ–ª–æ–≥–æ —ç–∫—Ä–∞–Ω–∞:

```
üòî
–£–ø—Å! –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.
–ú—ã —Å–∫–æ—Ä–æ –≤—Å—ë –∏—Å–ø—Ä–∞–≤–∏–º!

[üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É]
[‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥]
```

**–ü—Ä–∏ —ç—Ç–æ–º:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è Debug –æ—Ç—á—ë—Ç
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–≥ —Å stack trace

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–æ –∏ –ü–æ—Å–ª–µ

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –î–æ | –ü–æ—Å–ª–µ |
|----------|----|----|
| –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫ | –¢–æ–ª—å–∫–æ console | ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ |
| –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ prod | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ‚ùå –ù–µ—Ç | ‚úÖ Telegram |
| UI –Ω–∞ iPhone | –°—Ä–µ–¥–Ω–∏–π | ‚úÖ –û—Ç–ª–∏—á–Ω—ã–π |
| Vibration feedback | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| –ò–Ω–¥–µ–∫—Å –¥–ª—è AI | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| Error Boundary | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| –ë–µ–π–¥–∂ —Å –æ—à–∏–±–∫–∞–º–∏ | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

### –¢–µ—Å—Ç 1: –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏

```typescript
// –í –ª—é–±–æ–º –º–µ—Å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
console.log('Test log');
console.error('Test error');

// –û—Ç–∫—Ä–æ–π Debug –∫–æ–Ω—Å–æ–ª—å (Ctrl+Shift+D)
// –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏! ‚úÖ
```

### –¢–µ—Å—Ç 2: –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞

```typescript
// –î–æ–±–∞–≤—å –≤—Ä–µ–º–µ–Ω–Ω–æ –≤ app/page.tsx
useEffect(() => {
  setTimeout(() => {
    throw new Error('Test uncaught error');
  }, 2000);
}, []);

// –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã:
// - –û—à–∏–±–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏
// - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç—Å—è Debug –æ—Ç—á—ë—Ç
// - –ü—Ä–∏–¥—ë—Ç Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ! üì±
```

### –¢–µ—Å—Ç 3: Promise rejection

```typescript
// –î–æ–±–∞–≤—å –≤—Ä–µ–º–µ–Ω–Ω–æ
useEffect(() => {
  Promise.reject('Test promise rejection');
}, []);

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// - –û—à–∏–±–∫–∞ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞
// - –û—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω
// - Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ! ‚úÖ
```

### –¢–µ—Å—Ç 4: –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

1. –ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É `üêû` (–∏–ª–∏ `Ctrl+Shift+D`)
2. –ù–∞–ø–∏—à–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "–¢–µ—Å—Ç–∏—Ä—É—é Debug —Å–∏—Å—Ç–µ–º—É"
3. –ù–∞–∂–º–∏ "Send Report" (–∏–ª–∏ `Ctrl+Enter`)
4. –ü—Ä–æ–≤–µ—Ä—å:
   - ‚úÖ –í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ iPhone
   - ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–û—Ç—á—ë—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!"
   - ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - ‚úÖ –§–∞–π–ª—ã –≤ `debug_reports/`

### –¢–µ—Å—Ç 5: React Error

```typescript
// –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
function BrokenComponent() {
  throw new Error('Test React error');
  return <div>Never rendered</div>;
}

// –î–æ–±–∞–≤—å –≤ HomeWithDebug:
<BrokenComponent />

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// - –ö—Ä–∞—Å–∏–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏
// - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Debug –æ—Ç—á—ë—Ç
// - Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ! üéâ
```

---

## üåç –î–µ–ø–ª–æ–π –Ω–∞ Production

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

```bash
# 1. –£–±–µ–¥–∏—Å—å —á—Ç–æ .env.local —Å–æ–∑–¥–∞–Ω
cat .env.local

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# TELEGRAM_BOT_TOKEN=8581334096:AAG2-h00EDRFj9kXiYCf5jpRw6WQjheTpUY
# TELEGRAM_CHAT_ID=163996864

# 2. –ó–∞–ø—É—Å—Ç–∏ dev —Å–µ—Ä–≤–µ—Ä
npm run dev

# 3. –û—Ç–∫—Ä–æ–π https://t.me/myproject_debug_bot –∏ –Ω–∞–∂–º–∏ "Start"

# 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π (—Å–º. —Ç–µ—Å—Ç—ã –≤—ã—à–µ)

# 5. –ü—Ä–æ–≤–µ—Ä—å Telegram - –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è! üì≤
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Production –Ω–∞ VPS

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@5.129.194.168

# 2. –ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /root/my-project  # –∏–ª–∏ –∫—É–¥–∞ –ø—Ä–æ–µ–∫—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

# 3. –°–æ–∑–¥–∞–π/–æ–±–Ω–æ–≤–∏ .env.local
nano .env.local

# –î–æ–±–∞–≤—å:
TELEGRAM_BOT_TOKEN=8581334096:AAG2-h00EDRFj9kXiYCf5jpRw6WQjheTpUY
TELEGRAM_CHAT_ID=163996864

# 4. –°–æ—Ö—Ä–∞–Ω–∏ (Ctrl+O, Enter, Ctrl+X)

# 5. –û–±–Ω–æ–≤–∏ –∫–æ–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
git pull origin main  # –∏–ª–∏ —Ç–≤–æ—è –≤–µ—Ç–∫–∞

# 6. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# 7. –°–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç
npm run build

# 8. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart my-project
# –∏–ª–∏
pm2 restart all

# 9. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
pm2 logs my-project

# 10. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π!
# –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç, —Å–æ–∑–¥–∞–π –æ—à–∏–±–∫—É, –ø—Ä–æ–≤–µ—Ä—å Telegram! üì±
```

---

## ü§ñ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å AI

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ø—Ä–æ—Å–∏ AI –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

**–¢—ã –ø–∏—à–µ—à—å:**
```
–ü—Ä–æ–≤–µ—Ä—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
```

**AI –¥–µ–ª–∞–µ—Ç:**
```typescript
// 1. –ß–∏—Ç–∞–µ—Ç –∏–Ω–¥–µ–∫—Å
read_file: /Users/sergejasasnev/Downloads/my-project (1)/debug_reports/index.json

// 2. –ù–∞—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç—á—ë—Ç
// 3. –ß–∏—Ç–∞–µ—Ç –ª–æ–≥ —Ñ–∞–π–ª
read_file: /Users/sergejasasnev/Downloads/my-project (1)/debug_reports/2026-01-13T12-30-45_user-95_logs.txt

// 4. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ! üéØ
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—à–∏–±–∫–∏

**–¢—ã –ø–∏—à–µ—à—å:**
```
–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–ª–ª—ã –Ω–µ –Ω–∞—á–∏—Å–ª–∏–ª–∏—Å—å. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è.
```

**AI –¥–µ–ª–∞–µ—Ç:**
```typescript
// 1. –ß–∏—Ç–∞–µ—Ç index.json
// 2. –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –¥–∞—Ç–µ –∏ keywords ("–±–∞–ª–ª—ã")
// 3. –ù–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–π –æ—Ç—á—ë—Ç
// 4. –ß–∏—Ç–∞–µ—Ç –ª–æ–≥–∏
// 5. –í–∏–¥–∏—Ç: totalSpent –±—ã–ª NaN
// 6. –ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –≤ –∫–æ–¥–µ
// 7. –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç fix! ‚úÖ
```

### –ü—Ä–∏–º–µ—Ä 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–∞—Å—Ç—ã—Ö –æ—à–∏–±–æ–∫

**–¢—ã –ø–∏—à–µ—à—å:**
```
–ü–æ–∫–∞–∂–∏ —Å–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
```

**AI –¥–µ–ª–∞–µ—Ç:**
```typescript
// 1. –ß–∏—Ç–∞–µ—Ç index.json
// 2. –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ø–æ errorMessage
// 3. –°—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
// 4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ø-5 –æ—à–∏–±–æ–∫
// 5. –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è! üéØ
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/Users/sergejasasnev/Downloads/my-project (1)/
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useDebugRecorder.tsx          ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω (–∞–≤—Ç–æ–ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫)
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ debug/
‚îÇ       ‚îú‚îÄ‚îÄ DebugContext.tsx          ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ DebugConsole.tsx          ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ DebugFloatingButton.tsx   ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω (iPhone UI + vibration)
‚îÇ       ‚îî‚îÄ‚îÄ ErrorBoundary.tsx         üÜï –ù–æ–≤—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                      ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω (–¥–æ–±–∞–≤–ª–µ–Ω ErrorBoundary)
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îî‚îÄ‚îÄ debug/
‚îÇ           ‚îî‚îÄ‚îÄ report/
‚îÇ               ‚îî‚îÄ‚îÄ route.ts          ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω (index.json + Telegram)
‚îú‚îÄ‚îÄ debug_reports/                    üìÇ –°–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ index.json                    üÜï –ò–Ω–¥–µ–∫—Å –¥–ª—è AI
‚îÇ   ‚îú‚îÄ‚îÄ 2026-01-13T12-30-45_user-95_logs.txt
‚îÇ   ‚îî‚îÄ‚îÄ 2026-01-13T12-30-45_user-95_screenshot.png
‚îú‚îÄ‚îÄ .env.local                        üÜï –°–æ–∑–¥–∞–Ω (Telegram —Ç–æ–∫–µ–Ω—ã)
‚îú‚îÄ‚îÄ DEBUG_TELEGRAM_SETUP.md           üÜï –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
‚îî‚îÄ‚îÄ DEBUG_SYSTEM_PRODUCTION_READY.md  üÜï –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–ª—è Production

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è 1: –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Debug –∫–Ω–æ–ø–∫–µ

–í `app/page.tsx` —É–∂–µ –µ—Å—Ç—å —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥. –ú–æ–∂–µ—à—å –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

```typescript
// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ dev –∏–ª–∏ —Ç–æ–ª—å–∫–æ —Ç–µ–±–µ
{(process.env.NODE_ENV === 'development' || userProfile?.email === '—Ç–≤–æ–π@email.com') && (
  <DebugFloatingButton />
)}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è 2: –ó–∞—â–∏—Ç–∏—Ç—å API

–í `app/api/debug/report/route.ts` –¥–æ–±–∞–≤—å –ø—Ä–æ–≤–µ—Ä–∫—É:

```typescript
export async function POST(request: NextRequest) {
  // –¢–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Ç–æ–ª—å–∫–æ –≤ dev
  if (process.env.NODE_ENV === 'production') {
    // –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω –∏–ª–∏ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const authHeader = request.headers.get('authorization');
    if (!authHeader || !isValidDebugToken(authHeader)) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }
  }
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è 3: –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

–°–æ–∑–¥–∞–π cron –∑–∞–¥–∞—á—É –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –æ—Ç—á—ë—Ç–æ–≤:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (crontab -e)
# –£–¥–∞–ª—è—Ç—å –æ—Ç—á—ë—Ç—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00
0 3 * * * find /root/my-project/debug_reports -type f -mtime +30 -delete
```

---

## ‚úÖ Checklist –¥–ª—è Production

- [ ] `.env.local` —Å–æ–∑–¥–∞–Ω —Å Telegram —Ç–æ–∫–µ–Ω–∞–º–∏
- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω (–Ω–∞–ø–∏—Å–∞–ª–∏ `/start` –≤ https://t.me/myproject_debug_bot)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ (–≤—Å–µ 5 —Ç–µ—Å—Ç–æ–≤)
- [ ] –ü–æ–ª—É—á–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–æ–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- [ ] –ö–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] `.env.local` –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ—Å—Ç—É–ø –∫ Debug –∫–Ω–æ–ø–∫–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å **–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫**:

1. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ª–æ–≤–∏—Ç –≤—Å–µ –æ—à–∏–±–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. ‚úÖ **–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ** —É–≤–µ–¥–æ–º–ª—è–µ—Ç —Ç–µ–±—è –≤ Telegram
3. ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç** —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏
4. ‚úÖ **–£–¥–æ–±–Ω–∞** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (iPhone, vibration)
5. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞** —Å AI –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
6. ‚úÖ **Production-ready** –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞

**–ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö "—É –º–µ–Ω—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–µ –∑–Ω–∞—é –ø–æ—á–µ–º—É"!** üöÄ

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ª—é–±–æ–π –ø—Ä–æ–±–ª–µ–º–µ:
1. –¢—ã –ø–æ–ª—É—á–∞–µ—à—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram üì±
2. –û—Ç–∫—Ä—ã–≤–∞–µ—à—å –ª–æ–≥ —Ñ–∞–π–ª
3. –í–∏–¥–∏—à—å —Ç–æ—á–Ω—É—é –æ—à–∏–±–∫—É, —Å–∫—Ä–∏–Ω—à–æ—Ç, –∫–æ–Ω—Ç–µ–∫—Å—Ç
4. –§–∏–∫—Å–∏—à—å –∑–∞ 5 –º–∏–Ω—É—Ç! ‚ö°

---

## üí¨ –í–æ–ø—Ä–æ—Å—ã?

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å `.env.local` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å —Ç–æ–∫–µ–Ω–∞–º–∏)
2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (`/start` –≤ Telegram)
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (`pm2 logs`)
4. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—É—é –æ—à–∏–±–∫—É –∏ –ø—Ä–æ–≤–µ—Ä—å:
   - –§–∞–π–ª—ã –≤ `debug_reports/`
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
   - –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

–í—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å! üéØ

---

**üî• –ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**


