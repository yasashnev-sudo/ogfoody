# üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ê–ì–ï–ù–¢–ê: –î–ï–ü–õ–û–ô –ù–ê PRODUCTION

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-16  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–£–ê–õ–¨–ù–û  
**–î–ª—è:** AI –∞–≥–µ–Ω—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å –ø—Ä–æ–µ–∫—Ç–æ–º ogfoody.ru

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

**–ü–ï–†–ï–î –õ–Æ–ë–´–ú –î–ï–ü–õ–û–ï–ú:**
1. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (`npm run build` —É—Å–ø–µ—à–Ω–æ)
2. ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ Git
3. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –≤ `origin/main`
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ —Å–ª–æ–º–∞–µ—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)](#1-–±—ã—Å—Ç—Ä—ã–π-–¥–µ–ø–ª–æ–π-—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
2. [–†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ SSH](#2-—Ä—É—á–Ω–æ–π-–¥–µ–ø–ª–æ–π-—á–µ—Ä–µ–∑-ssh)
3. [–î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ expect —Å–∫—Ä–∏–ø—Ç](#3-–¥–µ–ø–ª–æ–π-—á–µ—Ä–µ–∑-expect-—Å–∫—Ä–∏–ø—Ç)
4. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è](#4-–ø—Ä–æ–≤–µ—Ä–∫–∞-–ø–æ—Å–ª–µ-–¥–µ–ø–ª–æ—è)
5. [–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π](#5-–æ—Ç–∫–∞—Ç-–∏–∑–º–µ–Ω–µ–Ω–∏–π)
6. [Troubleshooting](#6-troubleshooting)

---

## 1. –ë–´–°–¢–†–´–ô –î–ï–ü–õ–û–ô (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ `deploy-increment-fix.expect`

**–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –¥–µ–ø–ª–æ—è!**

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã
git add -A
git commit -m "fix: –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
./deploy-increment-fix.expect
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
1. ‚úÖ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH
2. ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `/var/www/ogfoody` (–∏–ª–∏ `/root/my-project`)
3. ‚úÖ –î–µ–ª–∞–µ—Ç `git fetch origin` –∏ `git reset --hard origin/main`
4. ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install --production=false`
5. ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç PM2: `pm2 stop all`
6. ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç: `npm run build`
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏ (–∏—â–µ—Ç `.next/BUILD_ID`)
8. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx (–µ—Å–ª–∏ –µ—Å—Ç—å `nginx-ogfoody.conf`)
9. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `pm2 delete all` ‚Üí `pm2 start ecosystem.config.js`
10. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3-5 –º–∏–Ω—É—Ç

---

## 2. –†–£–ß–ù–û–ô –î–ï–ü–õ–û–ô –ß–ï–†–ï–ó SSH

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –Ω—É–∂–µ–Ω –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å:

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@5.129.194.168
# –ü–∞—Ä–æ–ª—å: pULRoAvF@P-@4Y
```

### –®–∞–≥ 2: –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd /var/www/ogfoody
# –ò–ª–∏ –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ:
cd /root/my-project
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ Git

```bash
# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git fetch origin

# –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç –∏–∑ main (–í–ù–ò–ú–ê–ù–ò–ï: –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã!)
git reset --hard origin/main
# –ò–ª–∏ –µ—Å–ª–∏ –≤–µ—Ç–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è master:
git reset --hard origin/master
```

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–≤–∫–ª—é—á–∞—è devDependencies –¥–ª—è —Å–±–æ—Ä–∫–∏)
npm install --production=false

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
# npm ci --production=false
```

### –®–∞–≥ 5: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã PM2
pm2 stop all

# –ò–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
pm2 stop ogfoody

# –ñ–¥–µ–º 1-2 —Å–µ–∫—É–Ω–¥—ã
sleep 2
```

### –®–∞–≥ 6: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–±–∏—Ä–∞–µ–º Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run build

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏
test -f .next/BUILD_ID && echo "‚úÖ Build successful" || echo "‚ùå Build failed"
```

**–ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `npm run build 2>&1 | tail -50`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ TypeScript: `npx tsc --noEmit`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `cat .env.production`

### –®–∞–≥ 7: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Nginx (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
# –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª nginx-ogfoody.conf –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
if test -f nginx-ogfoody.conf; then
  sudo cp nginx-ogfoody.conf /etc/nginx/sites-available/ogfoody.conf
  sudo nginx -t  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  sudo systemctl reload nginx
  echo "‚úÖ Nginx configuration updated"
else
  echo "‚ö†Ô∏è nginx-ogfoody.conf not found, skipping nginx update"
fi
```

### –®–∞–≥ 8: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã PM2
pm2 delete all

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–Ω–æ–≤–æ
pm2 start ecosystem.config.js

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PM2 (–¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞)
pm2 save
```

### –®–∞–≥ 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 status

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ (30 —Å—Ç—Ä–æ–∫)
pm2 logs --lines 30 --nostream

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
pm2 logs --err --lines 50 --nostream
```

### –®–∞–≥ 10: –í—ã—Ö–æ–¥

```bash
exit
```

---

## 3. –î–ï–ü–õ–û–ô –ß–ï–†–ï–ó EXPECT –°–ö–†–ò–ü–¢

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ expect —Å–∫—Ä–∏–ø—Ç–∞

–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç: `deploy-increment-fix.expect`

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `timeout 300` - –æ–±—â–∏–π —Ç–∞–π–º–∞—É—Ç 5 –º–∏–Ω—É—Ç
- `spawn ssh root@5.129.194.168` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
- –ü–∞—Ä–æ–ª—å: `pULRoAvF@P-@4Y`

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π expect —Å–∫—Ä–∏–ø—Ç:**

```expect
#!/usr/bin/expect -f

set timeout 300

spawn ssh root@5.129.194.168

expect {
    "password:" {
        send "pULRoAvF@P-@4Y\r"
        exp_continue
    }
    "yes/no" {
        send "yes\r"
        exp_continue
    }
    "root@" {
        send "cd /var/www/ogfoody\r"
        expect "root@"
        
        # –í–∞—à–∏ –∫–æ–º–∞–Ω–¥—ã –∑–¥–µ—Å—å
        send "git fetch origin\r"
        expect "root@"
        send "git reset --hard origin/main\r"
        expect "root@"
        
        # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
        
        send "exit\r"
    }
}

expect eof
```

**–ó–∞–ø—É—Å–∫:**
```bash
chmod +x deploy-increment-fix.expect
./deploy-increment-fix.expect
```

---

## 4. –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

#### 4.1. –°—Ç–∞—Ç—É—Å PM2

```bash
ssh root@5.129.194.168 "pm2 status"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id  ‚îÇ name     ‚îÇ status  ‚îÇ restart ‚îÇ uptime   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0   ‚îÇ ogfoody  ‚îÇ online  ‚îÇ 0       ‚îÇ 1m       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å `errored` –∏–ª–∏ `stopped`:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs ogfoody --lines 100`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env.production`
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: `pm2 restart ogfoody`

#### 4.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–∞

```bash
# HTTP –∑–∞–ø—Ä–æ—Å –∫ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
curl -I https://ogfoody.ru

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
# HTTP/2 200
# –∏–ª–∏
# HTTP/1.1 200 OK
```

**–ï—Å–ª–∏ 502 Bad Gateway:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –∏–ª–∏ –Ω–µ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 3000
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `pm2 status` –∏ `netstat -tulpn | grep 3000`

**–ï—Å–ª–∏ 503 Service Unavailable:**
- Nginx –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `systemctl status nginx`

#### 4.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
ssh root@5.129.194.168 "pm2 logs ogfoody --lines 50 --nostream"

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
ssh root@5.129.194.168 "pm2 logs ogfoody --err --lines 50 --nostream"
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- ‚ùå `Error:` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- ‚ùå `Failed to` - –Ω–µ—É–¥–∞—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ùå `Cannot find module` - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚ùå `EADDRINUSE` - –ø–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç
- ‚úÖ `Server ready` - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
- ‚úÖ `Compiled successfully` - —Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞

#### 4.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
# Health check endpoint
curl https://ogfoody.ru/api/health

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: JSON —Å "status": "ok"
```

#### 4.5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://ogfoody.ru
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ –≤ –∑–∞–∫–∞–∑
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## 5. –û–¢–ö–ê–¢ –ò–ó–ú–ï–ù–ï–ù–ò–ô

–ï—Å–ª–∏ –¥–µ–ø–ª–æ–π —Å–ª–æ–º–∞–ª —á—Ç–æ-—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
ssh root@5.129.194.168
cd /var/www/ogfoody

# –°–º–æ—Ç—Ä–∏–º –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline -10

# –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç
git reset --hard HEAD~1

# –ò–ª–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–º–∏—Ç
git reset --hard <commit-hash>

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º
npm run build
pm2 restart ogfoody
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ –±—ç–∫–∞–ø

```bash
ssh root@5.129.194.168
cd /var/www/ogfoody

# –°–º–æ—Ç—Ä–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã
ls -lh ../backups/

# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑ –±—ç–∫–∞–ø–∞
cd ..
tar -xzf backups/ogfoody_backup_YYYYMMDD_HHMMSS.tar.gz -C ogfoody/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º
cd ogfoody
pm2 restart ogfoody
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ PM2

```bash
ssh root@5.129.194.168

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 stop ogfoody

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é (–µ—Å–ª–∏ –µ—Å—Ç—å)
pm2 start ecosystem.config.js --update-env
```

---

## 6. TROUBLESHOOTING

### –ü—Ä–æ–±–ª–µ–º–∞: "502 Bad Gateway"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 3000
- Nginx –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@5.129.194.168
pm2 status  # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
pm2 restart ogfoody  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º
pm2 logs ogfoody --lines 100  # –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Build failed"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –û—à–∏–±–∫–∏ TypeScript
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@5.129.194.168
cd /var/www/ogfoody

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏
npm run build 2>&1 | tail -50

# –ü—Ä–æ–≤–µ—Ä—è–µ–º TypeScript
npx tsc --noEmit

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json
npm install --production=false
npm run build
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Port 3000 already in use"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –°—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è
- –î—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@5.129.194.168

# –ù–∞—Ö–æ–¥–∏–º –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000
netstat -tulpn | grep 3000
# –ò–ª–∏
lsof -i :3000

# –£–±–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å
kill -9 <PID>

# –ò–ª–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã
pm2 delete all
pm2 start ecosystem.config.js
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot find module"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Node.js

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@5.129.194.168
cd /var/www/ogfoody

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é Node.js (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 20.x)
node -v

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json
npm install --production=false
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Nginx configuration test failed"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@5.129.194.168

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –°–º–æ—Ç—Ä–∏–º –æ—à–∏–±–∫–∏
sudo tail -50 /var/log/nginx/error.log

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo cp /etc/nginx/sites-available/ogfoody.conf.backup /etc/nginx/sites-available/ogfoody.conf
sudo nginx -t
sudo systemctl reload nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Environment variables not loaded"

**–ü—Ä–∏—á–∏–Ω—ã:**
- `.env.production` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
- PM2 –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@5.129.194.168
cd /var/www/ogfoody

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞
ls -la .env.production

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–ë–ï–ó –ø–æ–∫–∞–∑–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤!)
head -5 .env.production

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º PM2 —Å —è–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π env
pm2 delete all
pm2 start ecosystem.config.js
```

---

## 7. –ß–ï–ö–õ–ò–°–¢ –î–ï–ü–õ–û–Ø

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:

- [ ] –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (`npm run dev`)
- [ ] –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ (`npm run build`)
- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã (`git status` —á–∏—Å—Ç—ã–π)
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –≤ `origin/main`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (`.env.production` –Ω–µ –∏–∑–º–µ–Ω–µ–Ω —Å–ª—É—á–∞–π–Ω–æ)

### –í–æ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è:

- [ ] –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `git reset --hard origin/main` —É—Å–ø–µ—à–Ω–æ
- [ ] `npm install` –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `npm run build` –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
- [ ] `.next/BUILD_ID` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] PM2 –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

- [ ] `pm2 status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `online`
- [ ] `curl https://ogfoody.ru` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## 8. –í–ê–ñ–ù–´–ï –§–ê–ô–õ–´ –ò –ü–£–¢–ò

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```
/var/www/ogfoody/              # –û—Å–Ω–æ–≤–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .env.production            # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ù–ï –ö–û–ú–ú–ò–¢–ò–¢–¨!)
‚îú‚îÄ‚îÄ .next/                     # –°–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ ecosystem.config.js        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2
‚îú‚îÄ‚îÄ nginx-ogfoody.conf         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
‚îú‚îÄ‚îÄ logs/                      # –õ–æ–≥–∏ PM2
‚îÇ   ‚îú‚îÄ‚îÄ err.log
‚îÇ   ‚îî‚îÄ‚îÄ out.log
‚îî‚îÄ‚îÄ node_modules/              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### –õ–æ–∫–∞–ª—å–Ω–æ:

```
./deploy-increment-fix.expect  # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
./ecosystem.config.js          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2
./nginx-ogfoody.conf           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
./package.json                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
```

---

## 9. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### ‚ö†Ô∏è –ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–ô–¢–ï:

1. ‚ùå –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env.production` –≤ Git
2. ‚ùå –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ –ª–æ–≥–∞—Ö –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
3. ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git push --force` –Ω–∞ `main`
4. ‚ùå –ù–µ –¥–µ–ø–ª–æ–π—Ç–µ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ `npm run build`
5. ‚ùå –ù–µ —É–¥–∞–ª—è–π—Ç–µ `.env.production` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### ‚úÖ –í–°–ï–ì–î–ê –î–ï–õ–ê–ô–¢–ï:

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–¥ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. ‚úÖ –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –ø–µ—Ä–µ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
4. ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
5. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–º–∏—Ç–∞—Ö

---

## 10. –ö–û–ù–¢–ê–ö–¢–´ –ò –†–ï–°–£–†–°–´

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- `DEPLOYMENT_CHECKLIST.md` - –ø–æ–ª–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è
- `DEPLOYMENT_GUIDE_OGFOODY.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `QUICK_START_DEPLOYMENT.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `SERVER_ACCESS_INFO.md` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 status

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs ogfoody

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart ogfoody

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–∞
curl -I https://ogfoody.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx
sudo nginx -t
sudo systemctl status nginx
```

---

## 11. –ü–†–ò–ú–ï–†–´ –î–ï–ü–õ–û–Ø

### –ü—Ä–∏–º–µ—Ä 1: –î–µ–ø–ª–æ–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–∞

```bash
# 1. –õ–æ–∫–∞–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏–ª–∏ –±–∞–≥
git add app/api/orders/route.ts
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–ª–æ–≤"
git push origin main

# 2. –î–µ–ø–ª–æ–π
./deploy-increment-fix.expect

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
curl -I https://ogfoody.ru
ssh root@5.129.194.168 "pm2 logs ogfoody --lines 20 --nostream"
```

### –ü—Ä–∏–º–µ—Ä 2: –î–µ–ø–ª–æ–π –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

```bash
# 1. –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é
git add components/new-feature.tsx
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–ø–ª–∞—Ç—ã"
git push origin main

# 2. –î–µ–ø–ª–æ–π
./deploy-increment-fix.expect

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
# –û—Ç–∫—Ä—ã—Ç—å https://ogfoody.ru –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
```

### –ü—Ä–∏–º–µ—Ä 3: –î–µ–ø–ª–æ–π —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# 1. –û–±–Ω–æ–≤–∏–ª–∏ package.json
git add package.json package-lock.json
git commit -m "chore: –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏"
git push origin main

# 2. –î–µ–ø–ª–æ–π (npm install –æ–±–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
./deploy-increment-fix.expect

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
ssh root@5.129.194.168 "cd /var/www/ogfoody && npm list --depth=0"
```

---

## 12. –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô

### GitHub Actions

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions –ø—Ä–∏ `git push` –≤ `main`.

**–§–∞–π–ª:** `.github/workflows/deploy.yml`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ push –≤ `main`
2. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH
3. –î–µ–ª–∞–µ—Ç –±—ç–∫–∞–ø
4. –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥
5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
6. –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
7. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç PM2

**–ï—Å–ª–∏ –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ GitHub Secrets (Settings ‚Üí Secrets ‚Üí Actions)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ GitHub Actions
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ expect —Å–∫—Ä–∏–ø—Ç

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢

**–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º:**

1. ‚úÖ –ö–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
2. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
3. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –≤ `origin/main`
4. ‚úÖ –í—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–µ–ø–ª–æ—è

**–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è:**

1. ‚úÖ PM2 —Å—Ç–∞—Ç—É—Å `online`
2. ‚úÖ –°–∞–π—Ç –æ—Ç–≤–µ—á–∞–µ—Ç (HTTP 200)
3. ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
4. ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-16  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ
