# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü NocoDB: –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏ ID

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ ID —Ç–∞–±–ª–∏—Ü

–í—Å–µ ID —Ç–∞–±–ª–∏—Ü —É–∂–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã –≤ `.idx/dev.nix`:

```
NOCODB_TABLE_MEALS = "mzvhjcbvb7ho4kg"
NOCODB_TABLE_EXTRAS = "mdnd7rtq2nkhm8l"
NOCODB_TABLE_DELIVERY_ZONES = "m1acefbr9gw4yw3"
NOCODB_TABLE_USERS = "mo76x8dgkrrtcsw"
NOCODB_TABLE_ORDERS = "mu39t62nrr9zehg"
NOCODB_TABLE_ORDER_PERSONS = "mbghkb95fa2ndaa"
NOCODB_TABLE_ORDER_MEALS = "m9qfdckiks8zl3k"
NOCODB_TABLE_ORDER_EXTRAS = "mkxv1ektxtrhaca"
NOCODB_TABLE_PROMO_CODES = "m4pw0ph1s4z95k2"
NOCODB_TABLE_REVIEWS = "mg5joschxv2uhkq"
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä—É—Å—Å–∫–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–±–ª–∏—Ü—ã –≤ NocoDB –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã —Å —Ä—É—Å—Å–∫–∏–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∫–æ–ª–æ–Ω–æ–∫.

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω endpoint `/api/db/setup-tables-en` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü
- –°–æ–∑–¥–∞–Ω endpoint `/api/db/fix-table-titles` –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω `setup-tables` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —á–µ—Ä–µ–∑ API –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –≤–µ—Ä—Å–∏–µ–π NocoDB. –ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ NocoDB.

### 3. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–°–æ–∑–¥–∞–Ω API endpoint:** `/api/images/[...path]/route.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ö–µ—à–∏—Ä—É–µ—Ç –Ω–∞ 1 —á–∞—Å (3600 —Å–µ–∫—É–Ω–¥)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ ETag –∏ Last-Modified
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç stale-while-revalidate –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
// –í–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ URL:
<img src="https://example.com/image.jpg" />

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Å–∏:
<img src="/api/images/https://example.com/image.jpg" />
```

**–ó–∞–≥–æ–ª–æ–≤–∫–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `Cache-Control: public, max-age=3600, must-revalidate, stale-while-revalidate=86400`
- –ö–µ—à –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ: 1 —á–∞—Å
- Stale-while-revalidate: 24 —á–∞—Å–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä–æ–µ, –æ–±–Ω–æ–≤–ª—è–µ–º –≤ —Ñ–æ–Ω–µ)

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤—Ä—É—á–Ω—É—é:

1. –û—Ç–∫—Ä–æ–π—Ç–µ NocoDB –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –î–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
   - –î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–ª–æ–Ω–∫–∏ —Å —Ä—É—Å—Å–∫–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º:
     - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–æ–ª–æ–Ω–∫—É
     - –ò–∑–º–µ–Ω–∏—Ç–µ "Title" –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç
     - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –ú–∞–ø–ø–∏–Ω–≥ —Ä—É—Å—Å–∫–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ:

–°–º. —Ñ–∞–π–ª `app/api/db/setup-tables-en/route.ts` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –º–∞–ø–ø–∏–Ω–≥–æ–≤.

### –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ endpoint:

```typescript
// –ë—ã–ª–æ:
<img src={meal.image} />

// –°—Ç–∞–ª–æ:
<img src={meal.image ? `/api/images/${encodeURIComponent(meal.image)}` : '/placeholder.jpg'} />
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Endpoints:

1. **POST /api/db/setup-tables-en** - –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü
2. **POST /api/db/fix-table-titles** - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π endpoint –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
3. **GET /api/images/[...path]** - –ü—Ä–æ–∫—Å–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–í—Å–µ ID —Ç–∞–±–ª–∏—Ü —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `.idx/dev.nix`. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç–µ `.env.local` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel.





