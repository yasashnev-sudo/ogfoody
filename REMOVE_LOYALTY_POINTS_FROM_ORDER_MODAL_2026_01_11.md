# –£–±—Ä–∞–Ω—ã –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ OrderModal

**–î–∞—Ç–∞:** 2026-01-11  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## –õ–æ–≥–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–∞–∑ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –±—ã–ª –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ `PaymentModal`, –ª–æ–≥–∏—á–Ω–æ –∏ –≤—ã–±–æ—Ä –±–∞–ª–ª–æ–≤ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—É–¥–∞ –∂–µ. –í—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–æ–ø–ª–∞—Ç–∞ + –±–∞–ª–ª—ã) —Ç–µ–ø–µ—Ä—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.

## –ß—Ç–æ —É–¥–∞–ª–µ–Ω–æ –∏–∑ OrderModal

### 1. –°–æ—Å—Ç–æ—è–Ω–∏—è

```typescript
// ‚ùå –£–î–ê–õ–ï–ù–û:
const [useLoyaltyPoints, setUseLoyaltyPoints] = useState(false)
const [loyaltyPointsToUse, setLoyaltyPointsToUse] = useState(0)
```

### 2. –†–∞—Å—á–µ—Ç—ã

```typescript
// ‚ùå –£–î–ê–õ–ï–ù–û:
const maxPointsDiscount = Math.min(userLoyaltyPoints, Math.floor(totalBeforeDiscount * 0.5))
const pointsDiscount = useLoyaltyPoints ? Math.min(loyaltyPointsToUse, maxPointsDiscount) : 0

// ‚úÖ –¢–ï–ü–ï–†–¨:
const pointsDiscount = 0  // –ë–∞–ª–ª—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ PaymentModal
```

### 3. –§—É–Ω–∫—Ü–∏—è applyAllPoints

```typescript
// ‚ùå –£–î–ê–õ–ï–ù–û:
const applyAllPoints = () => {
  setLoyaltyPointsToUse(maxPointsDiscount)
  setUseLoyaltyPoints(true)
}
```

### 4. UI –±–ª–æ–∫ —Å –±–∞–ª–ª–∞–º–∏

–£–¥–∞–ª–µ–Ω –≤–µ—Å—å –±–ª–æ–∫ (—Å—Ç—Ä–æ–∫–∏ 1485-1563):
- –ß–µ–∫–±–æ–∫—Å "–ë–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏"
- –ò–Ω–ø—É—Ç –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–∞–ª–ª–æ–≤
- –ö–Ω–æ–ø–∫–∞ "–°–ø–∏—Å–∞—Ç—å –≤—Å–µ"
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–∞–ª–ª–∞—Ö

## –ì–¥–µ —Ç–µ–ø–µ—Ä—å –±–∞–ª–ª—ã

‚úÖ **–¢–æ–ª—å–∫–æ –≤ PaymentModal** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç:
1. –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è
3. –í–∏–¥–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—É–º–º—É —Å —É—á–µ—Ç–æ–º –±–∞–ª–ª–æ–≤

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ï–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** ‚Äî –≤—Å–µ –ø—Ä–æ –¥–µ–Ω—å–≥–∏ –≤ PaymentModal  
‚úÖ **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π OrderModal** ‚Äî —Ñ–æ–∫—É—Å —Ç–æ–ª—å–∫–æ –Ω–∞ –≤—ã–±–æ—Ä–µ –±–ª—é–¥  
‚úÖ **–õ–æ–≥–∏—á–Ω—ã–π flow:**
- OrderModal: –í—ã–±–æ—Ä –±–ª—é–¥ ‚Üí "–ó–∞–∫–∞–∑–∞—Ç—å"
- PaymentModal: –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã + –ë–∞–ª–ª—ã ‚Üí "–û–ø–ª–∞—Ç–∏—Ç—å"

‚úÖ **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî —Ä–∞–Ω—å—à–µ –±–∞–ª–ª—ã –º–æ–∂–Ω–æ –±—ã–ª–æ "–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å" –≤ OrderModal, –∞ –ø–æ—Ç–æ–º –ø–æ —Ñ–∞–∫—Ç—É –æ–Ω–∏ —Å–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ PaymentModal  
‚úÖ **–ü—Ä–æ—â–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –≤—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π flow

### –î–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞:

1. **OrderModal**: 
   - –í—ã–±–æ—Ä –±–ª—é–¥ –Ω–∞ 2 –¥–Ω—è
   - –ü—Ä–æ–º–æ–∫–æ–¥—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –í–∏–¥–Ω–∞ —Å—É–º–º–∞ –ë–ï–ó —É—á–µ—Ç–∞ –±–∞–ª–ª–æ–≤
   - –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫–∞–∑–∞—Ç—å ¬∑ XXXX ‚ÇΩ"

2. **PaymentModal**:
   - –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã (–∫–∞—Ä—Ç–∞/–°–ë–ü/–Ω–∞–ª–∏—á–Ω—ã–µ)
   - –ë–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ (—Å–∫–æ–ª—å–∫–æ —Å–ø–∏—Å–∞—Ç—å)
   - –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ —Å —É—á–µ—Ç–æ–º –±–∞–ª–ª–æ–≤
   - –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å"

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞:

1. **OrderModal**:
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞
   - –ö–Ω–æ–ø–∫–∞ "–°–û–•–†–ê–ù–ò–¢–¨"
   - –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑ ¬∑ XXXX ‚ÇΩ" (–∂–µ–ª—Ç–∞—è)

2. **PaymentModal**:
   - –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
   - –í—ã–±–æ—Ä –±–∞–ª–ª–æ–≤
   - –û–ø–ª–∞—Ç–∞

## –ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

‚úÖ `PaymentModal` —É–∂–µ –∏–º–µ–µ—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –±–∞–ª–ª–∞–º–∏  
‚úÖ API –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è  
‚úÖ –†–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è  
‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∏ —Å–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### `components/order-modal.tsx`

**–£–¥–∞–ª–µ–Ω–æ:**
- –°—Ç—Ä–æ–∫–∏ 289-290: –°–æ—Å—Ç–æ—è–Ω–∏—è `useLoyaltyPoints` –∏ `loyaltyPointsToUse`
- –°—Ç—Ä–æ–∫–∏ 460-461: –†–∞—Å—á–µ—Ç `maxPointsDiscount` –∏ `pointsDiscount`
- –°—Ç—Ä–æ–∫–∏ 476-479: –§—É–Ω–∫—Ü–∏—è `applyAllPoints`
- –°—Ç—Ä–æ–∫–∏ 565-566: –ü–µ—Ä–µ–¥–∞—á–∞ `loyaltyPointsUsed` –≤ –∑–∞–∫–∞–∑
- –°—Ç—Ä–æ–∫–∏ 1485-1563: UI –±–ª–æ–∫ —Å –±–∞–ª–ª–∞–º–∏

**–û—Å—Ç–∞–ª–æ—Å—å:**
- –ü—Ä–æ–º–æ–∫–æ–¥—ã (–ø–æ–∫–∞ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã, —Ö–æ—Ç—è —Ç–æ–∂–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º–µ
- –†–∞–∑–±–∏–≤–∫–∞ —Å—É–º–º—ã (–∑–∞–∫–∞–∑ + –¥–æ—Å—Ç–∞–≤–∫–∞)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

‚úÖ –°–±–æ—Ä–∫–∞: `npm run build` ‚Äî —É—Å–ø–µ—à–Ω–æ  
‚úÖ TypeScript: –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ –õ–æ–≥–∏–∫–∞: –±–∞–ª–ª—ã —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ PaymentModal

## –ò—Ç–æ–≥

‚úÖ **OrderModal —É–ø—Ä–æ—â–µ–Ω** ‚Äî —Ñ–æ–∫—É—Å –Ω–∞ –≤—ã–±–æ—Ä–µ –±–ª—é–¥  
‚úÖ **PaymentModal ‚Äî –µ–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ** –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  
‚úÖ **–õ–æ–≥–∏—á–Ω—ã–π flow** ‚Äî —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Å—Ç–∞–≤, –ø–æ—Ç–æ–º –æ–ø–ª–∞—Ç–∞+–±–∞–ª–ª—ã  
‚úÖ **–ù–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–Ω–æ** ‚Äî —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç  

–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –µ—â–µ –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–µ–Ω –∏ –ª–æ–≥–∏—á–µ–Ω! üéâ


