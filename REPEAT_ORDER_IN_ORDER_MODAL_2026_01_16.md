# –§—É–Ω–∫—Ü–∏—è "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–∫–∞–∑" –≤ OrderModal - –≠–¢–ê–õ–û–ù

**–î–∞—Ç–∞:** 2026-01-16  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ  
**–í–µ—Ä—Å–∏—è:** –≠–¢–ê–õ–û–ù (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–∫–∞–∑" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ `OrderModal`, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∑–∞–∫–∞–∑ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–∞–∑ –Ω–∞ –Ω–æ–≤—É—é –¥–∞—Ç—É –ø—Ä—è–º–æ –∏–∑ –º–æ–¥–∞–ª–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–∫–∞–∑–∞.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"** –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –º–æ–¥–∞–ª–∫–∏ (—Ä—è–¥–æ–º —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º)
2. **–ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã** —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º—É –º–µ–Ω—é
4. **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö** –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏
5. **–ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –º–µ–∂–¥—É –º–æ–¥–∞–ª–∫–∞–º–∏ (—Å—Ç–∞—Ä–∞—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –Ω–æ–≤–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **`OrderModal`** (`components/order-modal.tsx`) - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞
- **`handleRepeatOrder`** (`app/page.tsx`) - —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–∫–∞–∑–∞

### Props –¥–ª—è OrderModal

```typescript
interface OrderModalProps {
  // ... –¥—Ä—É–≥–∏–µ props
  onRepeatOrder?: (order: Order, targetDate: Date) => Promise<void>
  availableDates?: Date[]
  unavailableItems?: string[] // –î–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö
}
```

### State –≤ app/page.tsx

```typescript
const [draftOrder, setDraftOrder] = useState<Order | null>(null)
const [draftOrderUnavailableItems, setDraftOrderUnavailableItems] = useState<string[]>([])
```

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `OrderModal`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –¥–∞—Ç—É ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `onRepeatOrder(existingOrder, date)`
4. `handleRepeatOrder`:
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –º–µ–Ω—é
   - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∑–∞–∫–∞–∑–∞
   - –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏
   - –û—á–∏—â–∞–µ—Ç –ø–æ–ª—è –æ–ø–ª–∞—Ç—ã, –ø—Ä–æ–º–æ–∫–æ–¥–∞, —Å—Ç–∞—Ç—É—Å–∞
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ `draftOrderUnavailableItems`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `draftOrder` –∏ `selectedDate` —á–µ—Ä–µ–∑ `flushSync`
5. –ú–æ–¥–∞–ª–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤—É—é –¥–∞—Ç—É
6. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å)

## ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏

- –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `DialogHeader`, —Ä—è–¥–æ–º —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `shrink-0` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–∂–∞—Ç–∏—è
- –ö–Ω–æ–ø–∫–∞ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –∫—Ä–µ—Å—Ç–∏–∫–æ–º –∑–∞–∫—Ä—ã—Ç–∏—è

### 2. –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã

- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: `bottom-full left-0 right-0 mb-1` (–Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π)
- –î–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ **–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä—è–¥–æ–≤** (grid layout) –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–µ –¥–∞—Ç—ã (–±–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–∫–∞–∑–æ–≤)
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ: —Å–µ–≥–æ–¥–Ω—è (–∂–µ–ª—Ç—ã–π), –∑–∞–≤—Ç—Ä–∞ (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π), —ç—Ç–∞ –Ω–µ–¥–µ–ª—è (—Å–∏–Ω–∏–π)

### 3. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏** –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è (–Ω–µ –¥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è!)
- –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ prop `unavailableItems`
- –û—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏ –∑–∞–∫–∞–∑–∞

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

- `onClose()` **–ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è** –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–∫–∞–∑–∞
- `handleRepeatOrder` —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ–º/–∑–∞–∫—Ä—ã—Ç–∏–µ–º —á–µ—Ä–µ–∑ `setSelectedDate`
- –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –¥–∞—Ç—É

### 5. –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ

```typescript
const newOrder: Order = {
  ...cleanValidatedOrder,
  id: undefined,
  orderNumber: undefined,
  startDate: targetDate,
  paid: false,
  paidAt: undefined,
  paymentMethod: undefined,
  paymentStatus: undefined,
  paymentId: undefined,
  orderStatus: 'pending',
  promoCode: undefined,
  promoDiscount: undefined,
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

## üé® –í–µ—Ä—Å—Ç–∫–∞

### –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"

```tsx
<Button
  variant="outline"
  size="sm"
  className="bg-[#9D00FF]/10 hover:bg-[#9D00FF]/20 text-[#9D00FF] border-2 border-[#9D00FF] hover:border-[#9D00FF] font-medium shrink-0"
>
  <RotateCcw className="w-3 h-3 mr-1.5" />
  –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
</Button>
```

### –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã

- Grid layout: `grid grid-cols-3 gap-2` (3 –∫–æ–ª–æ–Ω–∫–∏)
- –ö–∞–∂–¥–∞—è –¥–∞—Ç–∞: `w-[70px] h-[80px]`
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö

```tsx
{unavailableItems.length > 0 && (
  <div className="mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg">
    <div className="flex items-start gap-2">
      <AlertTriangle className="w-4 h-4 text-orange-600" />
      <div>
        <p className="text-sm font-medium text-orange-700">–í–Ω–∏–º–∞–Ω–∏–µ!</p>
        <p className="text-xs text-orange-600 mt-1">
          –°–ª–µ–¥—É—é—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –±–æ–ª—å—à–µ –Ω–µ –≤ –º–µ–Ω—é –∏ –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã: {unavailableItems.join(', ')}
        </p>
      </div>
    </div>
  </div>
)}
```

## üìù –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ù–ï –≤—ã–∑—ã–≤–∞—Ç—å `onClose()`** –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–∫–∞–∑–∞ - —ç—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –¥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –Ω–æ–≤–æ–π
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `flushSync`** –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `draftOrder` –∏ `selectedDate`
3. **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏**, –∞ –Ω–µ –¥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è
4. **–û—á–∏—â–∞—Ç—å `unavailableItems`** –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏ –∑–∞–∫–∞–∑–∞
5. **–ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É** –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –¥–∞—Ç—É

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ä–µ—à–µ–Ω–Ω—ã–µ)

1. ‚úÖ –ú–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–ª–∞—Å—å –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (—É–±—Ä–∞–Ω `onClose()`)
2. ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–ª–æ –º–æ–¥–∞–ª–∫—É - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏)
3. ‚úÖ –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Å–µ–∫–∞–ª–∞—Å—å —Å –∫—Ä–µ—Å—Ç–∏–∫–æ–º - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–≤–µ—Ä—Å—Ç–∫–∞)
4. ‚úÖ –î–∞—Ç—ã –Ω–µ –ø–æ–º–µ—â–∞–ª–∏—Å—å –≤ –º–æ–¥–∞–ª–∫—É - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (grid layout –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä—è–¥–æ–≤)

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏

1. ‚úÖ –ü–æ–≤—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏
2. ‚úÖ –ü–æ–≤—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ —Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏
3. ‚úÖ –ü–æ–≤—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ –Ω–∞ –¥–∞—Ç—É —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∑–∞–∫–∞–∑–æ–º (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)
4. ‚úÖ –ü–æ–≤—Ç–æ—Ä –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
5. ‚úÖ –ü–æ–≤—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ —Å –ø—Ä–æ–º–æ–∫–æ–¥–æ–º (–ø—Ä–æ–º–æ–∫–æ–¥ –æ—á–∏—â–∞–µ—Ç—Å—è)

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ –í—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ UX —É–ª—É—á—à–µ–Ω (–ø–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–∞–ª–æ–∫)
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç
- ‚úÖ –í–µ—Ä—Å—Ç–∫–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∏ —É–¥–æ–±–Ω–∞—è

## üîÑ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **2026-01-16**: –ü–µ—Ä–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –ø–æ–≤—Ç–æ—Ä–∞ –≤ OrderModal
- **2026-01-16**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–∫—Ä—ã—Ç–∏–µ–º –º–æ–¥–∞–ª–∫–∏
- **2026-01-16**: –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö
- **2026-01-16**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—Ç–∫–∞ (grid layout, –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏)
- **2026-01-17**: –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–∫–∞–∑–∞ - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ id
- **2026-01-17**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ (–±–µ–∑ id)
- **2026-01-17**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—Ö–∞ (—É–±—Ä–∞–Ω onPaymentSuccess –∏–∑ handlePayAndOrder)
- **2026-01-17**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (–¥–æ–±–∞–≤–ª–µ–Ω isNewOrder: true)

## üéØ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–∫–∞–∑–∞ (2026-01-17)

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–∞–∫–∞–∑–∞** –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –º–µ–Ω—é** –∏–∑ API
3. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤** –ø–æ id (Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞)
4. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ id**:
   - –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ `persons` –∏ –∫–æ–ø–∏—Ä—É–µ–º –±–ª—é–¥–∞ (–∑–∞–≤—Ç—Ä–∞–∫, –æ–±–µ–¥, —É–∂–∏–Ω)
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º –≥–∞—Ä–Ω–∏—Ä—ã (garnish) –¥–ª—è –±–ª—é–¥
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø–æ—Ä—Ü–∏–π (portion)
   - –ö–æ–ø–∏—Ä—É–µ–º `extras` –ø–æ id
5. **–ï—Å–ª–∏ —Ç–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω** –≤ –º–µ–Ω—é - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ `unavailableItems`
6. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞** —Å –Ω—É–ª—è (—Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –æ—á–∏—â–µ–Ω–æ)
7. **–û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏** —Å –Ω–æ–≤—ã–º –∑–∞–∫–∞–∑–æ–º

### –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

```typescript
// –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ - –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã –ø–æ –∏—Ö id
const handleRepeatOrder = async (order: Order, targetDate: Date) => {
  // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–∞–∫–∞–∑–∞ –Ω–∞ –¥–∞—Ç—É
  // 2. –ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
  // 3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ id
  const mealMap = new Map<number, Meal>(allMeals.map(m => [m.id, m]))
  const extraMap = new Map<number, Extra>(allExtras.map(e => [e.id, e]))
  
  // 4. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ id
  const newPersons = order.persons.map((person) => {
    // –ö–æ–ø–∏—Ä—É–µ–º –±–ª—é–¥–∞, –Ω–∞—Ö–æ–¥—è –∏—Ö –ø–æ id –≤ –º–µ–Ω—é
    // –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
  })
  
  // 5. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å –Ω—É–ª—è
  const newOrder: Order = {
    id: undefined,
    orderNumber: undefined,
    startDate: targetDate,
    persons: newPersons,
    extras: newExtras,
    // –í—Å–µ –ø–æ–ª—è –æ–ø–ª–∞—Ç—ã - –ø—É—Å—Ç—ã–µ
    paid: false,
    paymentMethod: undefined,
    paymentStatus: undefined,
    // ...
  }
}
```

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (2026-01-17)

### 1. –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ (–∑–∞–∫–∞–∑–æ–≤ –±–µ–∑ `id`) –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–æ —É—Å–ª–æ–≤–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏:
```typescript
// –ë—ã–ª–æ:
{!isExistingOrder && ( // –¢–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
  // –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
)}

// –°—Ç–∞–ª–æ:
{(!isExistingOrder || !existingOrder?.id) && ( // –î–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –ò —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
  // –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
)}
```

### 2. –ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—Ö–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–∫–Ω–æ —É—Å–ø–µ—Ö–∞ –ø–æ—è–≤–ª—è–ª–æ—Å—å –¥–æ –æ–ø–ª–∞—Ç—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ `onPaymentSuccess` –≤—ã–∑—ã–≤–∞–ª—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `onSave`.

**–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞–Ω –≤—ã–∑–æ–≤ `onPaymentSuccess` –∏–∑ `handlePayAndOrder` –≤ `OrderModal`. –¢–µ–ø–µ—Ä—å `onPaymentSuccess` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã –≤ `PaymentModal`.

```typescript
// –ë—ã–ª–æ:
onSave(order)
if (onPaymentSuccess) {
  onPaymentSuccess(order) // ‚ùå –ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤
}

// –°—Ç–∞–ª–æ:
onSave(order)
// ‚úÖ onPaymentSuccess –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã
```

### 3. –û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è —Ñ–ª–∞–≥ `isNewOrder: true`, –∏–∑-–∑–∞ —á–µ–≥–æ `PaymentModal` –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ –±–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω `isNewOrder: true` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ –≤ `handleSaveOrder`:

```typescript
setPaymentOrder({ 
  order: savedOrder, 
  total: savedOrder.total,
  isNewOrder: true // ‚úÖ –†–∞–∑—Ä–µ—à–∞–µ—Ç –æ–ø–ª–∞—Ç—É –Ω–∞–ª–∏—á–Ω—ã–º–∏
})
```

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏

1. ‚úÖ –ü–æ–≤—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏
2. ‚úÖ –ü–æ–≤—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ —Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏
3. ‚úÖ –ü–æ–≤—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ –Ω–∞ –¥–∞—Ç—É —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∑–∞–∫–∞–∑–æ–º (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)
4. ‚úÖ –ü–æ–≤—Ç–æ—Ä –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
5. ‚úÖ –ü–æ–≤—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ —Å –ø—Ä–æ–º–æ–∫–æ–¥–æ–º (–ø—Ä–æ–º–æ–∫–æ–¥ –æ—á–∏—â–∞–µ—Ç—Å—è)
6. ‚úÖ –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
7. ‚úÖ –û–∫–Ω–æ —É—Å–ø–µ—Ö–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–æ –æ–ø–ª–∞—Ç—ã
8. ‚úÖ –û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ –í—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ UX —É–ª—É—á—à–µ–Ω (–ø–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–∞–ª–æ–∫)
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç
- ‚úÖ –í–µ—Ä—Å—Ç–∫–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∏ —É–¥–æ–±–Ω–∞—è
- ‚úÖ –õ–æ–≥–∏–∫–∞ —É–ø—Ä–æ—â–µ–Ω–∞ –∏ –ø–æ–Ω—è—Ç–Ω–∞

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –≠–¢–ê–õ–û–ù - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è, –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
