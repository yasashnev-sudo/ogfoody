# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤ - 13 —è–Ω–≤–∞—Ä—è 2026

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –æ—Ç—á–µ—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö

### –õ–æ–∫–∞–ª—å–Ω–æ (dev):
- `/Users/sergejasasnev/Downloads/my-project (1)/debug_reports/`
- 2 –æ—Ç—á–µ—Ç–∞ –æ—Ç user-120

### Production:
- `/var/www/ogfoody/debug_reports/`
- 5 –æ—Ç—á–µ—Ç–æ–≤, –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç user-122 –æ –∏–∫–æ–Ω–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫–µ –∑–∞–∫–∞–∑–∞

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

### 1. Order_Extras: extra_id undefined ‚ùå‚Üí‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚ùå NocoDB POST error for Order_Extras: {
  data: { order_id: 550, extra_id: undefined, quantity: 1, price: 469 },
  response: '{"error":"DATABASE_ERROR","message":"A value is required for this field."}'
}
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–í `components/extras-selector.tsx` (—Å—Ç—Ä–æ–∫–∞ 48) –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è `id`:
```typescript
// ‚ùå –ë–´–õ–û:
onUpdate([...extras, { name: item.name, price: item.price, quantity: newQty, image: item.image }])
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// ‚úÖ –°–¢–ê–õ–û:
onUpdate([...extras, { id: item.id, name: item.name, price: item.price, quantity: newQty, image: item.image }])
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞:**
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ API:
- `app/api/orders/route.ts` (—Å—Ç—Ä–æ–∫–∞ 323-330)
- `app/api/orders/[id]/route.ts` (—Å—Ç—Ä–æ–∫–∞ 527-536)

```typescript
// ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ extra.id –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
if (!extra.id) {
  console.error(`  ‚ùå Extra –±–µ–∑ ID:`, JSON.stringify(extra, null, 2))
  console.warn(`  ‚ö†Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–µ–∑ ID, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º...`)
  continue
}
```

---

### 2. Skeleton –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–æ–≤–∞—Ä–æ–≤ ‚è≥‚Üí‚úÖ

**–ñ–∞–ª–æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user-121):**
> "–æ—á–µ–Ω—å –¥–æ–ª–≥–æ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å —Ç–æ–≤–∞—Ä—ã, –Ω–∞ –∏—Ö –º–µ—Å—Ç–µ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å skeleton –∞–Ω–∏–º–∞—Ü–∏–∏ (–∏ –≤ –ø–ª–∞—à–∫–∞—Ö —Ç–æ–∂–µ)"

**–†–µ—à–µ–Ω–∏–µ:**

#### –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `components/meal-card-skeleton.tsx`:
- `MealCardSkeleton` - –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
- `FreshCardSkeleton` - –¥–ª—è —Å–µ–∫—Ü–∏–∏ "–°–≤–µ–∂–∞–∫"
- `MealGridSkeleton` - –¥–ª—è —Å–µ—Ç–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ shimmer –∞–Ω–∏–º–∞—Ü–∏—è –≤ `app/globals.css`:
```css
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-shimmer {
  animation: shimmer 2s infinite;
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **FreshSection** (`components/fresh-section.tsx`):
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `FreshCardSkeleton` –ø—Ä–∏ `isLoading`

2. **MealSelector** (`components/meal-selector.tsx`):
   - –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø `isLoading?: boolean`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `MealGridSkeleton` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

3. **OrderModal** (`components/order-modal.tsx`):
   - –ü–æ–ª—É—á–∞–µ—Ç `isLoading` –∏–∑ `useMenu(weekType)`
   - –ü–µ—Ä–µ–¥–∞–µ—Ç `isLoading={isMenuLoading}` –≤–æ –≤—Å–µ 6 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `MealSelector`:
     - day1-breakfast, day1-lunch, day1-dinner
     - day2-breakfast, day2-lunch, day2-dinner

---

### 3. Server Action 'x' not found ‚ö†Ô∏è‚Üí‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Error: Failed to find Server Action "x". This request might be from an older or newer deployment.
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–°—Ç–∞—Ä—ã–π –∫—ç—à Next.js –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ:**
–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh root@5.129.194.168
cd /var/www/ogfoody
git pull origin main
npm run build
pm2 restart ogfoody
```

---

### 4. –ò–∫–æ–Ω–∫–∞ –¥–∏—Å–∫–µ—Ç—ã –Ω–∞ –∫–Ω–æ–ø–∫–µ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" üíæ‚Üí‚úÖ

**–ñ–∞–ª–æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user-122):**
> "–ó–¥–µ—Å—å –Ω–∞–≤–µ—Ä–Ω–æ–µ –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏–ª–∏–ø—à—É—é –∫–Ω–æ–ø–∫—É ¬´–∑–∞–∫–∞–∑–∞—Ç—å¬ª –∏ –Ω–∞ –Ω–µ–π –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–∏—Å–∫–µ—Ç—ã"

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–∞ –∫–Ω–æ–ø–∫–µ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" –≤ ProfileModal –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –∏–∫–æ–Ω–∫–∞ **Save** (–¥–∏—Å–∫–µ—Ç–∞ üíæ), —á—Ç–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–≤–µ—Ä–Ω–æ. –ò–∫–æ–Ω–∫–∞ –¥–∏—Å–∫–µ—Ç—ã –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç—Å—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ —Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞.

**–†–µ—à–µ–Ω–∏–µ:**
–ó–∞–º–µ–Ω–∏–ª –∏–∫–æ–Ω–∫—É –Ω–∞ **CheckCircle2** (‚úÖ) –¥–ª—è —Ä–µ–∂–∏–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (`isCheckoutFlow = true`), –æ—Å—Ç–∞–≤–∏–≤ **Save** —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è.

**–§–∞–π–ª:** `components/profile-modal.tsx`

```typescript
// ‚úÖ –°–¢–ê–õ–û:
{isCheckoutFlow ? (
  <>
    <CheckCircle2 className="w-5 h-5 inline mr-2" strokeWidth={3} />
    –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
  </>
) : (
  <>
    <Save className="w-5 h-5 inline mr-2" strokeWidth={3} />
    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
  </>
)}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ "–ø—Ä–∏–ª–∏–ø—à–µ–π –∫–Ω–æ–ø–∫–µ":**
–ö–Ω–æ–ø–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–∏–∑—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `flex flex-col`. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ UX —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω - –∫–Ω–æ–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞ –≤–Ω–∏–∑—É. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `FIX_CHECKOUT_BUTTON_ICON_2026_01_13.md`

---

## üîÑ –ë–∞–≥ –≤ –∞–Ω–∞–ª–∏–∑–µ

### 5. API 500 error - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–°–∏–º–ø—Ç–æ–º—ã (–ª–æ–∫–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏):**
```
[2026-01-13T12:33:22.389Z] [LOG] üì• –û—Ç–≤–µ—Ç API: 500
[2026-01-13T12:33:22.389Z] [ERROR] ‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API: {}
```

**–°—Ç–∞—Ç—É—Å:** 
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –ª–æ–≥–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ
- –í–æ–∑–º–æ–∂–Ω–æ —Å–≤—è–∑–∞–Ω–æ —Å –∑–∞–ø—Ä–æ—Å–æ–º –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

```bash
# 1. –õ–æ–∫–∞–ª—å–Ω–æ - –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–∞–≥–∏ extra_id, –¥–æ–±–∞–≤–ª–µ–Ω–∞ skeleton –∞–Ω–∏–º–∞—Ü–∏—è"
git push origin main

# 2. –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ
ssh root@5.129.194.168
cd /var/www/ogfoody
git pull origin main
npm install  # –Ω–∞ —Å–ª—É—á–∞–π –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm run build
pm2 restart ogfoody
pm2 logs ogfoody --lines 50

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
# - –û—Ç–∫—Ä—ã—Ç—å https://ogfoody.ru
# - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è–º–∏
# - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å skeleton –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
```

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `components/extras-selector.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å extra_id
2. `app/api/orders/route.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç undefined extra_id
3. `app/api/orders/[id]/route.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç undefined extra_id
4. `components/meal-card-skeleton.tsx` - –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
5. `app/globals.css` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ shimmer –∞–Ω–∏–º–∞—Ü–∏—è
6. `components/fresh-section.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω skeleton
7. `components/meal-selector.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω skeleton
8. `components/order-modal.tsx` - –ø–µ—Ä–µ–¥–∞—á–∞ isLoading
9. `components/profile-modal.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–∫–æ–Ω–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ó–∞–∫–∞–∑—ã —Å –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è–º–∏ –±–æ–ª—å—à–µ –Ω–µ –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π extra_id
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –∫—Ä–∞—Å–∏–≤—É—é skeleton –∞–Ω–∏–º–∞—Ü–∏—é –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- ‚úÖ –£–ª—É—á—à–µ–Ω UX –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–µ–Ω—é
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–∫–æ–Ω–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫–µ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" (CheckCircle2 –≤–º–µ—Å—Ç–æ Save)
- üîÑ API 500 –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

