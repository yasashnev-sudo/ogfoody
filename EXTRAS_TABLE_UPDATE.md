# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã Extras

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –≤ NocoDB
- ‚ùå –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–µ `available`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `is_current_week` (Checkbox)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `is_next_week` (Checkbox)
- ‚úÖ –ü–æ–ª–µ `image` –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ `SingleLineText` (–¥–ª—è URL —Å—Å—ã–ª–æ–∫)

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü
- `app/api/db/setup-tables/route.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Extras
- `app/api/db/setup-extras-table/route.ts` - —Å–æ–∑–¥–∞–Ω endpoint –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
- `app/api/db/check-structure/route.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–∂–∏–¥–∞–µ–º–∞—è —Å—Ö–µ–º–∞

#### TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- `lib/types.ts`:
  - `Extra` - —É–±—Ä–∞–Ω–æ `available`, –¥–æ–±–∞–≤–ª–µ–Ω—ã `isCurrentWeek` –∏ `isNextWeek`
  - `ExtraItem` - —É–±—Ä–∞–Ω–æ `available`, –¥–æ–±–∞–≤–ª–µ–Ω—ã `isCurrentWeek` –∏ `isNextWeek`

#### NocoDB –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- `lib/nocodb.ts`:
  - `NocoDBExtra` - —É–±—Ä–∞–Ω–æ `available`, –¥–æ–±–∞–≤–ª–µ–Ω—ã `is_current_week` –∏ `is_next_week`

#### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `lib/menu-utils.ts`:
  - `convertNocoDBExtraToExtraItem` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `is_current_week` –∏ `is_next_week` –≤–º–µ—Å—Ç–æ `available`

#### API endpoints
- `app/api/menu/route.ts`:
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è extras –ø–æ `is_current_week` –∏ `is_next_week` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `weekType`
  - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ª–æ–≥–∏–∫–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ meals

#### –£—Ç–∏–ª–∏—Ç—ã
- `lib/meals-data.ts`:
  - `isExtraAvailable` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ fallback)

### 3. –°–æ–∑–¥–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ NocoDB

**Table ID:** `mdnd7rtq2nkhm8l`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ (14 –ø–æ–ª–µ–π):**
1. Id (ID, –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç)
2. name (SingleLineText, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
3. category (SingleLineText, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
4. ingredients (LongText)
5. description (LongText)
6. price (Decimal, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
7. image (SingleLineText) - –¥–ª—è URL —Å—Å—ã–ª–æ–∫
8. calories (Number)
9. protein (Decimal)
10. fats (Decimal)
11. carbs (Decimal)
12. weight (Number)
13. is_current_week (Checkbox)
14. is_next_week (Checkbox)

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `.idx/dev.nix`: `NOCODB_TABLE_EXTRAS = "mdnd7rtq2nkhm8l"`

## üìã –õ–æ–≥–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥–∏ –Ω–µ–¥–µ–ª—å:

- **–î–ª—è —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (`weekType="current"`):**
  - –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ, –µ—Å–ª–∏ `is_current_week = true` –∏–ª–∏ –æ–±–∞ —Ñ–ª–∞–≥–∞ `true`

- **–î–ª—è —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–∏ (`weekType="next"`):**
  - –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ, –µ—Å–ª–∏ `is_next_week = true` –∏–ª–∏ –æ–±–∞ —Ñ–ª–∞–≥–∞ `true`

- **–ï—Å–ª–∏ –æ–±–∞ —Ñ–ª–∞–≥–∞ `false`:**
  - –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –û–±–Ω–æ–≤–∏—Ç—å `.env.local` —Å –Ω–æ–≤—ã–º ID —Ç–∞–±–ª–∏—Ü—ã:
   ```
   NOCODB_TABLE_EXTRAS=mdnd7rtq2nkhm8l
   ```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É Extras –≤ NocoDB –¥–∞–Ω–Ω—ã–º–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ `is_current_week` –∏ `is_next_week`

3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π –ø–æ –Ω–µ–¥–µ–ª—è–º





