# Документация компонента DailyStatus

## Общая информация

**Файл:** `components/daily-status.tsx`  
**Тип:** React компонент (Client Component)  
**Назначение:** Отображает статус доставки и наличия еды на текущий день

---

## Структура компонента

### Props (входные параметры)

```typescript
interface DailyStatusProps {
  orders: Order[]              // Массив заказов пользователя
  onOrderClick?: () => void    // Callback при клике на кнопку заказа (опционально)
  onFoodCardClick?: () => void // Callback при клике на карточку с едой (опционально)
}
```

---

## Три состояния компонента

Компонент отображает один из трех возможных статусов в зависимости от даты доставки и наличия еды:

### 1. Статус: "Доставка сегодня" (Delivery Day)

**Условие отображения:**  
Сегодняшняя дата совпадает с датой начала заказа (`order.startDate`)

**Визуальное оформление:**
- Фон: `#FFEA00` (желтый)
- Рамка: `border-2 border-black` (черная, сплошная)
- Тень: `shadow-brutal`
- Скругление: `rounded-xl`
- Отступы: `p-4 sm:p-5`

**Элементы:**
- **Иконка:** `Truck` (грузовик) из библиотеки `lucide-react`
  - Размер: `w-10 h-10 sm:w-12 sm:h-12`
  - Фон: белый с черной рамкой
  - Скругление: `rounded-lg`
  
- **Заголовок:** 
  - Текст: `"ЖДИ КУРЬЕРА СЕГОДНЯ"`
  - Стиль: `text-base sm:text-lg font-black text-black mb-1`
  
- **Подзаголовок:**
  - Текст: `"Интервал: 19:00 - 23:00"`
  - Стиль: `text-xs sm:text-sm text-black/80 font-bold`

**Функциональность:**  
Статичный блок, без интерактивности

---

### 2. Статус: "Еда есть сегодня" (Food Available)

**Условие отображения:**  
Сегодняшняя дата является днем 1 или днем 2 после даты доставки:
- День 1: `deliveryDate + 1 день`
- День 2: `deliveryDate + 2 дня`

**Визуальное оформление:**
- Фон: белый (`bg-white`)
- Рамка: `border-2 border-black` (черная, сплошная)
- Тень: `shadow-[4px_4px_0px_0px_#000000]` (brutalist стиль)
- Скругление: `rounded-xl`
- Отступы: `p-4 sm:p-5`
- Курсор: `cursor-pointer`
- Hover эффект: `hover:shadow-[3px_3px_0px_0px_#000000]`
- Переход: `transition-shadow`

**Элементы:**
- **Иконка:** `UtensilsCrossed` (скрещенные столовые приборы) из библиотеки `lucide-react`
  - Размер: `w-6 h-6 sm:w-8 sm:h-8`
  - Цвет: `#9D00FF` (фиолетовый)
  - Толщина обводки: `stroke-[2.5px]`
  
- **Заголовок:**
  - Текст: `"СЕГОДНЯ ТЫ СЫТЫЙ"`
  - Стиль: `text-base sm:text-lg font-black text-black uppercase mb-1`
  
- **Подзаголовок:**
  - Текст: `"Загляни в холодильник"`
  - Стиль: `text-xs sm:text-sm text-gray-600 font-medium`

**Функциональность:**  
- Кликабельный блок
- При клике вызывается `onFoodCardClick()` (если передан)
- Используется для навигации к разделу с едой

---

### 3. Статус: "Холодильник пуст" (Empty Day) ⭐

**Условие отображения:**  
Сегодня не день доставки и не день 1-2 после доставки (нет еды)

**Визуальное оформление:**
- Фон: `bg-gray-100` (светло-серый)
- Рамка: `border-2 border-dashed border-black` (черная, пунктирная)
- Тень: `shadow-brutal`
- Скругление: `rounded-xl`
- Отступы: `p-4 sm:p-5`
- Layout: `flex flex-col sm:flex-row` (вертикально на мобильных, горизонтально на десктопе)
- Выравнивание: `sm:items-center sm:justify-between`
- Отступы между элементами: `gap-3 sm:gap-4`

**Элементы:**

1. **Текстовый блок:**
   - Заголовок:
     - Текст: `"СЕГОДНЯ У ВАС В ХОЛОДИЛЬНИКЕ ПУСТО"`
     - Стиль: `text-sm sm:text-base md:text-lg font-black text-black leading-tight`
     - Контейнер: `flex-1 min-w-0`

2. **Кнопка действия:**
   - Условие отображения: отображается только если передан `onOrderClick`
   - Текст: `"ИСПРАВИТЬ ПОЛОЖЕНИЕ"`
   - Компонент: `Button` из `@/components/ui/button`
   - Стили:
     - Фон: `bg-black`
     - Текст: `text-white`
     - Hover: `hover:bg-black/90`
     - Рамка: `border-2 border-black`
     - Тень: `shadow-brutal`
     - Шрифт: `font-black`
     - Размер текста: `text-xs sm:text-sm`
     - Отступы: `px-3 sm:px-4 py-2`
     - Высота: `h-auto`
     - Ширина: `w-full sm:w-auto` (полная ширина на мобильных, авто на десктопе)
     - Позиционирование: `shrink-0`

**Функциональность:**
- При клике на кнопку вызывается `onOrderClick()`
- В текущей реализации (`app/page.tsx`):
  - Ищет следующую доступную дату для заказа
  - Если дата найдена - открывает календарь с выбранной датой (`handleDateClick`)
  - Если дата не найдена - показывает предупреждение "Нет доступных дат"

---

## Логика определения статуса

### Алгоритм работы:

1. **Получение текущей даты:**
   ```typescript
   const today = new Date()
   today.setHours(0, 0, 0, 0) // Обнуление времени для точного сравнения
   ```

2. **Проверка доставки сегодня:**
   ```typescript
   const hasDeliveryToday = orders.some((order) => {
     const deliveryDate = new Date(order.startDate)
     deliveryDate.setHours(0, 0, 0, 0)
     return deliveryDate.getTime() === today.getTime()
   })
   ```

3. **Проверка наличия еды (день 1 или день 2):**
   ```typescript
   const hasFoodToday = orders.some((order) => {
     const deliveryDate = new Date(order.startDate)
     deliveryDate.setHours(0, 0, 0, 0)
     
     const day1 = new Date(deliveryDate)
     day1.setDate(day1.getDate() + 1)
     
     const day2 = new Date(deliveryDate)
     day2.setDate(day2.getDate() + 2)
     
     return today.getTime() === day1.getTime() || today.getTime() === day2.getTime()
   })
   ```

4. **Приоритет отображения:**
   - Если `hasDeliveryToday === true` → показываем статус "Доставка сегодня"
   - Иначе, если `hasFoodToday === true` → показываем статус "Еда есть сегодня"
   - Иначе → показываем статус "Холодильник пуст"

---

## Использование компонента

### Пример использования из `app/page.tsx`:

```tsx
<DailyStatus
  orders={orders}
  onOrderClick={() => {
    // Поиск следующей доступной даты
    const today = new Date()
    today.setHours(0, 0, 0, 0)
    const nextAvailable = availableDates.find((date) => {
      const checkDate = new Date(date)
      checkDate.setHours(0, 0, 0, 0)
      return checkDate.getTime() >= today.getTime()
    })
    
    if (nextAvailable) {
      handleDateClick(nextAvailable) // Открыть календарь с датой
    } else {
      showWarning(
        "Нет доступных дат",
        "К сожалению, сейчас нет доступных дат для заказа. Попробуйте позже.",
        "info"
      )
    }
  }}
  onFoodCardClick={() => {
    // Навигация к разделу с едой
    // (реализация зависит от требований)
  }}
/>
```

---

## Все тексты компонента

### Русские тексты:

1. **"ЖДИ КУРЬЕРА СЕГОДНЯ"** - заголовок статуса доставки
2. **"Интервал: 19:00 - 23:00"** - подзаголовок с временем доставки
3. **"СЕГОДНЯ ТЫ СЫТЫЙ"** - заголовок статуса наличия еды
4. **"Загляни в холодильник"** - подзаголовок при наличии еды
5. **"СЕГОДНЯ У ВАС В ХОЛОДИЛЬНИКЕ ПУСТО"** - заголовок статуса пустого холодильника
6. **"ИСПРАВИТЬ ПОЛОЖЕНИЕ"** - текст кнопки действия

---

## Зависимости

### Импорты:

```typescript
import { Truck, UtensilsCrossed } from "lucide-react"  // Иконки
import { Button } from "@/components/ui/button"         // UI компонент кнопки
import { Order } from "@/lib/types"                     // Тип данных заказа
```

### Типы данных:

Компонент использует тип `Order` из `@/lib/types`, который должен содержать:
- `startDate: string | Date` - дата начала заказа (дата доставки)

---

## Адаптивность

Компонент полностью адаптивен и использует Tailwind CSS breakpoints:

- **Мобильные устройства** (`< sm`):
  - Вертикальная компоновка для блока "Холодильник пуст"
  - Меньшие размеры иконок и текста
  - Кнопка на всю ширину

- **Планшеты и десктопы** (`>= sm`):
  - Горизонтальная компоновка
  - Увеличенные размеры элементов
  - Кнопка с автоматической шириной

---

## Стилистика

Компонент использует **brutalist дизайн**:
- Жирные черные рамки
- Резкие тени (`shadow-brutal`)
- Контрастные цвета
- Жирные шрифты (`font-black`)
- Минималистичный подход

---

## Примечания

1. Компонент является **Client Component** (`"use client"`), так как использует интерактивность
2. Все даты сравниваются с обнуленным временем для точности
3. Компонент проверяет все заказы в массиве `orders` для определения статуса
4. Кнопка "ИСПРАВИТЬ ПОЛОЖЕНИЕ" отображается только если передан callback `onOrderClick`
