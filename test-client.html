<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Client - Order Display</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .order { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
        .cancelled { background: #fee; }
        .active { background: #efe; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üîç Test Client - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤</h1>
    
    <button onclick="loadOrders()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–∫–∞–∑—ã</button>
    <button onclick="clearConsole()">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å</button>
    
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h2>
    <div id="result"></div>
    
    <h2>–ö–æ–Ω—Å–æ–ª—å:</h2>
    <pre id="console"></pre>

    <script>
        const resultDiv = document.getElementById('result');
        const consoleDiv = document.getElementById('console');
        
        function log(msg) {
            console.log(msg);
            consoleDiv.textContent += msg + '\n';
        }
        
        function clearConsole() {
            consoleDiv.textContent = '';
        }
        
        async function loadOrders() {
            clearConsole();
            resultDiv.innerHTML = '';
            
            log('üìä –ó–∞–≥—Ä—É–∂–∞—é –∑–∞–∫–∞–∑—ã —á–µ—Ä–µ–∑ API...');
            
            try {
                const response = await fetch('http://localhost:3000/api/orders?userId=5');
                log(`‚úÖ –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω: ${response.status} ${response.statusText}`);
                
                const data = await response.json();
                log(`‚úÖ JSON —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω`);
                log(`üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞: ${Object.keys(data).join(', ')}`);
                
                const orders = data.orders || [];
                log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ –∑–∞–∫–∞–∑–æ–≤: ${orders.length}`);
                
                if (orders.length === 0) {
                    resultDiv.innerHTML = '<p style="color: red;">‚ùå –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>';
                    return;
                }
                
                let html = '<h3>–ó–∞–∫–∞–∑—ã:</h3>';
                
                orders.forEach((order, index) => {
                    const isCancelled = order.orderStatus === 'cancelled';
                    const className = isCancelled ? 'cancelled' : 'active';
                    
                    log(`${index + 1}. ID=${order.id}, –î–∞—Ç–∞=${order.startDate}, –°—Ç–∞—Ç—É—Å=${order.orderStatus}`);
                    
                    html += `
                        <div class="order ${className}">
                            <strong>${index + 1}. –ó–∞–∫–∞–∑ #${order.orderNumber || order.id}</strong><br>
                            ID: ${order.id}<br>
                            –î–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏: ${order.startDate}<br>
                            –°—Ç–∞—Ç—É—Å: ${order.orderStatus}<br>
                            –û–ø–ª–∞—á–µ–Ω–æ: ${order.paid ? '–î–∞' : '–ù–µ—Ç'}<br>
                            –°—É–º–º–∞: ${order.total} —Ä—É–±.<br>
                            –ü–µ—Ä—Å–æ–Ω: ${order.persons?.length || 0}
                        </div>
                    `;
                });
                
                resultDiv.innerHTML = html;
                log('‚úÖ –ó–∞–∫–∞–∑—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ');
                
            } catch (error) {
                log(`‚ùå –û–®–ò–ë–ö–ê: ${error.message}`);
                log(`Stack: ${error.stack}`);
                resultDiv.innerHTML = `<p style="color: red;">‚ùå –û—à–∏–±–∫–∞: ${error.message}</p>`;
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        log('üìù –ù–∞–∂–º–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–∫–∞–∑—ã" –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
    </script>
</body>
</html>



