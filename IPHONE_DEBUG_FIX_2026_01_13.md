# üì± –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç–æ–≤ —Å iPhone - 13 —è–Ω–≤–∞—Ä—è 2026

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ë–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã —Å iPhone –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## üîç –ü—Ä–∏—á–∏–Ω–∞:
1. `html2canvas` –º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ iOS/Safari
2. –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª —Ç–∞–π–º–∞—É—Ç –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
3. –ù–µ –±—ã–ª–æ fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
4. –ü–ª–æ—Ö–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### 1. –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
```typescript
const timeoutPromise = new Promise<null>((resolve) => {
  setTimeout(() => {
    console.warn('[DEBUG] Screenshot timeout (10s) - continuing without screenshot');
    resolve(null);
  }, 10000);
});

const canvas = await Promise.race([screenshotPromise, timeoutPromise]);
if (!canvas) {
  return null; // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–µ–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
}
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è retina –¥–∏—Å–ø–ª–µ–µ–≤
```typescript
scale: window.devicePixelRatio > 1 ? 1 : window.devicePixelRatio
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```typescript
if (!navigator.onLine) {
  addLog('error', '‚ùå –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É');
  throw new Error('No internet connection');
}
```

### 4. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```typescript
console.log('[DEBUG] –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞:', {
  logsCount: recentLogs.length,
  hasScreenshot: !!screenshot,
  screenshotSize: screenshot ? `${(screenshot.length / 1024).toFixed(0)} KB` : 'N/A',
});
```

### 5. UI —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö
```typescript
// –í DebugFloatingButton.tsx
{showError && (
  <div className="fixed bottom-24 right-6 bg-red-600 text-white px-4 py-3 rounded-lg shadow-xl">
    <div className="flex items-center gap-2">
      <span className="text-xl">‚ùå</span>
      <div>
        <p className="font-bold">–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏</p>
        <p className="text-xs opacity-90">{showError}</p>
      </div>
    </div>
  </div>
)}
```

### 6. –í–∏–±—Ä–∞—Ü–∏—è –¥–ª—è iPhone
```typescript
// –£—Å–ø–µ—Ö
if ('vibrate' in navigator) {
  navigator.vibrate(200);
}

// –û—à–∏–±–∫–∞
if ('vibrate' in navigator) {
  navigator.vibrate([100, 50, 100]); // –î–≤–æ–π–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è
}
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### –ü–µ—Ä–≤—ã–π —É—Å–ø–µ—à–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
```
ID: 2026-01-13T14-22-15-138Z_user-121
Timestamp: 2026-01-13T14:22:14.995Z
User: 121 (Sddd)
URL: https://ogfoody.ru/
Comment: "test"
Screenshot: null (fallback —Å—Ä–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
Telegram: ‚úÖ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
```

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –±–µ–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
- ‚úÖ Fallback –ø—Ä–∏ –æ—à–∏–±–∫–µ html2canvas
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- ‚úÖ UI —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ iPhone
- ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. `hooks/useDebugRecorder.tsx`:
   - –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è scale
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏
   - –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

2. `components/debug/DebugFloatingButton.tsx`:
   - Try-catch –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
   - UI —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö
   - –í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ

---

## üöÄ –î–µ–ø–ª–æ–π:

```bash
# –ö–æ–º–º–∏—Ç
git add -A
git commit -m "fix: —É–ª—É—á—à–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç–æ–≤ —Å iPhone"
git push origin main

# Production
ssh root@5.129.194.168
cd /var/www/ogfoody
git fetch origin
git reset --hard origin/main
npm run build
pm2 restart ogfoody
```

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** 14:23:09 UTC  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å iPhone:

1. –û—Ç–∫—Ä–æ–π https://ogfoody.ru –Ω–∞ iPhone
2. –ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É üêû –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
3. –ù–∞–ø–∏—à–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. –ù–∞–∂–º–∏ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç"
5. –ü–æ–ª—É—á–∏—à—å –≤–∏–±—Ä–∞—Ü–∏—é + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
6. –û—Ç—á–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ `/var/www/ogfoody/debug_reports/`
7. Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üéØ –ò—Ç–æ–≥:

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** –ë–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã —Å iPhone —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.  
–ï—Å–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –Ω–µ —É–¥–∞–µ—Ç—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å - –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏ (—á—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏).

