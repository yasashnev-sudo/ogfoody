# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `auto-deploy.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –ö–æ–º–º–∏—Ç–∏—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git
2. ‚úÖ –ü—É—à–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub (`origin/main`)
3. ‚úÖ –î–µ–ø–ª–æ–∏—Ç –∫–æ–¥ –Ω–∞ production —Å–µ—Ä–≤–µ—Ä
4. ‚úÖ –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥.

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
cd "/Users/sergejasasnev/Downloads/my-project (1)"
./auto-deploy.sh "–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
```

### –ü—Ä–∏–º–µ—Ä—ã

```bash
# –° –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
./auto-deploy.sh "fix: –æ—Ç–∫–ª—é—á–µ–Ω –≤–∏–¥–∂–µ—Ç YooKassa, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ redirect"

# –ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ)
./auto-deploy.sh
```

---

## üîß –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –∫–æ–º–º–∏—Ç–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª—è–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git add -A`

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞
- –°–æ–∑–¥–∞–µ—Ç –∫–æ–º–º–∏—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- –ï—Å–ª–∏ –∫–æ–º–º–∏—Ç –Ω–µ –Ω—É–∂–µ–Ω (–Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π), –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç

### –®–∞–≥ 4: –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ GitHub
- –ü—É—à–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `origin/main`
- –ï—Å–ª–∏ push –Ω–µ —É–¥–∞–ª—Å—è, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### –®–∞–≥ 5: –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH
- –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥: `git fetch origin` ‚Üí `git reset --hard origin/main`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install --production=false`
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `pm2 stop all`
- –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç: `npm run build`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `pm2 delete all` ‚Üí `pm2 start ecosystem.config.js`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh root@ogfoody.ru
cd /var/www/ogfoody
grep "shouldUseRedirect" components/payment-modal.tsx
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
const shouldUseRedirect = true
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ

1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5 –∏–ª–∏ Cmd+Shift+R)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `"shouldUseRedirect": true`
   - –í–∏–¥–∂–µ—Ç –ù–ï –¥–æ–ª–∂–µ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å redirect –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã YooKassa

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ PM2

```bash
ssh root@ogfoody.ru
pm2 status
pm2 logs ogfoody --lines 50
```

---

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∫—Ä–∏–ø—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
chmod +x auto-deploy.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ push –≤ GitHub

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é
- –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è push

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ GitHub
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –∫–æ–º–º–∏—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
- –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ —Å–∫—Ä–∏–ø—Ç–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞: `ping 5.129.194.168`

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–¥ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
   ```bash
   ssh root@ogfoody.ru
   cd /var/www/ogfoody
   git log --oneline -3
   ```
2. –ï—Å–ª–∏ –∫–æ–¥ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
   ```bash
   git fetch origin
   git reset --hard origin/main
   npm run build
   pm2 restart ogfoody
   ```

---

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–º–∏—Ç:** –°–∫—Ä–∏–ø—Ç –∫–æ–º–º–∏—Ç–∏—Ç –í–°–ï –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git add -A`)
2. **–ù–µ—Ç –æ—Ç–∫–∞—Ç–∞:** –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ–ª—å–∑—è –æ—Ç–∫–∞—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
4. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** –î–µ–ø–ª–æ–π –∑–∞–Ω–∏–º–∞–µ—Ç ~3-5 –º–∏–Ω—É—Ç

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `auto-deploy.sh` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
- `deploy-increment-fix.expect` - expect —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è
- `AGENT_DEPLOYMENT_GUIDE.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
