{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/components/order-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { useState, useEffect, useRef } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport {\n  Plus,\n  Minus,\n  Users,\n  Clock,\n  Eye,\n  Shuffle,\n  CreditCard,\n  Smartphone,\n  Loader2,\n  CheckCircle2,\n  Banknote,\n  ChevronRight,\n  ChevronDown,\n  Tag,\n  MapPin,\n  Phone,\n  Truck,\n  ChefHat,\n  Bell,\n  Sunrise,\n  Sun,\n  Moon,\n  Wand2,\n  ArrowDown,\n  ArrowRight,\n  Receipt,\n  Coins\n} from \"lucide-react\"\nimport { MealSelector } from \"@/components/meal-selector\"\nimport { ExtrasSelector } from \"@/components/extras-selector\"\n// Added new hooks and utils\nimport { useMenu } from \"@/hooks/use-menu\"\nimport { getWeekTypeForDate } from \"@/lib/menu-utils\"\nimport type {\n  Order,\n  Person,\n  DayMeals,\n  Extra,\n  BreakfastSelection,\n  FullMealSelection,\n  Meal,\n  PortionSize,\n  Garnish,\n} from \"@/lib/types\"\n// Added getMealPrice helper\nimport { getMealPrice } from \"@/lib/types\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { WarningDialog } from \"@/components/warning-dialog\"\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\"\nimport { format, addDays } from \"date-fns\"\nimport { ru } from \"date-fns/locale\"\n\ntype PaymentMethod = \"card\" | \"sbp\" | \"cash\"\n\ninterface OrderModalProps {\n  date: Date\n  existingOrder?: Order\n  onClose: () => void\n  onSave: (order: Order) => void\n  onCancel?: (order: Order) => void\n  allOrders: Order[]\n  onPaymentSuccess?: (order: Order) => void\n  userLoyaltyPoints?: number\n  isAuthenticated?: boolean\n  onRequestAuth?: (order: Order, total: number) => void\n  onRequestPayment?: (order: Order, total: number) => void\n  userAddress?: string\n  userCity?: string\n  open: boolean\n  isDataLoading?: boolean\n  userProfile?: any\n}\n\nconst formatDateKey = (date: Date): string => {\n  return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, \"0\")}-${date.getDate().toString().padStart(2, \"0\")}`\n}\n\nconst formatDisplayDate = (date: Date): string => {\n  const months = [\"—è–Ω–≤\", \"—Ñ–µ–≤\", \"–º–∞—Ä\", \"–∞–ø—Ä\", \"–º–∞—è\", \"–∏—é–Ω\", \"–∏—é–ª\", \"–∞–≤–≥\", \"—Å–µ–Ω\", \"–æ–∫—Ç\", \"–Ω–æ—è\", \"–¥–µ–∫\"]\n  return `${date.getDate()} ${months[date.getMonth()]}` // Using toLocaleDateString for consistency\n}\n\nconst formatFullDate = (date: Date): string => {\n  const days = [\"–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ\", \"–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫\", \"–≤—Ç–æ—Ä–Ω–∏–∫\", \"—Å—Ä–µ–¥–∞\", \"—á–µ—Ç–≤–µ—Ä–≥\", \"–ø—è—Ç–Ω–∏—Ü–∞\", \"—Å—É–±–±–æ—Ç–∞\"]\n  const months = [\n    \"—è–Ω–≤–∞—Ä—è\",\n    \"—Ñ–µ–≤—Ä–∞–ª—è\",\n    \"–º–∞—Ä—Ç–∞\",\n    \"–∞–ø—Ä–µ–ª—è\",\n    \"–º–∞—è\",\n    \"–∏—é–Ω—è\",\n    \"–∏—é–ª—è\",\n    \"–∞–≤–≥—É—Å—Ç–∞\",\n    \"—Å–µ–Ω—Ç—è–±—Ä—è\",\n    \"–æ–∫—Ç—è–±—Ä—è\",\n    \"–Ω–æ—è–±—Ä—è\",\n    \"–¥–µ–∫–∞–±—Ä—è\",\n  ]\n  return `${days[date.getDay()]}, ${date.getDate()} ${months[date.getMonth()]}` // Using toLocaleDateString for consistency\n}\n\nconst getDateObject = (date: string | Date): Date => {\n  if (date instanceof Date) return date\n  if (typeof date === \"string\" && date.includes(\"-\")) {\n    const [year, month, day] = date.split(\"-\").map(Number)\n    return new Date(year, month - 1, day)\n  }\n  return new Date(date)\n}\n\nconst createEmptyDayMeals = (): DayMeals => ({\n  breakfast: { dish: null },\n  lunch: { salad: null, soup: null, main: null },\n  dinner: { salad: null, soup: null, main: null },\n})\n\nconst ensureFullMealStructure = (meal: FullMealSelection | null | undefined): FullMealSelection => {\n  if (!meal) return { salad: null, soup: null, main: null }\n  return {\n    salad: meal.salad ?? null,\n    soup: meal.soup ?? null,\n    main: meal.main ?? null,\n  }\n}\n\nconst ensureBreakfastStructure = (breakfast: BreakfastSelection | null | undefined): BreakfastSelection => {\n  if (!breakfast) return { dish: null }\n  return { dish: breakfast.dish ?? null }\n}\n\nconst ensureDayMealsStructure = (day: DayMeals | null | undefined): DayMeals => {\n  if (!day) return createEmptyDayMeals()\n  return {\n    breakfast: ensureBreakfastStructure(day.breakfast),\n    lunch: ensureFullMealStructure(day.lunch),\n    dinner: ensureFullMealStructure(day.dinner),\n  }\n}\n\nexport function OrderModal({\n  date,\n  existingOrder,\n  onClose,\n  onSave,\n  onCancel,\n  allOrders,\n  onPaymentSuccess,\n  userLoyaltyPoints = 0,\n  isAuthenticated = false,\n  onRequestAuth,\n  onRequestPayment,\n  userAddress,\n  userCity,\n  open,\n  isDataLoading = false,\n  userProfile,\n}: OrderModalProps) {\n  // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 2026-01-11: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ props –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏\n  useEffect(() => {\n    if (open) {\n      console.log('ü™ü OrderModal –æ—Ç–∫—Ä—ã—Ç:', {\n        date: date.toISOString().split('T')[0],\n        existingOrderId: existingOrder?.id,\n        existingOrderDate: existingOrder?.startDate,\n      })\n    }\n  }, [open, date, existingOrder])\n  \n  const cityLower = (userCity || \"\").toLowerCase()\n  const isInDeliveryZone = cityLower.includes(\"—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥\") || cityLower.includes(\"—Å–ø–±\") || !userCity\n\n  const weekType = getWeekTypeForDate(date)\n  const { meals: menuData, extras: availableExtras, deliveryTimes: rawDeliveryTimes } = useMenu(weekType)\n  // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ deliveryTimes –≤—Å–µ–≥–¥–∞ –º–∞—Å—Å–∏–≤\n  const deliveryTimes = Array.isArray(rawDeliveryTimes) ? rawDeliveryTimes : []\n\n  const getInitialPersons = (): Person[] => {\n    return (\n      existingOrder?.persons?.map((p) => ({\n        id: p.id,\n        day1: ensureDayMealsStructure(p.day1),\n        day2: ensureDayMealsStructure(p.day2),\n      })) || [{ id: 1, day1: createEmptyDayMeals(), day2: createEmptyDayMeals() }]\n    )\n  }\n\n  const [persons, setPersons] = useState<Person[]>(getInitialPersons())\n  const [deliveryTime, setDeliveryTime] = useState(existingOrder?.deliveryTime || \"\")\n  const [extras, setExtras] = useState<Extra[]>(existingOrder?.extras || [])\n  const [confirmFillPersonId, setConfirmFillPersonId] = useState<number | null>(null)\n\n  // –û–±–Ω–æ–≤–ª—è–µ–º deliveryTime –∫–æ–≥–¥–∞ deliveryTimes –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è\n  useEffect(() => {\n    if (!existingOrder?.deliveryTime && deliveryTimes.length > 0 && !deliveryTime) {\n      setDeliveryTime(deliveryTimes[0])\n    }\n  }, [deliveryTimes.length, deliveryTimes.join(\",\"), existingOrder?.deliveryTime, deliveryTime])\n\n  const [isProcessingPayment, setIsProcessingPayment] = useState(false)\n  const [promoCode, setPromoCode] = useState(\"\")\n  const [appliedPromo, setAppliedPromo] = useState<{ code: string; discount: number } | null>(null)\n  const [showCancelConfirm, setShowCancelConfirm] = useState(false)\n  const [fillTimestamp, setFillTimestamp] = useState(0)\n  const [activeSectionId, setActiveSectionId] = useState<string | null>(null)\n  const [showFloatingButton, setShowFloatingButton] = useState(false)\n  \n  // Warning dialog state\n  const [warningDialog, setWarningDialog] = useState<{\n    open: boolean\n    title: string\n    description: string\n    variant?: \"warning\" | \"error\" | \"info\"\n  }>({\n    open: false,\n    title: \"\",\n    description: \"\",\n    variant: \"error\",\n  })\n\n  const scrollContainerRef = useRef<HTMLDivElement>(null)\n  const footerRef = useRef<HTMLDivElement>(null)\n\n  const { toast } = useToast()\n  \n  const showWarning = (title: string, description: string, variant: \"warning\" | \"error\" | \"info\" = \"error\") => {\n    setWarningDialog({\n      open: true,\n      title,\n      description,\n      variant,\n    })\n  }\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–±—Ä–∞—Ç—å –±–ª—é–¥–æ –≤ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∑–∞–∫–∞–∑–µ\n  const showBlockedWarning = () => {\n    if (isPaid) {\n      showWarning(\n        \"–ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω\",\n        \"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –±–ª—é–¥–∞, –Ω–æ –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Ö –∏–∑–º–µ–Ω—è—Ç—å.\",\n        \"info\"\n      )\n    } else if (isToday) {\n      showWarning(\n        \"–î–æ—Å—Ç–∞–≤–∫–∞ —Å–µ–≥–æ–¥–Ω—è\",\n        \"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –¥–µ–Ω—å –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –±–ª—é–¥–∞, –Ω–æ –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Ö –∏–∑–º–µ–Ω—è—Ç—å.\",\n        \"warning\"\n      )\n    } else if (isPastDate) {\n      showWarning(\n        \"–ü—Ä–æ—à–µ–¥—à–∞—è –¥–∞—Ç–∞\",\n        \"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –Ω–∞ –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –±–ª—é–¥–∞, –Ω–æ –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Ö –∏–∑–º–µ–Ω—è—Ç—å.\",\n        \"warning\"\n      )\n    }\n  }\n  \n  const closeWarning = () => {\n    setWarningDialog((prev) => ({ ...prev, open: false }))\n  }\n\n  const selectedDate = date // Use the date prop directly for formatting\n\n  useEffect(() => {\n    if (open) {\n      // Reset to initial values when modal opens with new date/order\n      const newPersons = existingOrder?.persons?.map((p) => ({\n        id: p.id,\n        day1: ensureDayMealsStructure(p.day1),\n        day2: ensureDayMealsStructure(p.day2),\n      })) || [{ id: 1, day1: createEmptyDayMeals(), day2: createEmptyDayMeals() }]\n\n      setPersons(newPersons)\n      setDeliveryTime(existingOrder?.deliveryTime || deliveryTimes[0] || \"\")\n      setExtras(existingOrder?.extras || [])\n      setPromoCode(\"\")\n      setAppliedPromo(null)\n      setConfirmFillPersonId(null)\n      setShowCancelConfirm(false)\n      setIsProcessingPayment(false)\n      \n      // Initial active section: null to avoid auto-scroll on open\n      setActiveSectionId(null)\n      setShowFloatingButton(false)\n    }\n  }, [open, date.getTime(), existingOrder?.id, deliveryTimes.length, deliveryTimes.join(\",\")])\n\n  const dateKey = formatDateKey(date)\n\n  const hasAnyMeal = persons.some((person) => {\n    return [\"day1\", \"day2\"].some((day) => {\n      const d = person[day as \"day1\" | \"day2\"]\n      if (!d) return false\n      const breakfast = ensureBreakfastStructure(d.breakfast)\n      const lunch = ensureFullMealStructure(d.lunch)\n      const dinner = ensureFullMealStructure(d.dinner)\n      return breakfast.dish || lunch.salad || lunch.soup || lunch.main || dinner.salad || dinner.soup || dinner.main\n    })\n  })\n\n  const hasContent = hasAnyMeal || extras.length > 0\n\n  // Track scroll to hide/show floating button\n  useEffect(() => {\n    const container = scrollContainerRef.current\n    if (!container || !open) return\n\n    const handleScroll = () => {\n      if (!hasContent) {\n        setShowFloatingButton(false)\n        return\n      }\n\n      const footer = footerRef.current\n      if (footer) {\n        const footerRect = footer.getBoundingClientRect()\n        const containerRect = container.getBoundingClientRect()\n        \n        // Hide if footer is visible in the viewport of the container\n        const isFooterVisible = footerRect.top < containerRect.bottom - 20\n        setShowFloatingButton(!isFooterVisible)\n      } else {\n        setShowFloatingButton(true)\n      }\n    }\n\n    container.addEventListener(\"scroll\", handleScroll)\n    // Initial check\n    setTimeout(handleScroll, 100)\n    \n    return () => container.removeEventListener(\"scroll\", handleScroll)\n  }, [open, hasContent, persons, extras])\n\n\n  const calculateTotal = () => {\n    let total = 0\n    persons.forEach((person) => {\n      ;[\"day1\", \"day2\"].forEach((day) => {\n        const d = person[day as \"day1\" | \"day2\"]\n        if (!d) return\n\n        const breakfast = ensureBreakfastStructure(d.breakfast)\n        const lunch = ensureFullMealStructure(d.lunch)\n        const dinner = ensureFullMealStructure(d.dinner)\n\n        if (breakfast.dish) {\n          total += getMealPrice(breakfast.dish, breakfast.dish.portion)\n        }\n        if (lunch.salad) total += getMealPrice(lunch.salad, lunch.salad.portion)\n        if (lunch.soup) total += getMealPrice(lunch.soup, lunch.soup.portion)\n        if (lunch.main) {\n          total += getMealPrice(lunch.main, lunch.main.portion)\n          if (lunch.main.garnish) total += getMealPrice(lunch.main.garnish, lunch.main.garnish.portion)\n        }\n        if (dinner.salad) total += getMealPrice(dinner.salad, dinner.salad.portion)\n        if (dinner.soup) total += getMealPrice(dinner.soup, dinner.soup.portion)\n        if (dinner.main) {\n          total += getMealPrice(dinner.main, dinner.main.portion)\n          if (dinner.main.garnish) total += getMealPrice(dinner.main.garnish, dinner.main.garnish.portion)\n        }\n      })\n    })\n    extras.forEach((extra) => {\n      total += extra.price * extra.quantity\n    })\n    return total\n  }\n\n  const totalBeforeDiscount = calculateTotal()\n  const maxPointsDiscount = Math.min(userLoyaltyPoints, Math.floor(totalBeforeDiscount * 0.5))\n  const pointsDiscount = 0 // ‚úÖ –ë–∞–ª–ª—ã —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –≤ PaymentModal\n  const finalTotal = Math.max(0, totalBeforeDiscount - pointsDiscount - (appliedPromo?.discount || 0))\n\n  const handlePayAndOrder = async () => {\n    if (!hasContent) {\n      return\n    }\n\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑\n    if (!canEdit && existingOrder) {\n      showBlockedWarning()\n      return\n    }\n\n    if (!isAuthenticated) {\n      if (onRequestAuth) {\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º existingOrder –¥–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞!\n        // existingOrder –º–æ–∂–µ—Ç –±—ã—Ç—å \"—Å—Ç–∞—Ä—ã–º\" –∏–∑-–∑–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è props\n        const order: Order = {\n          startDate: formatDateKey(date),\n          persons,\n          delivered: false,\n          deliveryTime,\n          extras,\n          subtotal: totalBeforeDiscount,\n          total: finalTotal,\n          paid: false,\n          cancelled: false,\n        }\n        console.log('üîç [OrderModal] –í—ã–∑—ã–≤–∞–µ–º onRequestAuth —Å order:', {\n          subtotal: order.subtotal,\n          total: order.total,\n          personsCount: order.persons?.length,\n          // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 2026-01-11: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ persons\n          persons: order.persons?.map(p => ({\n            id: p.id,\n            hasDay1: !!p.day1,\n            hasDay2: !!p.day2,\n            day1Meals: p.day1 ? {\n              hasBreakfast: !!p.day1.breakfast?.dish,\n              hasLunch: !!(p.day1.lunch?.salad || p.day1.lunch?.soup || p.day1.lunch?.main),\n              hasDinner: !!(p.day1.dinner?.salad || p.day1.dinner?.soup || p.day1.dinner?.main),\n            } : null,\n            day2Meals: p.day2 ? {\n              hasBreakfast: !!p.day2.breakfast?.dish,\n              hasLunch: !!(p.day2.lunch?.salad || p.day2.lunch?.soup || p.day2.lunch?.main),\n              hasDinner: !!(p.day2.dinner?.salad || p.day2.dinner?.soup || p.day2.dinner?.main),\n            } : null\n          }))\n        })\n        onRequestAuth(order, finalTotal)\n      }\n      return\n    }\n\n    if (!isInDeliveryZone) {\n      toast({\n        title: \"–î–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞\",\n        description: \"–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –º—ã –ø–æ–∫–∞ –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ–º –≤ –≤–∞—à —Ä–∞–π–æ–Ω. –î–æ—Å—Ç—É–ø–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—É.\",\n        variant: \"destructive\",\n      })\n      return\n    }\n\n    // ‚úÖ –î–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ ‚Üí –≤—ã–∑—ã–≤–∞–µ–º onRequestAuth –∏–ª–∏ onRequestPayment\n    if (!existingOrder) {\n      const order: Order = {\n        startDate: formatDateKey(date), // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –∏—Å–ø–æ–ª—å–∑—É–µ–º date –Ω–∞–ø—Ä—è–º—É—é\n        persons,\n        delivered: false,\n        deliveryTime,\n        extras,\n        subtotal: totalBeforeDiscount,\n        total: finalTotal,\n        paid: false,\n        cancelled: false,\n      }\n      \n      // onRequestAuth –≤–Ω—É—Ç—Ä–∏ app/page.tsx —Å–∞–º —Ä–∞–∑–±–µ—Ä–µ—Ç—Å—è:\n      // - –ø—Ä–æ–≤–µ—Ä–∏—Ç –ø—Ä–æ—Ñ–∏–ª—å\n      // - –æ—Ç–∫—Ä–æ–µ—Ç ProfileModal –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n      // - –∏–ª–∏ –æ—Ç–∫—Ä–æ–µ—Ç PaymentModal –µ—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª–Ω—ã–π\n      if (onRequestAuth) {\n        onRequestAuth(order, finalTotal)\n      } else if (onRequestPayment) {\n        // –ï—Å–ª–∏ onRequestAuth –Ω–µ—Ç, –ø—ã—Ç–∞–µ–º—Å—è –≤—ã–∑–≤–∞—Ç—å onRequestPayment\n        onRequestPayment(order, finalTotal)\n      }\n      return\n    }\n\n    // ‚úÖ –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è\n    setIsProcessingPayment(true)\n\n    const order: Order = {\n      ...(existingOrder?.id ? { id: existingOrder.id } : {}),\n      ...(existingOrder?.orderNumber ? { orderNumber: existingOrder.orderNumber } : {}),\n      startDate: formatDateKey(date), // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –∏—Å–ø–æ–ª—å–∑—É–µ–º date –Ω–∞–ø—Ä—è–º—É—é\n      persons,\n      delivered: existingOrder?.delivered ?? false,\n      deliveryTime,\n      extras,\n      subtotal: totalBeforeDiscount,\n      total: finalTotal,\n      paid: existingOrder?.paid ?? false,\n      cancelled: existingOrder?.cancelled ?? false,\n      promoCode: appliedPromo?.code,\n      promoDiscount: appliedPromo?.discount,\n      loyaltyPointsUsed: pointsDiscount > 0 ? pointsDiscount : undefined,\n    }\n\n    onSave(order)\n\n    if (onPaymentSuccess) {\n      onPaymentSuccess(order)\n    }\n\n    setIsProcessingPayment(false)\n  }\n\n  const addPerson = () => {\n    const newId = persons.length + 1\n    const newPerson: Person = {\n      id: newId,\n      day1: createEmptyDayMeals(),\n      day2: createEmptyDayMeals(),\n    }\n    setPersons([...persons, newPerson])\n    // Auto-scroll to the new person's first meal\n    setActiveSectionId(`section-breakfast-${newId}-1-daily-day1-breakfast`)\n  }\n\n  const removePerson = (personId: number) => {\n    if (persons.length > 1) {\n      setPersons(persons.filter((p) => p.id !== personId))\n    }\n  }\n\n  const updateBreakfast = (personId: number, day: \"day1\" | \"day2\", breakfast: BreakfastSelection) => {\n    setPersons(persons.map((p) => (p.id === personId ? { ...p, [day]: { ...p[day], breakfast } } : p)))\n  }\n\n  const updateLunch = (personId: number, day: \"day1\" | \"day2\", lunch: FullMealSelection) => {\n    setPersons(persons.map((p) => (p.id === personId ? { ...p, [day]: { ...p[day], lunch } } : p)))\n  }\n\n  const updateDinner = (personId: number, day: \"day1\" | \"day2\", dinner: FullMealSelection) => {\n    setPersons(persons.map((p) => (p.id === personId ? { ...p, [day]: { ...p[day], dinner } } : p)))\n  }\n\n  const handleCancelClick = () => {\n    setShowCancelConfirm(true)\n  }\n\n  const handleConfirmCancel = () => {\n    if (existingOrder && onCancel) {\n      onCancel(existingOrder)\n      setShowCancelConfirm(false)\n      onClose()\n      // Warning dialog will be shown by handleCancelOrder in parent component\n    }\n  }\n\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n\n  const orderStartDate = existingOrder ? getDateObject(existingOrder.startDate) : null\n  if (orderStartDate) {\n    orderStartDate.setHours(0, 0, 0, 0)\n  }\n\n  // –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑, –µ—Å–ª–∏:\n  // 1. –ó–∞–∫–∞–∑ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç\n  // 2. –î–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ >= —Å–µ–≥–æ–¥–Ω—è (–≤–∫–ª—é—á–∞—è —Å–µ–≥–æ–¥–Ω—è)\n  const canCancel = !!(\n    existingOrder &&\n    orderStartDate &&\n    orderStartDate.getTime() >= today.getTime()\n  )\n\n  // –†–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–ª—è –ø—Ä–æ—à–µ–¥—à–∏—Ö –¥–∞—Ç –∏ –¥–Ω—è –¥–æ—Å—Ç–∞–≤–∫–∏\n  const selectedDateNormalized = new Date(date)\n  selectedDateNormalized.setHours(0, 0, 0, 0)\n  \n  // –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–∫–∞–∑–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞—Ç—É –Ω–∞—á–∞–ª–∞ –∑–∞–∫–∞–∑–∞ (startDate)\n  // –î–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É (date)\n  const orderDate = existingOrder?.startDate \n    ? getDateObject(existingOrder.startDate)\n    : selectedDateNormalized\n  orderDate.setHours(0, 0, 0, 0)\n  \n  // –ë–ª–æ–∫–∏—Ä—É–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –ø—Ä–æ—à–µ–¥—à–∏–µ –¥–∞—Ç—ã –∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å\n  const isPastDate = orderDate < today\n  const isToday = orderDate.getTime() === today.getTime()\n  const isViewOnly = isPastDate || isToday\n\n  // –ë–ª–æ–∫–∏—Ä—É–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –í–°–ï–• –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã\n  const isPaid = existingOrder?.paid === true || existingOrder?.paymentStatus === \"paid\"\n  const isPaidWithCard = isPaid && existingOrder?.paymentMethod !== \"cash\"\n  const canEdit = !isViewOnly && !isPaid\n  const isExistingOrder = !!existingOrder\n\n  const fillRandomMeals = (personId: number) => {\n    const getRandom = <T,>(arr: T[]): T | null => {\n      // –ë–ª—é–¥–∞ —É–∂–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã –ø–æ –Ω–µ–¥–µ–ª–µ –≤ API, –ø—Ä–æ—Å—Ç–æ –±–µ—Ä–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ\n      return arr.length > 0 ? arr[Math.floor(Math.random() * arr.length)] : null\n    }\n\n    const createMeal = (d: Meal | null): Meal | null => {\n      if (!d) return null\n      // –ì–∞—Ä–Ω–∏—Ä—ã —É–∂–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã –ø–æ –Ω–µ–¥–µ–ª–µ –≤ API\n      const garnishes = menuData.garnish || []\n      const selectedGarnish = garnishes.length > 0 ? garnishes[Math.floor(Math.random() * garnishes.length)] : null\n\n      const garnish: Garnish | null =\n        d.needsGarnish && selectedGarnish\n          ? {\n              id: selectedGarnish.id,\n              name: selectedGarnish.name,\n              prices: selectedGarnish.prices,\n              weights: selectedGarnish.weights,\n              portion: \"single\" as PortionSize,\n              image: selectedGarnish.image,\n              ingredients: selectedGarnish.ingredients,\n            }\n          : null\n\n      return {\n        ...d,\n        portion: \"single\" as PortionSize,\n        garnish,\n      }\n    }\n\n    setPersons((prevPersons) => {\n      return prevPersons.map((p) => {\n        if (p.id !== personId) return p\n\n        const newDay1Meals: DayMeals = {\n          breakfast: { dish: createMeal(getRandom(menuData.breakfast || [])) },\n          lunch: {\n            salad: null,\n            soup: createMeal(getRandom(menuData.lunch_soup || [])),\n            main: createMeal(getRandom(menuData.lunch_main || [])),\n          },\n          dinner: {\n            salad: null,\n            soup: null,\n            main: createMeal(getRandom(menuData.dinner_main || [])),\n          },\n        }\n\n        const newDay2Meals: DayMeals = {\n          breakfast: { dish: createMeal(getRandom(menuData.breakfast || [])) },\n          lunch: {\n            salad: null,\n            soup: createMeal(getRandom(menuData.lunch_soup || [])),\n            main: createMeal(getRandom(menuData.lunch_main || [])),\n          },\n          dinner: {\n            salad: null,\n            soup: null,\n            main: createMeal(getRandom(menuData.dinner_main || [])),\n          },\n        }\n\n        return {\n          ...p,\n          day1: newDay1Meals,\n          day2: newDay2Meals,\n        }\n      })\n    })\n    \n    setFillTimestamp(Date.now())\n  }\n\n  const personHasMeals = (personId: number): boolean => {\n    const person = persons.find((p) => p.id === personId)\n    if (!person) return false\n\n    return [\"day1\", \"day2\"].some((day) => {\n      const d = person[day as \"day1\" | \"day2\"]\n      if (!d) return false\n      const breakfast = ensureBreakfastStructure(d.breakfast)\n      const lunch = ensureFullMealStructure(d.lunch)\n      const dinner = ensureFullMealStructure(d.dinner)\n      return breakfast.dish || lunch.salad || lunch.soup || lunch.main || dinner.salad || dinner.soup || dinner.main\n    })\n  }\n\n  const handleFillClick = (personId: number) => {\n    // console.log(\"[v0] handleFillClick called\", { personId, hasMeals: personHasMeals(personId) })\n    if (personHasMeals(personId)) {\n      setConfirmFillPersonId(personId)\n    } else {\n      fillRandomMeals(personId)\n    }\n  }\n\n  const confirmFill = () => {\n    // console.log(\"[v0] confirmFill called\", { confirmFillPersonId })\n    if (confirmFillPersonId !== null) {\n      const idToFill = confirmFillPersonId\n      // console.log(\"[v0] About to fill random meals for person\", idToFill)\n      setConfirmFillPersonId(null)\n      fillRandomMeals(idToFill)\n      // console.log(\"[v0] fillRandomMeals called\")\n    }\n  }\n\n  const handleApplyPromo = () => {\n    if (!promoCode.trim()) {\n      showWarning(\n        \"–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥\",\n        \"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–∫–∏–¥–∫–∏.\",\n        \"error\"\n      )\n      return\n    }\n\n    const code = promoCode.toUpperCase()\n    let discount = 0\n\n    if (code === \"WELCOME10\") {\n      discount = 0.1\n    } else if (code === \"SALE20\") {\n      discount = 0.2\n    } else if (code === \"FREE100\") {\n      discount = 100\n    }\n\n    if (discount > 0) {\n      const calculatedDiscount =\n        typeof discount === \"number\" && discount < 1 ? Math.floor(totalBeforeDiscount * discount) : discount\n\n      setAppliedPromo({ code: promoCode, discount: calculatedDiscount })\n      // Removed promoError state\n\n      showWarning(\n        \"–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω!\",\n        discount < 1\n          ? `–°–∫–∏–¥–∫–∞ ${discount * 100}% (${calculatedDiscount} ‚ÇΩ) –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –≤–∞—à–µ–º—É –∑–∞–∫–∞–∑—É.`\n          : `–°–∫–∏–¥–∫–∞ ${calculatedDiscount} ‚ÇΩ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –≤–∞—à–µ–º—É –∑–∞–∫–∞–∑—É.`,\n        \"info\"\n      )\n    } else {\n      setAppliedPromo(null)\n      // Removed promoError state\n      showWarning(\n        \"–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥\",\n        \"–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —ç—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –∏—Å—Ç–µ–∫.\",\n        \"error\"\n      )\n    }\n  }\n\n  // --- Next Step Logic ---\n  const getNextSectionInfo = (): { id: string, name: string } | null => {\n    // Logic to find next missing step, starting from activeSectionId (if any) or from beginning\n    \n    // Build sequence dynamically checking needsGarnish\n    const sequence: { id: string, name: string, isComplete: () => boolean }[] = []\n    \n    persons.forEach(p => {\n        const days = [1, 2]\n        days.forEach(day => {\n            const d = day === 1 ? p.day1 : p.day2\n            if (!d) return\n\n            const instance = `day${day}`\n            const prefix = `section`\n            \n            // Helper to add\n            const add = (type: string, name: string, instanceSuffix: string, check: () => boolean) => {\n                sequence.push({\n                    id: `section-${type}-${p.id}-${day}-daily-${instanceSuffix}`,\n                    name: name,\n                    isComplete: check\n                })\n            }\n            \n            // Breakfast\n            add('breakfast', '–ó–∞–≤—Ç—Ä–∞–∫', `${instance}-breakfast`, () => !!d.breakfast?.dish)\n            \n            // Lunch\n            add('salad', '–û–±–µ–¥: –°–∞–ª–∞—Ç', `${instance}-lunch`, () => !!d.lunch?.salad)\n            add('soup', '–û–±–µ–¥: –°—É–ø', `${instance}-lunch`, () => !!d.lunch?.soup)\n            add('main', '–û–±–µ–¥: –ì–æ—Ä—è—á–µ–µ', `${instance}-lunch`, () => !!d.lunch?.main)\n            \n            if (d.lunch?.main?.needsGarnish) {\n               add('garnish', '–û–±–µ–¥: –ì–∞—Ä–Ω–∏—Ä', `${instance}-lunch`, () => !!d.lunch?.main?.garnish)\n            }\n            \n            // Dinner\n            add('salad', '–£–∂–∏–Ω: –°–∞–ª–∞—Ç', `${instance}-dinner`, () => !!d.dinner?.salad)\n            add('soup', '–£–∂–∏–Ω: –°—É–ø', `${instance}-dinner`, () => !!d.dinner?.soup)\n            add('main', '–£–∂–∏–Ω: –ì–æ—Ä—è—á–µ–µ', `${instance}-dinner`, () => !!d.dinner?.main)\n            \n            if (d.dinner?.main?.needsGarnish) {\n               add('garnish', '–£–∂–∏–Ω: –ì–∞—Ä–Ω–∏—Ä', `${instance}-dinner`, () => !!d.dinner?.main?.garnish)\n            }\n        })\n    })\n    \n    if (activeSectionId) {\n        // If section is open, Next is simply the next in sequence\n        const currentIndex = sequence.findIndex(s => s.id === activeSectionId)\n        if (currentIndex >= 0 && currentIndex < sequence.length - 1) {\n            return sequence[currentIndex + 1]\n        }\n    } else {\n        // If nothing open (auto-collapsed), find first incomplete\n        const firstIncomplete = sequence.find(s => !s.isComplete())\n        if (firstIncomplete) return firstIncomplete\n    }\n    \n    return null\n  }\n\n  const nextStep = getNextSectionInfo()\n\n  const scrollToCheckout = () => {\n    const footer = footerRef.current\n    if (footer) {\n      footer.scrollIntoView({ behavior: \"smooth\", block: \"end\" })\n    }\n  }\n\n  const handleMealSelected = () => {\n      // Called when a meal is selected in MealSelector\n      // We want to auto-advance to next section\n      // If we are currently in activeSectionId, we find next and open it.\n      // If activeSectionId is already null (race condition?), we use getNextSectionInfo fallback logic.\n      \n      // We need to re-calculate sequence because \"needsGarnish\" might have changed just now!\n      // Fortunately getNextSectionInfo recalculates it.\n      \n      // Wait for state update? \n      // setPersons triggers re-render. onMealSelected is called after setPersons dispatch.\n      // But state might not be updated in this closure yet?\n      // Actually, onUpdate in MealSelector updates parent state.\n      // Then MealSelector calls onMealSelected.\n      // Since setState is async, 'persons' here might be old.\n      // This is a problem for \"needsGarnish\" check if it depends on new Main.\n      \n      // However, if we just selected Main, 'persons' is old.\n      // If we blindly go to next in sequence based on old data, we might miss Garnish or skip it.\n      \n      // Solution: Delay the advance slightly to allow state update?\n      // Or rely on the fact that if we select Main, we usually stay on Main if needsGarnish (handled in MealSelector).\n      // If !needsGarnish, we call onMealSelected.\n      // So we assume we can proceed to Next.\n      // The Next logic should work.\n      \n      // Just set timeout to let state settle?\n      // No auto-advance to keep the scroll position stable\n      // User can manually scroll or click next\n  }\n\n  return (\n    <>\n      <Dialog open={open} onOpenChange={(isOpen) => !isOpen && onClose()}>\n        <DialogContent \n          onOpenAutoFocus={(e) => e.preventDefault()}\n          onCloseAutoFocus={(e) => e.preventDefault()}\n          className=\"max-w-2xl max-h-[95vh] overflow-hidden flex flex-col p-0 border-0 shadow-2xl\"\n          id=\"order-modal-content\"\n        >\n          <div className=\"relative flex flex-col flex-1 overflow-hidden\">\n            <DialogHeader className=\"p-4 pb-2\">\n              <div className=\"flex flex-col gap-2\">\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <DialogTitle className=\"text-2xl font-bold\">\n                    –ó–∞–∫–∞–∑ –Ω–∞ {date.toLocaleDateString(\"ru-RU\", { day: \"numeric\", month: \"short\" })}\n                  </DialogTitle>\n                  {existingOrder && !canEdit && (\n                    <div className=\"px-2 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground flex items-center gap-1\">\n                      <Eye className=\"w-3 h-3\" />\n                      {isToday ? \"—Å–µ–≥–æ–¥–Ω—è –¥–æ—Å—Ç–∞–≤–∫–∞\" : isPastDate ? \"–ø—Ä–æ—Å–º–æ—Ç—Ä\" : \"–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ\"}\n                    </div>\n                  )}\n                  {existingOrder && isPaid && (\n                    <div className=\"px-2 py-0.5 rounded-full text-xs font-medium bg-green-500/10 text-green-600 flex items-center gap-1\">\n                      <CheckCircle2 className=\"w-3 h-3\" />\n                      –æ–ø–ª–∞—á–µ–Ω\n                    </div>\n                  )}\n                </div>\n                <DialogDescription className=\"text-sm text-muted-foreground\">–ù–∞–±–æ—Ä –Ω–∞ 2 –¥–Ω—è</DialogDescription>\n              </div>\n            </DialogHeader>\n\n            <div \n              ref={scrollContainerRef}\n              className=\"flex-1 overflow-y-auto\"\n              style={{ scrollBehavior: 'auto' }}\n            >\n              <div className=\"px-1.5 py-1.5 sm:p-4 pb-20\">\n                {!isInDeliveryZone && userCity && (\n                  <div className=\"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n                    <div className=\"flex items-start gap-3\">\n                      <MapPin className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <p className=\"font-medium text-red-700 dark:text-red-400\">–î–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</p>\n                        <p className=\"text-sm text-red-600 dark:text-red-400/80\">\n                          –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –º—ã –¥–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—É. –ò–∑–º–µ–Ω–∏—Ç–µ –∞–¥—Ä–µ—Å –≤ –ø—Ä–æ—Ñ–∏–ª–µ.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {isPaid && (\n                  <div className=\"mb-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg\">\n                    <p className=\"text-sm text-green-700 dark:text-green-400 font-medium flex items-center gap-2\">\n                      <CheckCircle2 className=\"w-4 h-4\" />\n                      –ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω\n                    </p>\n                    <p className=\"text-xs text-green-600 dark:text-green-400/80 mt-1\">\n                      –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ\n                    </p>\n                  </div>\n                )}\n                \n                {!isPaid && isToday && existingOrder && (\n                  <div className=\"mb-4 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg\">\n                    <p className=\"text-sm text-orange-700 dark:text-orange-400 font-medium flex items-center gap-2\">\n                      <Clock className=\"w-4 h-4\" />\n                      –î–æ—Å—Ç–∞–≤–∫–∞ —Å–µ–≥–æ–¥–Ω—è\n                    </p>\n                    <p className=\"text-xs text-orange-600 dark:text-orange-400/80 mt-1\">\n                      –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –¥–µ–Ω—å –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ\n                    </p>\n                  </div>\n                )}\n                \n                {!isPaid && isPastDate && existingOrder && (\n                  <div className=\"mb-4 p-3 bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-800 rounded-lg\">\n                    <p className=\"text-sm text-gray-700 dark:text-gray-400 font-medium flex items-center gap-2\">\n                      <Eye className=\"w-4 h-4\" />\n                      –ü—Ä–æ—à–µ–¥—à–∞—è –¥–∞—Ç–∞\n                    </p>\n                    <p className=\"text-xs text-gray-600 dark:text-gray-400/80 mt-1\">\n                      –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –Ω–∞ –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ\n                    </p>\n                  </div>\n                )}\n\n                {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ */}\n                {existingOrder && (existingOrder.paid || existingOrder.total !== undefined) && (\n                  <div className=\"mb-4 p-4 bg-purple-50 dark:bg-purple-900/20 border-2 border-purple-200 dark:border-purple-800 rounded-lg shadow-sm\">\n                    <h3 className=\"font-bold text-purple-900 dark:text-purple-300 mb-3 flex items-center gap-2\">\n                      <Receipt className=\"w-5 h-5\" />\n                      –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ\n                    </h3>\n                    <div className=\"space-y-2 text-sm\">\n                      {existingOrder.subtotal !== undefined && (\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-purple-700 dark:text-purple-400\">–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞:</span>\n                          <span className=\"font-bold text-purple-900 dark:text-purple-300\">\n                            {existingOrder.subtotal.toLocaleString()} ‚ÇΩ\n                          </span>\n                        </div>\n                      )}\n                      \n                      {existingOrder.deliveryFee !== undefined && existingOrder.deliveryFee !== null && (\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-orange-700 dark:text-orange-400 flex items-center gap-1\">\n                            <Truck className=\"w-4 h-4\" />\n                            –î–æ—Å—Ç–∞–≤–∫–∞:\n                          </span>\n                          <span className=\"font-bold text-orange-700 dark:text-orange-400\">\n                            {existingOrder.deliveryFee > 0 ? `+${existingOrder.deliveryFee.toLocaleString()} ‚ÇΩ` : '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ'}\n                          </span>\n                        </div>\n                      )}\n                      \n                      {existingOrder.loyaltyPointsUsed !== undefined && existingOrder.loyaltyPointsUsed > 0 && (\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-purple-700 dark:text-purple-400\">–°–ø–∏—Å–∞–Ω–æ –±–∞–ª–ª–æ–≤:</span>\n                          <span className=\"font-bold text-purple-700 dark:text-purple-400\">\n                            -{existingOrder.loyaltyPointsUsed} ‚ÇΩ\n                          </span>\n                        </div>\n                      )}\n                      \n                      {existingOrder.total !== undefined && (\n                        <div className=\"flex items-center justify-between pt-2 border-t border-purple-200 dark:border-purple-800\">\n                          <span className=\"font-bold text-purple-900 dark:text-purple-300\">–ò–¢–û–ì–û:</span>\n                          <span className=\"font-black text-xl text-purple-900 dark:text-purple-300\">\n                            {existingOrder.total.toLocaleString()} ‚ÇΩ\n                          </span>\n                        </div>\n                      )}\n                      \n                      {existingOrder.loyaltyPointsEarned !== undefined && existingOrder.loyaltyPointsEarned > 0 && (\n                        <div className=\"flex items-center justify-between pt-2 bg-purple-100 dark:bg-purple-900/30 -mx-4 -mb-4 px-4 py-2 rounded-b-lg mt-2\">\n                          <span className=\"text-purple-700 dark:text-purple-400 flex items-center gap-1\">\n                            <Coins className=\"w-4 h-4\" />\n                            –ù–∞—á–∏—Å–ª–µ–Ω–æ –±–∞–ª–ª–æ–≤:\n                          </span>\n                          <span className=\"font-black text-purple-900 dark:text-purple-300\">\n                            +{existingOrder.loyaltyPointsEarned}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {persons.map((person, index) => {\n                  const personLabel = persons.length > 1 ? ` ‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞ ${index + 1}` : \"\"\n                  const day1Prefix = `–î–µ–Ω—å 1${personLabel}`\n                  const day2Prefix = `–î–µ–Ω—å 2${personLabel}`\n\n                  return (\n                  <div key={person.id} className=\"mb-6 pb-6 border-b border-border last:border-0\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"w-5 h-5 text-primary\" />\n                        <h3 className=\"font-semibold\">–ü–µ—Ä—Å–æ–Ω–∞ {index + 1}</h3>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        {canEdit && (\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleFillClick(person.id)}\n                            className=\"h-8 text-xs bg-transparent\"\n                            title=\"–í—ã–±—Ä–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\"\n                          >\n                            <Wand2 className=\"w-3 h-3 mr-2\" />\n                            –í—ã–±—Ä–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\n                          </Button>\n                        )}\n                        {canEdit && persons.length > 1 && (\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => removePerson(person.id)}\n                            className=\"h-8 w-8\"\n                            title=\"–£–¥–∞–ª–∏—Ç—å –ø–µ—Ä—Å–æ–Ω—É\"\n                          >\n                            <Minus className=\"w-4 h-4\" />\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* –î–µ–Ω—å 1 */}\n                    <div className=\"mb-8\">\n                      <h4 className=\"text-lg font-bold mb-4 flex items-center gap-2 text-foreground/90\">\n                        <span className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary text-sm font-bold\">\n                          1\n                        </span>\n                        –î–µ–Ω—å 1\n                      </h4>\n                      <div className=\"space-y-6 pl-0 md:pl-4\">\n                        <div>\n                          <div className=\"flex items-center gap-2 mb-3 text-primary font-medium text-sm uppercase tracking-wide\">\n                            <Sunrise className=\"w-4 h-4\" /> –ó–∞–≤—Ç—Ä–∞–∫\n                          </div>\n                        <MealSelector\n                          key={`day1-breakfast-${person.id}-${fillTimestamp}`}\n                          headerPrefix={day1Prefix}\n                          disabled={!canEdit}\n                          onBlockedAction={showBlockedWarning}\n                          personNumber={index + 1}\n                          dayNumber={1}\n                            mealsData={{ breakfast: menuData.breakfast }}\n                            selectedMeals={{ breakfast: person.day1?.breakfast?.dish }}\n                            onUpdate={(selection) =>\n                              updateBreakfast(person.id, \"day1\", { dish: selection.breakfast || null })\n                            }\n                            activeSectionId={activeSectionId}\n                            onSectionChange={setActiveSectionId}\n                            instanceId=\"day1-breakfast\"\n                            onMealSelected={handleMealSelected}\n                          />\n                        </div>\n\n                        <div>\n                          <div className=\"flex items-center gap-2 mb-3 text-primary font-medium text-sm uppercase tracking-wide\">\n                            <Sun className=\"w-4 h-4\" /> –û–±–µ–¥\n                          </div>\n                          <MealSelector\n                            key={`day1-lunch-${person.id}-${fillTimestamp}`}\n                            personNumber={index + 1}\n                            disabled={!canEdit}\n                            onBlockedAction={showBlockedWarning}\n                            dayNumber={1}\n                            mealsData={{\n                              salad: menuData.lunch_salad,\n                              soup: menuData.lunch_soup,\n                              main: menuData.lunch_main,\n                              garnish: menuData.garnish,\n                            }}\n                            selectedMeals={{\n                              salad: person.day1?.lunch?.salad,\n                              soup: person.day1?.lunch?.soup,\n                              main: person.day1?.lunch?.main,\n                            }}\n                            onUpdate={(selection) =>\n                              updateLunch(person.id, \"day1\", {\n                                salad: selection.salad || null,\n                                soup: selection.soup || null,\n                                main: selection.main || null,\n                              })\n                            }\n                            headerPrefix={`${day1Prefix} ‚Ä¢ –û–±–µ–¥`}\n                            activeSectionId={activeSectionId}\n                            onSectionChange={setActiveSectionId}\n                            instanceId=\"day1-lunch\"\n                            onMealSelected={handleMealSelected}\n                          />\n                        </div>\n\n                        <div>\n                          <div className=\"flex items-center gap-2 mb-3 text-primary font-medium text-sm uppercase tracking-wide\">\n                            <Moon className=\"w-4 h-4\" /> –£–∂–∏–Ω\n                          </div>\n                          <MealSelector\n                            key={`day1-dinner-${person.id}-${fillTimestamp}`}\n                            personNumber={index + 1}\n                            disabled={!canEdit}\n                            onBlockedAction={showBlockedWarning}\n                            dayNumber={1}\n                            mealsData={{\n                              salad: menuData.dinner_salad,\n                              soup: menuData.dinner_soup,\n                              main: menuData.dinner_main,\n                              garnish: menuData.garnish,\n                            }}\n                            selectedMeals={{\n                              salad: person.day1?.dinner?.salad,\n                              soup: person.day1?.dinner?.soup,\n                              main: person.day1?.dinner?.main,\n                            }}\n                            onUpdate={(selection) =>\n                              updateDinner(person.id, \"day1\", {\n                                salad: selection.salad || null,\n                                soup: selection.soup || null,\n                                main: selection.main || null,\n                              })\n                            }\n                            headerPrefix={`${day1Prefix} ‚Ä¢ –£–∂–∏–Ω`}\n                            activeSectionId={activeSectionId}\n                            onSectionChange={setActiveSectionId}\n                            instanceId=\"day1-dinner\"\n                            onMealSelected={handleMealSelected}\n                          />\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* –î–µ–Ω—å 2 */}\n                    <div>\n                      <h4 className=\"text-lg font-bold mb-4 flex items-center gap-2 text-foreground/90 mt-8 pt-8 border-t border-border/50\">\n                        <span className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary text-sm font-bold\">\n                          2\n                        </span>\n                        –î–µ–Ω—å 2\n                      </h4>\n                      <div className=\"space-y-6 pl-0 md:pl-4\">\n                        <div>\n                          <div className=\"flex items-center gap-2 mb-3 text-primary font-medium text-sm uppercase tracking-wide\">\n                            <Sunrise className=\"w-4 h-4\" /> –ó–∞–≤—Ç—Ä–∞–∫\n                          </div>\n                        <MealSelector\n                          key={`day2-breakfast-${person.id}-${fillTimestamp}`}\n                          headerPrefix={day2Prefix}\n                          disabled={!canEdit}\n                          onBlockedAction={showBlockedWarning}\n                          personNumber={index + 1}\n                          dayNumber={2}\n                            mealsData={{ breakfast: menuData.breakfast }}\n                            selectedMeals={{ breakfast: person.day2?.breakfast?.dish }}\n                            onUpdate={(selection) =>\n                              updateBreakfast(person.id, \"day2\", { dish: selection.breakfast || null })\n                            }\n                            activeSectionId={activeSectionId}\n                            onSectionChange={setActiveSectionId}\n                            instanceId=\"day2-breakfast\"\n                            onMealSelected={handleMealSelected}\n                          />\n                        </div>\n\n                        <div>\n                          <div className=\"flex items-center gap-2 mb-3 text-primary font-medium text-sm uppercase tracking-wide\">\n                            <Sun className=\"w-4 h-4\" /> –û–±–µ–¥\n                          </div>\n                          <MealSelector\n                            key={`day2-lunch-${person.id}-${fillTimestamp}`}\n                            personNumber={index + 1}\n                            disabled={!canEdit}\n                            onBlockedAction={showBlockedWarning}\n                            dayNumber={2}\n                            mealsData={{\n                              salad: menuData.lunch_salad,\n                              soup: menuData.lunch_soup,\n                              main: menuData.lunch_main,\n                              garnish: menuData.garnish,\n                            }}\n                            selectedMeals={{\n                              salad: person.day2?.lunch?.salad,\n                              soup: person.day2?.lunch?.soup,\n                              main: person.day2?.lunch?.main,\n                            }}\n                            onUpdate={(selection) =>\n                              updateLunch(person.id, \"day2\", {\n                                salad: selection.salad || null,\n                                soup: selection.soup || null,\n                                main: selection.main || null,\n                              })\n                            }\n                            headerPrefix={`${day2Prefix} ‚Ä¢ –û–±–µ–¥`}\n                            activeSectionId={activeSectionId}\n                            onSectionChange={setActiveSectionId}\n                            instanceId=\"day2-lunch\"\n                            onMealSelected={handleMealSelected}\n                          />\n                        </div>\n\n                        <div>\n                          <div className=\"flex items-center gap-2 mb-3 text-primary font-medium text-sm uppercase tracking-wide\">\n                            <Moon className=\"w-4 h-4\" /> –£–∂–∏–Ω\n                          </div>\n                          <MealSelector\n                            key={`day2-dinner-${person.id}-${fillTimestamp}`}\n                            personNumber={index + 1}\n                            disabled={!canEdit}\n                            onBlockedAction={showBlockedWarning}\n                            dayNumber={2}\n                            mealsData={{\n                              salad: menuData.dinner_salad,\n                              soup: menuData.dinner_soup,\n                              main: menuData.dinner_main,\n                              garnish: menuData.garnish,\n                            }}\n                            selectedMeals={{\n                              salad: person.day2?.dinner?.salad,\n                              soup: person.day2?.dinner?.soup,\n                              main: person.day2?.dinner?.main,\n                            }}\n                            onUpdate={(selection) =>\n                              updateDinner(person.id, \"day2\", {\n                                salad: selection.salad || null,\n                                soup: selection.soup || null,\n                                main: selection.main || null,\n                              })\n                            }\n                            headerPrefix={`${day2Prefix} ‚Ä¢ –£–∂–∏–Ω`}\n                            activeSectionId={activeSectionId}\n                            onSectionChange={setActiveSectionId}\n                            instanceId=\"day2-dinner\"\n                            onMealSelected={handleMealSelected}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  )\n                })}\n\n                {canEdit && (\n                  <Button variant=\"outline\" onClick={addPerson} className=\"w-full mb-6 bg-transparent\">\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω—É\n                  </Button>\n                )}\n\n                <ExtrasSelector\n                  extras={extras}\n                  availableExtras={availableExtras}\n                  onUpdate={setExtras}\n                  disabled={!canEdit}\n                />\n\n                {/* –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ - —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π */}\n                {isAuthenticated && deliveryTimes.length > 0 && (\n                  <div className=\"mt-6 mb-6 p-4 bg-white rounded-lg border-2 border-black shadow-brutal\">\n                    <div className=\"flex items-center gap-2 mb-4\">\n                      <div className=\"w-8 h-8 bg-white border-2 border-black rounded-lg flex items-center justify-center shadow-brutal\">\n                        <Clock className=\"w-5 h-5 text-[#9D00FF] stroke-[2.5px]\" />\n                      </div>\n                      <h3 className=\"font-black text-black\">–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏</h3>\n                    </div>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2\">\n                      {deliveryTimes.map((time) => (\n                        <button\n                          key={time}\n                          onClick={() => canEdit && setDeliveryTime(time)}\n                          disabled={!canEdit}\n                          className={`py-2 px-1 rounded-lg text-[13px] font-black transition-all whitespace-nowrap border-2 border-black shadow-brutal ${\n                            deliveryTime === time\n                              ? \"bg-[#9D00FF] text-white\"\n                              : \"bg-white text-black hover:bg-[#FFEA00]\"\n                          } ${!canEdit ? \"cursor-not-allowed opacity-50\" : \"\"}`}\n                        >\n                          {time}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* –°–µ–∫—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å */}\n                {canEdit && hasContent && (\n                  <div className=\"mt-6 border-t border-border pt-6\">\n                    {isAuthenticated ? (\n                      <>\n                        {/* –ü—Ä–æ–º–æ–∫–æ–¥ */}\n                        <div\n                          className=\"flex items-center justify-between py-3 px-4 bg-white border-2 border-black rounded-lg cursor-pointer hover:bg-[#FFEA00] transition-colors shadow-brutal mb-2\"\n                          onClick={() => setActiveSectionId(activeSectionId === \"promo\" ? null : \"promo\")}\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-8 h-8 bg-white border-2 border-black rounded-lg flex items-center justify-center shadow-brutal\">\n                              <Tag className=\"w-4 h-4 text-[#9D00FF] stroke-[2.5px]\" />\n                            </div>\n                            <div>\n                              <p className=\"font-black text-black\">–ü—Ä–æ–º–æ–∫–æ–¥</p>\n                              {appliedPromo ? (\n                                <p className=\"text-sm text-[#9D00FF] font-medium\">–°–∫–∏–¥–∫–∞ {appliedPromo.discount} ‚ÇΩ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞</p>\n                              ) : (\n                                <p className=\"text-sm text-black/70 font-medium\">–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥</p>\n                              )}\n                            </div>\n                          </div>\n                          {activeSectionId === \"promo\" ? (\n                            <ChevronDown className=\"w-5 h-5 text-black stroke-[2.5px]\" />\n                          ) : (\n                            <ChevronRight className=\"w-5 h-5 text-black stroke-[2.5px]\" />\n                          )}\n                        </div>\n\n                        {activeSectionId === \"promo\" && (\n                          <div className=\"py-3 px-4 bg-white border-2 border-black rounded-lg shadow-brutal mb-2 animate-in slide-in-from-top-2 fade-in duration-200\">\n                            <div className=\"flex gap-2\">\n                              <input\n                                type=\"text\"\n                                value={promoCode}\n                                onChange={(e) => setPromoCode(e.target.value.toUpperCase())}\n                                placeholder=\"–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥\"\n                                className=\"flex-1 px-3 py-2 border-2 border-black rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-black font-medium\"\n                              />\n                              <Button \n                                onClick={handleApplyPromo} \n                                size=\"sm\"\n                                className=\"bg-[#9D00FF] text-white border-2 border-black hover:bg-[#B033FF] shadow-brutal font-black\"\n                              >\n                                –ü—Ä–∏–º–µ–Ω–∏—Ç—å\n                              </Button>\n                            </div>\n                            {appliedPromo && (\n                              <div className=\"mt-2 text-xs\">\n                                <button \n                                  onClick={() => setAppliedPromo(null)} \n                                  className=\"text-[#9D00FF] hover:underline font-medium\"\n                                >\n                                  –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥\n                                </button>\n                              </div>\n                            )}\n                          </div>\n                        )}\n\n                      </>\n                    ) : (\n                      <div className=\"bg-primary/5 rounded-xl p-4 border border-primary/10 mb-6\">\n                        <p className=\"text-sm text-center text-muted-foreground\">\n                          –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å, —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∫–∏–¥–∫–∏ –∏ –≤—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã\n                        </p>\n                      </div>\n                    )}\n\n                    {/* –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∑–∞–∫–∞–∑–∞ */}\n                    <div ref={footerRef} className=\"pt-2 pb-12\">\n                      {!isAuthenticated ? (\n                        <Button\n                          onClick={() => {\n                            // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –ü–µ—Ä–µ–¥–∞–µ–º order –∏ total –≤ onRequestAuth\n                            const order: Order = {\n                              startDate: formatDateKey(date), // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –∏—Å–ø–æ–ª—å–∑—É–µ–º date –Ω–∞–ø—Ä—è–º—É—é\n                              persons,\n                              delivered: false,\n                              deliveryTime,\n                              extras,\n                              subtotal: totalBeforeDiscount,\n                              total: finalTotal,\n                              paid: false,\n                              cancelled: false,\n                            }\n                            onRequestAuth?.(order, finalTotal)\n                          }}\n                          disabled={!hasContent}\n                          className=\"w-full h-16 text-lg bg-[#ff4d6d] hover:bg-[#e8445f] rounded-2xl flex items-center justify-center shadow-lg shadow-[#ff4d6d]/20 active:scale-[0.98] transition-transform relative overflow-hidden group\"\n                        >\n                          <span className=\"font-bold text-white flex items-center gap-2\">\n                            –ó–∞–∫–∞–∑–∞—Ç—å ¬∑ {finalTotal} ‚ÇΩ\n                          </span>\n                        </Button>\n                      ) : !isInDeliveryZone && userCity ? (\n                        <Button disabled className=\"w-full h-16 text-base rounded-2xl\">\n                          <MapPin className=\"w-4 h-4 mr-2\" />\n                          –î–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞\n                        </Button>\n                      ) : (\n                        <>\n                          {/* –ö–Ω–æ–ø–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ */}\n                          {!isExistingOrder && (\n                            <Button\n                              onClick={handlePayAndOrder}\n                              disabled={!hasContent || isProcessingPayment}\n                              className=\"w-full h-16 text-lg bg-[#ff4d6d] hover:bg-[#e8445f] rounded-2xl shadow-lg shadow-[#ff4d6d]/20 active:scale-[0.98] transition-transform\"\n                            >\n                              {isProcessingPayment ? (\n                                <div className=\"flex items-center gap-2\">\n                                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                                  <span className=\"font-bold text-white\">–û—Ñ–æ—Ä–º–ª—è–µ–º...</span>\n                                </div>\n                              ) : (\n                                <span className=\"font-bold text-white\">\n                                  –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ¬∑ {finalTotal} ‚ÇΩ\n                                </span>\n                              )}\n                            </Button>\n                          )}\n\n                          {/* –ö–Ω–æ–ø–∫–∞ \"–û–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑\" –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ */}\n                          {isExistingOrder && !isPaid && existingOrder && (\n                            <Button\n                              onClick={() => onRequestPayment?.(existingOrder, finalTotal)}\n                              disabled={isProcessingPayment || isDataLoading}\n                              className=\"w-full h-16 text-lg bg-[#FFEA00] hover:bg-[#FFF033] border-2 border-black rounded-2xl shadow-brutal active:scale-[0.98] transition-transform\"\n                            >\n                              {isDataLoading ? (\n                                <div className=\"flex items-center gap-2\">\n                                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                                  <span className=\"font-black text-black\">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</span>\n                                </div>\n                              ) : (\n                                <span className=\"font-black text-black\">–û–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑ ¬∑ {finalTotal} ‚ÇΩ</span>\n                              )}\n                            </Button>\n                          )}\n                        </>\n                      )}\n\n                      {canCancel && existingOrder && (\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={handleCancelClick}\n                          className=\"w-full mt-4 bg-transparent text-destructive hover:text-destructive hover:bg-destructive/10\"\n                        >\n                          –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã –¥–ª—è –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ - –≤–Ω–µ –±–ª–æ–∫–∞ canEdit */}\n                {!canEdit && canCancel && existingOrder && (\n                  <div className=\"mt-6 border-t border-border pt-6\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={handleCancelClick}\n                      className=\"w-full bg-transparent text-destructive hover:text-destructive hover:bg-destructive/10\"\n                    >\n                      –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ (–°—Ç–∏–ª—å –°–∞–º–æ–∫–∞—Ç–∞) */}\n            <AnimatePresence>\n              {showFloatingButton && (\n                <motion.div\n                  initial={{ opacity: 0, scale: 0.8, x: 20 }}\n                  animate={{ opacity: 1, scale: 1, x: 0 }}\n                  exit={{ opacity: 0, scale: 0.8, x: 20 }}\n                  className=\"absolute bottom-8 right-8 z-[100] pointer-events-auto\"\n                >\n                  <Button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      scrollToCheckout()\n                    }}\n                    className=\"h-14 pl-6 pr-2 rounded-xl shadow-brutal bg-[#FFEA00] hover:bg-[#FFF033] text-black border-2 border-black flex items-center gap-4 group transition-all duration-200 brutal-hover font-bold\"\n                  >\n                    <span className=\"text-xl font-black tracking-tight\">{finalTotal} ‚ÇΩ</span>\n                    <div className=\"w-10 h-10 rounded-lg bg-black/10 flex items-center justify-center group-hover:bg-black/20 transition-colors border border-black/20\">\n                      <CheckCircle2 className=\"w-6 h-6 stroke-[3px] text-black\" />\n                    </div>\n                  </Button>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      <AlertDialog open={confirmFillPersonId !== null} onOpenChange={(open) => !open && setConfirmFillPersonId(null)}>\n        <AlertDialogContent className=\"max-w-md\">\n          <AlertDialogHeader>\n            <AlertDialogTitle>–ó–∞–ø–æ–ª–Ω–∏—Ç—å –∑–∞–Ω–æ–≤–æ?</AlertDialogTitle>\n            <AlertDialogDescription>\n              –£ —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω—ã –±–ª—é–¥–∞. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø–æ–ª–Ω–∏—Ç –º–µ–Ω—é —Å–ª—É—á–∞–π–Ω—ã–º–∏ –±–ª—é–¥–∞–º–∏? –¢–µ–∫—É—â–∏–π\n              –≤—ã–±–æ—Ä –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>–û—Ç–º–µ–Ω–∞</AlertDialogCancel>\n            <AlertDialogAction onClick={confirmFill}>–î–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç—å</AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <AlertDialog open={showCancelConfirm} onOpenChange={setShowCancelConfirm}>\n        <AlertDialogContent className=\"max-w-md\">\n          <AlertDialogHeader>\n            <AlertDialogTitle>–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑?</AlertDialogTitle>\n            <AlertDialogDescription>\n              {isPaid\n                ? isPaidWithCard\n                  ? \"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑? –î–µ–Ω—å–≥–∏ –≤–µ—Ä–Ω—É—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ 3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π.\"\n                  : \"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑?\"\n                : \"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑?\"}\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>–ù–µ—Ç, –æ—Å—Ç–∞–≤–∏—Ç—å</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleConfirmCancel}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              –î–∞, –æ—Ç–º–µ–Ω–∏—Ç—å\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <WarningDialog\n        open={warningDialog.open}\n        onClose={closeWarning}\n        title={warningDialog.title}\n        description={warningDialog.description}\n        variant={warningDialog.variant}\n      />\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}