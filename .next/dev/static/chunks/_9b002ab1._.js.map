{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/lib/menu-utils.ts"],"sourcesContent":["// Утилиты для работы с меню и определения недели\n\nimport type { NocoDBMeal, NocoDBExtra } from \"./nocodb\"\nimport type { Meal, ExtraItem, Garnish, PortionSize, Nutrition } from \"./types\"\n\n// Преобразование NocoDB Meal в локальный тип\nexport function convertNocoDBMealToMeal(nocoMeal: NocoDBMeal): Meal {\n  const nutrition: Nutrition | undefined = nocoMeal.calories\n    ? {\n        calories: nocoMeal.calories,\n        protein: nocoMeal.protein || 0,\n        fats: nocoMeal.fats || 0,\n        carbs: nocoMeal.carbs || 0,\n        weight: nocoMeal.weight_single,\n      }\n    : undefined\n\n  return {\n    id: nocoMeal.Id,\n    name: nocoMeal.name,\n    ingredients: nocoMeal.ingredients,\n    prices: {\n      single: nocoMeal.price_single,\n      medium: nocoMeal.price_medium,\n      large: nocoMeal.price_large,\n    },\n    weights: {\n      single: nocoMeal.weight_single,\n      medium: nocoMeal.weight_medium,\n      large: nocoMeal.weight_large,\n    },\n    portion: \"single\" as PortionSize,\n    needsGarnish: nocoMeal.needs_garnish,\n    image: nocoMeal.image,\n    available: nocoMeal.available,\n    description: nocoMeal.description,\n    nutrition,\n    category: nocoMeal.category,\n    weekType:\n      nocoMeal.is_current_week && nocoMeal.is_next_week ? \"both\" : nocoMeal.is_current_week ? \"current\" : \"next\",\n  }\n}\n\n// Преобразование NocoDB Extra в локальный тип\nexport function convertNocoDBExtraToExtraItem(nocoExtra: NocoDBExtra): ExtraItem {\n  const nutrition: Nutrition | undefined = nocoExtra.calories\n    ? {\n        calories: nocoExtra.calories,\n        protein: nocoExtra.protein || 0,\n        fats: nocoExtra.fats || 0,\n        carbs: nocoExtra.carbs || 0,\n        weight: nocoExtra.weight,\n      }\n    : undefined\n\n  return {\n    id: nocoExtra.Id,\n    name: nocoExtra.name,\n    price: nocoExtra.price,\n    image: nocoExtra.image,\n    available: nocoExtra.available,\n    ingredients: nocoExtra.ingredients,\n    description: nocoExtra.description,\n    nutrition,\n    category: nocoExtra.category,\n  }\n}\n\n// Преобразование Meal в Garnish (для гарниров)\nexport function convertMealToGarnish(meal: Meal): Garnish {\n  return {\n    id: meal.id,\n    name: meal.name,\n    prices: meal.prices,\n    weights: meal.weights,\n    portion: meal.portion,\n    ingredients: meal.ingredients,\n    image: meal.image,\n    description: meal.description,\n    nutrition: meal.nutrition,\n  }\n}\n\n// Категории блюд\nexport type MealCategory =\n  | \"breakfast\"\n  | \"lunch_salad\"\n  | \"lunch_soup\"\n  | \"lunch_main\"\n  | \"dinner_salad\"\n  | \"dinner_soup\"\n  | \"dinner_main\"\n  | \"garnish\"\n\n// Группировка блюд по категориям\nexport function groupMealsByCategory(meals: Meal[]): Record<MealCategory, Meal[]> {\n  const groups: Record<MealCategory, Meal[]> = {\n    breakfast: [],\n    lunch_salad: [],\n    lunch_soup: [],\n    lunch_main: [],\n    dinner_salad: [],\n    dinner_soup: [],\n    dinner_main: [],\n    garnish: [],\n  }\n\n  for (const meal of meals) {\n    const category = meal.category as MealCategory\n    if (category && groups[category]) {\n      groups[category].push(meal)\n    }\n  }\n\n  return groups\n}\n\n// Группировка дополнений по категориям\nexport function groupExtrasByCategory(extras: ExtraItem[]): Record<string, ExtraItem[]> {\n  const groups: Record<string, ExtraItem[]> = {\n    drink: [],\n    sauce: [],\n    dessert: [],\n  }\n\n  for (const extra of extras) {\n    if (extra.category && groups[extra.category]) {\n      groups[extra.category].push(extra)\n    }\n  }\n\n  return groups\n}\n\n// Определение типа недели для даты\n// Логика:\n// - Current week: до понедельника следующей недели включительно (8 января)\n// - Next week: со вторника следующей недели (9 января) до понедельника через неделю включительно (15 января)\nexport function getWeekTypeForDate(date: Date): \"current\" | \"next\" {\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n\n  // Найти понедельник текущей недели\n  const currentMonday = new Date(today)\n  const dayOfWeek = today.getDay()\n  const diff = dayOfWeek === 0 ? -6 : 1 - dayOfWeek\n  currentMonday.setDate(today.getDate() + diff)\n\n  // Найти понедельник следующей недели (последний день current week - включительно)\n  const nextMonday = new Date(currentMonday)\n  nextMonday.setDate(currentMonday.getDate() + 7)\n\n  const targetDate = new Date(date)\n  targetDate.setHours(0, 0, 0, 0)\n\n  // Если дата до понедельника следующей недели включительно - current week\n  // Если дата начиная со вторника следующей недели - next week\n  if (targetDate <= nextMonday) {\n    return \"current\"\n  }\n\n  return \"next\"\n}\n\n// Фильтрация блюд по типу недели\nexport function filterMealsByWeek(meals: Meal[], weekType: \"current\" | \"next\"): Meal[] {\n  return meals.filter((meal) => {\n    if (meal.weekType === \"both\") return true\n    return meal.weekType === weekType\n  })\n}\n\n// Получить доступные даты для заказа\n// Правила:\n// - Минимум: заказ на завтра (нельзя на сегодня)\n// - Максимум: до понедельника через неделю включительно (15 января)\n// - Выходные: суббота выходной (нельзя заказать на субботу)\n// - Воскресенье: можно заказать\n// - Current week: до понедельника следующей недели включительно (8 января)\n// - Next week: со вторника следующей недели (9 января) до понедельника через неделю включительно (15 января)\nexport function getAvailableDatesForOrdering(): { date: Date; weekType: \"current\" | \"next\" }[] {\n  const dates: { date: Date; weekType: \"current\" | \"next\" }[] = []\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n\n  // Найти понедельник текущей недели\n  const currentMonday = new Date(today)\n  const dayOfWeek = today.getDay()\n  const diff = dayOfWeek === 0 ? -6 : 1 - dayOfWeek\n  currentMonday.setDate(today.getDate() + diff)\n\n  // Понедельник следующей недели (последний день current week - включительно)\n  const nextMonday = new Date(currentMonday)\n  nextMonday.setDate(currentMonday.getDate() + 7)\n\n  // Вторник следующей недели (первый день next week)\n  const nextTuesday = new Date(nextMonday)\n  nextTuesday.setDate(nextMonday.getDate() + 1)\n\n  // Понедельник через неделю (последний доступный день для заказа - 15 января)\n  const mondayAfterNext = new Date(nextMonday)\n  mondayAfterNext.setDate(nextMonday.getDate() + 7)\n\n  // Начинаем с завтра (минимум)\n  const current = new Date(today)\n  current.setDate(current.getDate() + 1)\n\n  // Добавляем даты до понедельника через неделю включительно\n  while (current <= mondayAfterNext) {\n    // Пропускаем субботы (день 6 - выходной)\n    if (current.getDay() !== 6) {\n      // Определяем тип недели: до понедельника следующей недели включительно - current, после - next\n      const weekType = current <= nextMonday ? \"current\" : \"next\"\n      dates.push({ date: new Date(current), weekType })\n    }\n    current.setDate(current.getDate() + 1)\n  }\n\n  return dates\n}\n\n// Проверка, можно ли заказать на дату\n// Правила:\n// - Минимум: заказ на завтра (нельзя на сегодня)\n// - Максимум: до понедельника через неделю включительно (15 января)\n// - Выходные: суббота выходной (нельзя заказать на субботу)\n// - Воскресенье: можно заказать\nexport function canOrderForDate(date: Date): boolean {\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n\n  const targetDate = new Date(date)\n  targetDate.setHours(0, 0, 0, 0)\n\n  // Нельзя заказать на сегодня или прошлые даты (минимум - завтра)\n  if (targetDate <= today) return false\n\n  // Нельзя заказать на субботу (выходной)\n  if (targetDate.getDay() === 6) return false\n\n  // Найти понедельник текущей недели\n  const currentMonday = new Date(today)\n  const dayOfWeek = today.getDay()\n  const diff = dayOfWeek === 0 ? -6 : 1 - dayOfWeek\n  currentMonday.setDate(today.getDate() + diff)\n\n  // Понедельник следующей недели\n  const nextMonday = new Date(currentMonday)\n  nextMonday.setDate(currentMonday.getDate() + 7)\n\n  // Понедельник через неделю (последний доступный день - 15 января)\n  const mondayAfterNext = new Date(nextMonday)\n  mondayAfterNext.setDate(nextMonday.getDate() + 7)\n\n  // Можно заказать до понедельника через неделю включительно\n  return targetDate <= mondayAfterNext\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/lib/types.ts"],"sourcesContent":["export type PortionSize = \"single\" | \"medium\" | \"large\"\n\nexport interface Nutrition {\n  calories: number\n  protein: number\n  fats: number\n  carbs: number\n  weight?: number\n}\n\nexport interface Garnish {\n  id: number\n  name: string\n  prices: {\n    single: number\n    medium?: number\n    large?: number\n  }\n  weights: {\n    single: number\n    medium?: number\n    large?: number\n  }\n  portion: PortionSize\n  ingredients?: string\n  image?: string\n  description?: string\n  nutrition?: Nutrition\n}\n\nexport interface Meal {\n  id: number\n  name: string\n  ingredients: string\n  prices: {\n    single: number\n    medium?: number\n    large?: number\n  }\n  weights: {\n    single: number\n    medium?: number\n    large?: number\n  }\n  portion: PortionSize\n  needsGarnish?: boolean\n  garnish?: Garnish | null\n  image?: string\n  available?: boolean\n  description?: string\n  nutrition?: Nutrition\n  category?: string\n  weekType?: \"current\" | \"next\" | \"both\"\n}\n\nexport interface MenuItem {\n  id: number\n  name: string\n  ingredients: string\n  prices: {\n    single: number\n    medium?: number\n    large?: number\n  }\n  weights: {\n    single: number\n    medium?: number\n    large?: number\n  }\n  needsGarnish?: boolean\n  image?: string\n  available?: boolean\n  category?: string\n  description?: string\n  nutrition?: Nutrition\n  weekType?: \"current\" | \"next\" | \"both\"\n}\n\nexport interface BreakfastSelection {\n  dish: Meal | null\n}\n\nexport interface FullMealSelection {\n  salad: Meal | null\n  soup: Meal | null\n  main: Meal | null\n}\n\nexport interface DayMeals {\n  breakfast: BreakfastSelection\n  lunch: FullMealSelection\n  dinner: FullMealSelection\n}\n\nexport interface Extra {\n  id: number\n  name: string\n  price: number\n  quantity: number\n  image?: string\n  available?: boolean\n  ingredients?: string\n  description?: string\n  nutrition?: Nutrition\n  category?: string\n}\n\nexport interface ExtraItem {\n  id: number\n  name: string\n  price: number\n  image?: string\n  available?: boolean\n  ingredients?: string\n  description?: string\n  nutrition?: Nutrition\n  category?: string\n}\n\nexport interface Person {\n  id: number\n  day1: DayMeals\n  day2: DayMeals\n}\n\nexport const createEmptyDay = (): DayMeals => ({\n  breakfast: { dish: null },\n  lunch: { salad: null, soup: null, main: null },\n  dinner: { salad: null, soup: null, main: null },\n})\n\nexport interface Order {\n  id?: number\n  orderNumber?: string\n  startDate: string | Date\n  persons: Person[]\n  delivered: boolean\n  deliveryTime: string\n  extras?: Extra[]\n  paid: boolean\n  paidAt?: string\n  cancelled?: boolean\n  paymentMethod?: \"card\" | \"sbp\" | \"cash\"\n  promoCode?: string\n  promoDiscount?: number\n  loyaltyPointsUsed?: number\n  loyaltyPointsEarned?: number\n  subtotal?: number\n  total?: number\n  weekType?: \"current\" | \"next\"\n}\n\nexport interface UserProfile {\n  id?: number\n  phone: string\n  additionalPhone?: string\n  name: string\n  street: string\n  building: string\n  buildingSection?: string\n  apartment?: string\n  entrance?: string\n  floor?: string\n  intercom?: string\n  district?: string\n  deliveryComment?: string\n  loyaltyPoints: number\n  totalSpent: number\n}\n\nexport interface Review {\n  id?: number\n  orderId: string | number\n  rating: number\n  text: string\n  createdAt: string\n}\n\nexport interface DeliveryZone {\n  id: number\n  city: string\n  district?: string\n  deliveryFee: number\n  minOrderAmount: number\n  isAvailable: boolean\n  availableIntervals: string[]\n}\n\n// Хелпер для расчета цены порции\nexport function getMealPrice(meal: Meal | Garnish, portion: PortionSize): number {\n  if (!meal || !meal.prices) return 0\n  if (portion === \"medium\" && meal.prices.medium) {\n    return meal.prices.medium\n  }\n  if (portion === \"large\" && meal.prices.large) {\n    return meal.prices.large\n  }\n  return meal.prices.single || 0\n}\n\n// Хелпер для расчета веса порции\nexport function getMealWeight(meal: Meal | Garnish, portion: PortionSize): number {\n  if (!meal || !meal.weights) return 0\n  if (portion === \"medium\" && meal.weights.medium) {\n    return meal.weights.medium\n  }\n  if (portion === \"large\" && meal.weights.large) {\n    return meal.weights.large\n  }\n  return meal.weights.single || 0\n}\n\n// Хелпер для получения названия размера порции\nexport function getPortionLabel(portion: PortionSize): string {\n  switch (portion) {\n    case \"single\":\n      return \"Стандарт\"\n    case \"medium\":\n      return \"Средний\"\n    case \"large\":\n      return \"Большой\"\n    default:\n      return \"Стандарт\"\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AA6HO,MAAM,iBAAiB,IAAgB,CAAC;QAC7C,WAAW;YAAE,MAAM;QAAK;QACxB,OAAO;YAAE,OAAO;YAAM,MAAM;YAAM,MAAM;QAAK;QAC7C,QAAQ;YAAE,OAAO;YAAM,MAAM;YAAM,MAAM;QAAK;IAChD,CAAC;AA4DM,SAAS,aAAa,IAAoB,EAAE,OAAoB;IACrE,IAAI,CAAC,QAAQ,CAAC,KAAK,MAAM,EAAE,OAAO;IAClC,IAAI,YAAY,YAAY,KAAK,MAAM,CAAC,MAAM,EAAE;QAC9C,OAAO,KAAK,MAAM,CAAC,MAAM;IAC3B;IACA,IAAI,YAAY,WAAW,KAAK,MAAM,CAAC,KAAK,EAAE;QAC5C,OAAO,KAAK,MAAM,CAAC,KAAK;IAC1B;IACA,OAAO,KAAK,MAAM,CAAC,MAAM,IAAI;AAC/B;AAGO,SAAS,cAAc,IAAoB,EAAE,OAAoB;IACtE,IAAI,CAAC,QAAQ,CAAC,KAAK,OAAO,EAAE,OAAO;IACnC,IAAI,YAAY,YAAY,KAAK,OAAO,CAAC,MAAM,EAAE;QAC/C,OAAO,KAAK,OAAO,CAAC,MAAM;IAC5B;IACA,IAAI,YAAY,WAAW,KAAK,OAAO,CAAC,KAAK,EAAE;QAC7C,OAAO,KAAK,OAAO,CAAC,KAAK;IAC3B;IACA,OAAO,KAAK,OAAO,CAAC,MAAM,IAAI;AAChC;AAGO,SAAS,gBAAgB,OAAoB;IAClD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/lib/meals-data.ts"],"sourcesContent":["// Статические данные меню (используются как fallback если NocoDB недоступен)\n// В продакшене данные загружаются из NocoDB\n\nimport type { Meal, ExtraItem, PortionSize } from \"./types\"\n\nexport const MEALS: Record<string, Meal[]> = {\n  breakfast: [\n    {\n      id: 1,\n      name: \"Омлет с овощами\",\n      ingredients: \"Яйца, помидоры, шпинат, сыр фета\",\n      description: \"Воздушный омлет с сочными томатами, свежим шпинатом и нежным сыром фета\",\n      prices: { single: 280, medium: 350, large: 420 },\n      weights: { single: 250, medium: 350, large: 450 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/omelet-with-vegetables-tomatoes-spinach-feta-chees.jpg\",\n      available: true,\n      nutrition: { calories: 245, protein: 18, fats: 16, carbs: 8, weight: 250 },\n      category: \"breakfast\",\n      weekType: \"both\",\n    },\n    {\n      id: 2,\n      name: \"Овсяная каша\",\n      ingredients: \"Овсянка, банан, ягоды, мед, орехи\",\n      description: \"Полезная овсянка с натуральным медом, свежими ягодами и хрустящими орехами\",\n      prices: { single: 250, medium: 320, large: 390 },\n      weights: { single: 300, medium: 400, large: 500 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/oatmeal-with-banana-berries-honey-nuts.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 12, fats: 8, carbs: 52, weight: 300 },\n      category: \"breakfast\",\n      weekType: \"both\",\n    },\n    {\n      id: 3,\n      name: \"Сырники\",\n      ingredients: \"Творог, мука, яйца, сметана, ягодный соус\",\n      description: \"Классические сырники из домашнего творога со сметаной и ягодным соусом\",\n      prices: { single: 320, medium: 400, large: 480 },\n      weights: { single: 280, medium: 380, large: 480 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/russian-syrniki-pancakes-with-sour-cream-berry-sau.jpg\",\n      available: true,\n      nutrition: { calories: 380, protein: 16, fats: 14, carbs: 46, weight: 280 },\n      category: \"breakfast\",\n      weekType: \"current\",\n    },\n    {\n      id: 4,\n      name: \"Панкейки\",\n      ingredients: \"Мука, молоко, яйца, кленовый сироп\",\n      description: \"Пышные американские панкейки с натуральным кленовым сиропом\",\n      prices: { single: 290, medium: 360, large: 430 },\n      weights: { single: 250, medium: 350, large: 450 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/pancakes-maple-syrup.png\",\n      available: true,\n      nutrition: { calories: 340, protein: 10, fats: 8, carbs: 58, weight: 250 },\n      category: \"breakfast\",\n      weekType: \"next\",\n    },\n  ],\n  lunch_salad: [\n    {\n      id: 10,\n      name: \"Салат Греческий\",\n      ingredients: \"Огурцы, помидоры, перец, маслины, фета, оливковое масло\",\n      description: \"Свежий средиземноморский салат с сыром фета и оливковым маслом\",\n      prices: { single: 340, medium: 420, large: 500 },\n      weights: { single: 220, medium: 320, large: 420 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/greek-salad.jpg\",\n      available: true,\n      nutrition: { calories: 280, protein: 8, fats: 22, carbs: 12, weight: 220 },\n      category: \"lunch_salad\",\n      weekType: \"both\",\n    },\n    {\n      id: 11,\n      name: \"Салат с тунцом\",\n      ingredients: \"Тунец, яйцо, фасоль, помидоры, салат, оливки\",\n      description: \"Сытный салат Нисуаз с консервированным тунцом и фасолью\",\n      prices: { single: 420, medium: 520, large: 620 },\n      weights: { single: 280, medium: 380, large: 480 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/tuna-salad-nicoise.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 26, fats: 18, carbs: 14, weight: 280 },\n      category: \"lunch_salad\",\n      weekType: \"current\",\n    },\n    {\n      id: 12,\n      name: \"Салат Цезарь\",\n      ingredients: \"Курица, салат ромэн, пармезан, гренки, соус\",\n      description: \"Классический Цезарь с нежной курицей и хрустящими гренками\",\n      prices: { single: 380, medium: 470, large: 560 },\n      weights: { single: 260, medium: 360, large: 460 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/caesar-salad-with-chicken-parmesan-croutons.jpg\",\n      available: true,\n      nutrition: { calories: 350, protein: 28, fats: 20, carbs: 16, weight: 260 },\n      category: \"lunch_salad\",\n      weekType: \"next\",\n    },\n  ],\n  lunch_soup: [\n    {\n      id: 20,\n      name: \"Борщ\",\n      ingredients: \"Свекла, капуста, говядина, картофель, сметана\",\n      description: \"Традиционный украинский борщ на говяжьем бульоне со сметаной\",\n      prices: { single: 320, medium: 400, large: 480 },\n      weights: { single: 350, medium: 450, large: 550 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/borscht-soup-with-sour-cream.jpg\",\n      available: true,\n      nutrition: { calories: 240, protein: 14, fats: 10, carbs: 24, weight: 350 },\n      category: \"lunch_soup\",\n      weekType: \"both\",\n    },\n    {\n      id: 21,\n      name: \"Куриный суп\",\n      ingredients: \"Курица, лапша, морковь, лук, зелень\",\n      description: \"Домашний куриный суп с лапшой и свежей зеленью\",\n      prices: { single: 280, medium: 350, large: 420 },\n      weights: { single: 350, medium: 450, large: 550 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/chicken-noodle-soup.jpg\",\n      available: true,\n      nutrition: { calories: 180, protein: 16, fats: 6, carbs: 18, weight: 350 },\n      category: \"lunch_soup\",\n      weekType: \"current\",\n    },\n    {\n      id: 22,\n      name: \"Крем-суп из тыквы\",\n      ingredients: \"Тыква, сливки, имбирь, семечки\",\n      description: \"Нежный крем-суп из печеной тыквы с имбирем и тыквенными семечками\",\n      prices: { single: 300, medium: 380, large: 460 },\n      weights: { single: 300, medium: 400, large: 500 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/pumpkin-cream-soup.jpg\",\n      available: true,\n      nutrition: { calories: 220, protein: 6, fats: 14, carbs: 20, weight: 300 },\n      category: \"lunch_soup\",\n      weekType: \"next\",\n    },\n  ],\n  lunch_main: [\n    {\n      id: 30,\n      name: \"Куриная грудка\",\n      ingredients: \"Филе курицы, специи, оливковое масло\",\n      description: \"Сочная куриная грудка на гриле с ароматными травами\",\n      prices: { single: 380, medium: 470, large: 560 },\n      weights: { single: 180, medium: 260, large: 340 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/grilled-chicken-breast-with-herbs.jpg\",\n      available: true,\n      nutrition: { calories: 210, protein: 38, fats: 6, carbs: 2, weight: 180 },\n      category: \"lunch_main\",\n      weekType: \"both\",\n    },\n    {\n      id: 31,\n      name: \"Лосось на гриле\",\n      ingredients: \"Стейк лосося, лимон, укроп\",\n      description: \"Стейк норвежского лосося на гриле с лимоном и укропом\",\n      prices: { single: 580, medium: 720, large: 860 },\n      weights: { single: 200, medium: 280, large: 360 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/grilled-salmon-steak-with-lemon-dill.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 34, fats: 20, carbs: 0, weight: 200 },\n      category: \"lunch_main\",\n      weekType: \"current\",\n    },\n    {\n      id: 32,\n      name: \"Паста Карбонара\",\n      ingredients: \"Спагетти, бекон, сливки, пармезан, яйцо\",\n      description: \"Классическая итальянская паста с беконом и сливочным соусом\",\n      prices: { single: 420, medium: 520, large: 620 },\n      weights: { single: 320, medium: 420, large: 520 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/pasta-carbonara-with-bacon-parmesan.jpg\",\n      available: true,\n      nutrition: { calories: 520, protein: 22, fats: 26, carbs: 48, weight: 320 },\n      category: \"lunch_main\",\n      weekType: \"next\",\n    },\n  ],\n  dinner_salad: [\n    {\n      id: 40,\n      name: \"Салат Оливье\",\n      ingredients: \"Картофель, морковь, горошек, яйца, колбаса, майонез\",\n      description: \"Классический русский салат с домашним майонезом\",\n      prices: { single: 280, medium: 360, large: 440 },\n      weights: { single: 250, medium: 350, large: 450 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/olivier-salad-russian.jpg\",\n      available: true,\n      nutrition: { calories: 340, protein: 12, fats: 22, carbs: 24, weight: 250 },\n      category: \"dinner_salad\",\n      weekType: \"both\",\n    },\n    {\n      id: 41,\n      name: \"Салат Витаминный\",\n      ingredients: \"Капуста, морковь, болгарский перец, яблоко, лимонный сок\",\n      description: \"Легкий витаминный салат из свежих овощей с яблоком\",\n      prices: { single: 220, medium: 280, large: 340 },\n      weights: { single: 200, medium: 300, large: 400 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/vitamin-salad-cabbage.jpg\",\n      available: true,\n      nutrition: { calories: 120, protein: 3, fats: 2, carbs: 22, weight: 200 },\n      category: \"dinner_salad\",\n      weekType: \"current\",\n    },\n    {\n      id: 42,\n      name: \"Салат с авокадо\",\n      ingredients: \"Авокадо, руккола, черри, кедровые орехи, пармезан\",\n      description: \"Изысканный салат с авокадо, рукколой и кедровыми орешками\",\n      prices: { single: 390, medium: 480, large: 570 },\n      weights: { single: 200, medium: 300, large: 400 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/avocado-salad-arugula.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 8, fats: 28, carbs: 12, weight: 200 },\n      category: \"dinner_salad\",\n      weekType: \"next\",\n    },\n  ],\n  dinner_soup: [\n    {\n      id: 50,\n      name: \"Окрошка\",\n      ingredients: \"Квас, огурцы, редис, яйца, колбаса, зелень, сметана\",\n      description: \"Освежающий холодный суп на квасе с овощами\",\n      prices: { single: 290, medium: 370, large: 450 },\n      weights: { single: 350, medium: 450, large: 550 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/okroshka-cold-soup.jpg\",\n      available: true,\n      nutrition: { calories: 180, protein: 10, fats: 8, carbs: 18, weight: 350 },\n      category: \"dinner_soup\",\n      weekType: \"both\",\n    },\n    {\n      id: 51,\n      name: \"Грибной крем-суп\",\n      ingredients: \"Шампиньоны, сливки, лук, чеснок, зелень\",\n      description: \"Ароматный крем-суп из шампиньонов со сливками\",\n      prices: { single: 310, medium: 390, large: 470 },\n      weights: { single: 300, medium: 400, large: 500 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/mushroom-cream-soup.jpg\",\n      available: true,\n      nutrition: { calories: 200, protein: 6, fats: 16, carbs: 10, weight: 300 },\n      category: \"dinner_soup\",\n      weekType: \"current\",\n    },\n    {\n      id: 52,\n      name: \"Уха\",\n      ingredients: \"Рыба, картофель, морковь, лук, зелень\",\n      description: \"Наваристая уха из свежей рыбы с овощами\",\n      prices: { single: 350, medium: 440, large: 530 },\n      weights: { single: 350, medium: 450, large: 550 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/fish-soup-ukha.jpg\",\n      available: true,\n      nutrition: { calories: 160, protein: 18, fats: 4, carbs: 14, weight: 350 },\n      category: \"dinner_soup\",\n      weekType: \"next\",\n    },\n  ],\n  dinner_main: [\n    {\n      id: 60,\n      name: \"Стейк из индейки\",\n      ingredients: \"Филе индейки, травы, чеснок\",\n      description: \"Сочный стейк из индейки с ароматными травами\",\n      prices: { single: 420, medium: 520, large: 620 },\n      weights: { single: 180, medium: 260, large: 340 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/turkey-steak-with-herbs-garlic.jpg\",\n      available: true,\n      nutrition: { calories: 190, protein: 36, fats: 4, carbs: 2, weight: 180 },\n      category: \"dinner_main\",\n      weekType: \"both\",\n    },\n    {\n      id: 61,\n      name: \"Треска запеченная\",\n      ingredients: \"Филе трески, овощи, лимон\",\n      description: \"Запеченное филе трески с овощами и лимоном\",\n      prices: { single: 480, medium: 600, large: 720 },\n      weights: { single: 220, medium: 300, large: 380 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/baked-cod-fish-with-vegetables-lemon.jpg\",\n      available: true,\n      nutrition: { calories: 180, protein: 32, fats: 4, carbs: 6, weight: 220 },\n      category: \"dinner_main\",\n      weekType: \"current\",\n    },\n    {\n      id: 62,\n      name: \"Котлеты домашние\",\n      ingredients: \"Говядина, свинина, лук, яйцо, специи\",\n      description: \"Сочные домашние котлеты из мясного фарша\",\n      prices: { single: 360, medium: 450, large: 540 },\n      weights: { single: 200, medium: 280, large: 360 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/homemade-cutlets.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 28, fats: 22, carbs: 4, weight: 200 },\n      category: \"dinner_main\",\n      weekType: \"next\",\n    },\n  ],\n  garnish: [\n    {\n      id: 70,\n      name: \"Гречка\",\n      ingredients: \"Гречневая крупа, соль\",\n      description: \"Рассыпчатая гречневая каша\",\n      prices: { single: 80, medium: 110, large: 140 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/buckwheat-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 110, protein: 4, fats: 1, carbs: 22, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n    {\n      id: 71,\n      name: \"Рис\",\n      ingredients: \"Белый рис басмати, соль\",\n      description: \"Ароматный рис басмати\",\n      prices: { single: 70, medium: 100, large: 130 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/white-rice-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 130, protein: 3, fats: 0, carbs: 28, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n    {\n      id: 72,\n      name: \"Овощи на пару\",\n      ingredients: \"Брокколи, морковь, цветная капуста\",\n      description: \"Овощной микс на пару\",\n      prices: { single: 100, medium: 140, large: 180 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/steamed-vegetables-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 60, protein: 3, fats: 0, carbs: 12, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n    {\n      id: 73,\n      name: \"Картофельное пюре\",\n      ingredients: \"Картофель, молоко, сливочное масло, соль\",\n      description: \"Нежное картофельное пюре\",\n      prices: { single: 90, medium: 130, large: 170 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/mashed-potatoes-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 140, protein: 3, fats: 4, carbs: 24, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n    {\n      id: 74,\n      name: \"Киноа\",\n      ingredients: \"Белая киноа, соль, специи\",\n      description: \"Полезная киноа со специями\",\n      prices: { single: 110, medium: 150, large: 190 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/quinoa-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 120, protein: 5, fats: 2, carbs: 21, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n  ],\n}\n\nexport const EXTRAS: Record<string, ExtraItem[]> = {\n  drink: [\n    {\n      id: 100,\n      name: \"Морс клюквенный\",\n      price: 120,\n      image: \"/cranberry-mors-drink.jpg\",\n      available: true,\n      ingredients: \"Клюква, вода, сахар\",\n      description: \"Освежающий морс из свежей клюквы\",\n      nutrition: { calories: 80, protein: 0, fats: 0, carbs: 20, weight: 250 },\n      category: \"drink\",\n    },\n    {\n      id: 101,\n      name: \"Компот из сухофруктов\",\n      price: 100,\n      image: \"/dried-fruit-compote.jpg\",\n      available: true,\n      ingredients: \"Курага, чернослив, изюм, вода, сахар\",\n      description: \"Традиционный компот из сухофруктов\",\n      nutrition: { calories: 90, protein: 1, fats: 0, carbs: 22, weight: 250 },\n      category: \"drink\",\n    },\n    {\n      id: 102,\n      name: \"Лимонад домашний\",\n      price: 150,\n      image: \"/homemade-lemonade.jpg\",\n      available: true,\n      ingredients: \"Лимон, вода, сахар, мята\",\n      description: \"Домашний лимонад с мятой\",\n      nutrition: { calories: 70, protein: 0, fats: 0, carbs: 18, weight: 250 },\n      category: \"drink\",\n    },\n    {\n      id: 103,\n      name: \"Смузи ягодный\",\n      price: 180,\n      image: \"/berry-smoothie.jpg\",\n      available: true,\n      ingredients: \"Клубника, черника, банан, йогурт\",\n      description: \"Густой ягодный смузи с йогуртом\",\n      nutrition: { calories: 140, protein: 4, fats: 2, carbs: 28, weight: 250 },\n      category: \"drink\",\n    },\n  ],\n  sauce: [\n    {\n      id: 110,\n      name: \"Соус сырный\",\n      price: 60,\n      image: \"/cheese-sauce.jpg\",\n      available: true,\n      ingredients: \"Сыр, сливки, чеснок, специи\",\n      description: \"Нежный сливочно-сырный соус\",\n      nutrition: { calories: 180, protein: 6, fats: 16, carbs: 4, weight: 50 },\n      category: \"sauce\",\n    },\n    {\n      id: 111,\n      name: \"Соус томатный\",\n      price: 50,\n      image: \"/tomato-sauce.jpg\",\n      available: true,\n      ingredients: \"Томаты, лук, чеснок, базилик\",\n      description: \"Классический томатный соус\",\n      nutrition: { calories: 60, protein: 2, fats: 2, carbs: 10, weight: 50 },\n      category: \"sauce\",\n    },\n    {\n      id: 112,\n      name: \"Соус чесночный\",\n      price: 55,\n      image: \"/garlic-sauce.jpg\",\n      available: true,\n      ingredients: \"Чеснок, майонез, укроп\",\n      description: \"Пикантный чесночный соус\",\n      nutrition: { calories: 220, protein: 1, fats: 24, carbs: 2, weight: 50 },\n      category: \"sauce\",\n    },\n    {\n      id: 113,\n      name: \"Песто\",\n      price: 80,\n      image: \"/pesto-sauce.jpg\",\n      available: true,\n      ingredients: \"Базилик, кедровые орехи, пармезан, масло\",\n      description: \"Итальянский соус песто\",\n      nutrition: { calories: 240, protein: 4, fats: 24, carbs: 4, weight: 50 },\n      category: \"sauce\",\n    },\n  ],\n  dessert: [\n    {\n      id: 120,\n      name: \"Тирамису\",\n      price: 280,\n      image: \"/tiramisu-dessert.jpg\",\n      available: true,\n      ingredients: \"Маскарпоне, савоярди, кофе, какао\",\n      description: \"Классический итальянский десерт\",\n      nutrition: { calories: 320, protein: 6, fats: 18, carbs: 34, weight: 120 },\n      category: \"dessert\",\n    },\n    {\n      id: 121,\n      name: \"Чизкейк\",\n      price: 260,\n      image: \"/cheesecake-dessert.jpg\",\n      available: true,\n      ingredients: \"Сливочный сыр, печенье, сахар, сливки\",\n      description: \"Нежный чизкейк Нью-Йорк\",\n      nutrition: { calories: 380, protein: 8, fats: 24, carbs: 32, weight: 130 },\n      category: \"dessert\",\n    },\n    {\n      id: 122,\n      name: \"Панна котта\",\n      price: 220,\n      image: \"/panna-cotta-dessert.jpg\",\n      available: true,\n      ingredients: \"Сливки, сахар, ваниль, желатин, ягоды\",\n      description: \"Итальянский десерт с ягодами\",\n      nutrition: { calories: 280, protein: 4, fats: 18, carbs: 26, weight: 110 },\n      category: \"dessert\",\n    },\n    {\n      id: 123,\n      name: \"Брауни\",\n      price: 180,\n      image: \"/brownie-dessert.jpg\",\n      available: true,\n      ingredients: \"Шоколад, масло, яйца, мука, орехи\",\n      description: \"Шоколадный брауни с орехами\",\n      nutrition: { calories: 340, protein: 6, fats: 20, carbs: 36, weight: 100 },\n      category: \"dessert\",\n    },\n  ],\n}\n\nexport const DELIVERY_TIMES = [\"18:00 - 19:00\", \"19:00 - 20:00\", \"20:00 - 21:00\", \"21:00 - 22:00\"]\n\nexport function getMealsForWeek(weekType: \"current\" | \"next\"): Record<string, Meal[]> {\n  const filtered: Record<string, Meal[]> = {}\n\n  for (const [category, meals] of Object.entries(MEALS)) {\n    filtered[category] = meals.filter((meal) => meal.weekType === \"both\" || meal.weekType === weekType)\n  }\n\n  return filtered\n}\n\nexport function isMealAvailable(mealName: string, weekType?: \"current\" | \"next\"): boolean {\n  const allMeals = Object.values(MEALS).flat()\n  const meal = allMeals.find((m) => m.name === mealName)\n\n  if (!meal || !meal.available) return false\n\n  if (weekType) {\n    return meal.weekType === \"both\" || meal.weekType === weekType\n  }\n\n  return true\n}\n\nexport function isExtraAvailable(extraName: string): boolean {\n  const allExtras = Object.values(EXTRAS).flat()\n  const extra = allExtras.find((e) => e.name === extraName)\n  return extra?.available ?? false\n}\n\nexport function getGarnishes(): Meal[] {\n  return MEALS.garnish || []\n}\n\nexport function getMealById(id: number): Meal | undefined {\n  return Object.values(MEALS)\n    .flat()\n    .find((m) => m.id === id)\n}\n\nexport function getExtraById(id: number): ExtraItem | undefined {\n  return Object.values(EXTRAS)\n    .flat()\n    .find((e) => e.id === id)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1356, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/hooks/use-menu.ts"],"sourcesContent":["\"use client\"\n\nimport useSWR from \"swr\"\nimport type { Meal, ExtraItem, DeliveryZone } from \"@/lib/types\"\n\ninterface MenuData {\n  meals: Record<string, Meal[]>\n  extras: Record<string, ExtraItem[]>\n  deliveryZones: DeliveryZone[]\n  deliveryTimes: string[]\n  source: \"nocodb\" | \"fallback\"\n}\n\nconst fetcher = async (url: string): Promise<MenuData> => {\n  const res = await fetch(url)\n  if (!res.ok) throw new Error(\"Failed to fetch menu\")\n  return res.json()\n}\n\nexport function useMenu(weekType?: \"current\" | \"next\") {\n  const url = weekType ? `/api/menu?week=${weekType}` : \"/api/menu\"\n\n  const { data, error, isLoading, mutate } = useSWR<MenuData>(url, fetcher, {\n    revalidateOnFocus: false,\n    revalidateOnReconnect: true,\n    dedupingInterval: 60000,\n    // Убран fallbackData - не показываем заглушки\n  })\n\n  // Пустые объекты если данные еще не загружены\n  const emptyMeals: Record<string, Meal[]> = {\n    breakfast: [],\n    lunch_salad: [],\n    lunch_soup: [],\n    lunch_main: [],\n    dinner_salad: [],\n    dinner_soup: [],\n    dinner_main: [],\n    garnish: [],\n  }\n\n  const emptyExtras: Record<string, ExtraItem[]> = {\n    drink: [],\n    sauce: [],\n    dessert: [],\n    snack: [],\n  }\n\n  return {\n    meals: data?.meals || emptyMeals,\n    extras: data?.extras || emptyExtras,\n    deliveryZones: data?.deliveryZones || [],\n    deliveryTimes: data?.deliveryTimes || [],\n    isLoading,\n    isError: error,\n    source: data?.source || \"loading\",\n    refresh: mutate,\n  }\n}\n\n// Хук для получения меню конкретной недели\nexport function useWeeklyMenu(weekType: \"current\" | \"next\") {\n  return useMenu(weekType)\n}\n\n// Хук для получения всего меню (обе недели)\nexport function useFullMenu() {\n  return useMenu()\n}\n"],"names":[],"mappings":";;;;;;;;AAEA;;AAFA;;AAaA,MAAM,UAAU,OAAO;IACrB,MAAM,MAAM,MAAM,MAAM;IACxB,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEO,SAAS,QAAQ,QAA6B;;IACnD,MAAM,MAAM,WAAW,CAAC,eAAe,EAAE,UAAU,GAAG;IAEtD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,IAAA,4KAAM,EAAW,KAAK,SAAS;QACxE,mBAAmB;QACnB,uBAAuB;QACvB,kBAAkB;IAEpB;IAEA,8CAA8C;IAC9C,MAAM,aAAqC;QACzC,WAAW,EAAE;QACb,aAAa,EAAE;QACf,YAAY,EAAE;QACd,YAAY,EAAE;QACd,cAAc,EAAE;QAChB,aAAa,EAAE;QACf,aAAa,EAAE;QACf,SAAS,EAAE;IACb;IAEA,MAAM,cAA2C;QAC/C,OAAO,EAAE;QACT,OAAO,EAAE;QACT,SAAS,EAAE;QACX,OAAO,EAAE;IACX;IAEA,OAAO;QACL,OAAO,MAAM,SAAS;QACtB,QAAQ,MAAM,UAAU;QACxB,eAAe,MAAM,iBAAiB,EAAE;QACxC,eAAe,MAAM,iBAAiB,EAAE;QACxC;QACA,SAAS;QACT,QAAQ,MAAM,UAAU;QACxB,SAAS;IACX;AACF;GAvCgB;;QAG6B,4KAAM;;;AAuC5C,SAAS,cAAc,QAA4B;;IACxD,OAAO,QAAQ;AACjB;IAFgB;;QACP;;;AAIF,SAAS;;IACd,OAAO;AACT;IAFgB;;QACP"}},
    {"offset": {"line": 1439, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Image from \"next/image\"\nimport { Calendar } from \"@/components/calendar\"\nimport { OrderModal } from \"@/components/order-modal\"\nimport { OrderHistory } from \"@/components/order-history\"\nimport { AuthModal } from \"@/components/auth-modal\"\nimport { AppMenu } from \"@/components/app-menu\"\nimport { ProfileModal } from \"@/components/profile-modal\"\nimport { PaymentModal } from \"@/components/payment-modal\"\nimport { ReviewModal } from \"@/components/review-modal\"\nimport { WarningDialog } from \"@/components/warning-dialog\"\nimport { Preloader } from \"@/components/preloader\"\nimport { DailyStatus } from \"@/components/daily-status\"\nimport { FreshSection } from \"@/components/fresh-section\"\nimport { DishSmartModal } from \"@/components/dish-smart-modal\"\nimport { Button } from \"@/components/ui/button\"\nimport { CalendarIcon, History, LogOut, User, Zap, LogIn } from \"lucide-react\"\nimport { isMealAvailable, isExtraAvailable } from \"@/lib/meals-data\"\nimport type { Order, Person, DayMeals, Extra, UserProfile, Review } from \"@/lib/types\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { getAvailableDatesForOrdering, canOrderForDate } from \"@/lib/menu-utils\"\nimport { getDay, addDays } from \"date-fns\"\n\nconst formatDateKey = (date: Date): string => {\n  return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, \"0\")}-${date.getDate().toString().padStart(2, \"0\")}`\n}\n\nconst parseDateKey = (dateKey: string): Date => {\n  const [year, month, day] = dateKey.split(\"-\").map(Number)\n  return new Date(year, month - 1, day)\n}\n\nconst toDate = (value: Date | string): Date => {\n  if (value instanceof Date) return value\n  if (typeof value === \"string\") {\n    if (value.includes(\"T\")) return new Date(value)\n    if (value.includes(\"-\")) return parseDateKey(value)\n  }\n  return new Date(value)\n}\n\nconst getDateTimestamp = (value: Date | string): number => {\n  return toDate(value).getTime()\n}\n\nconst serializeOrders = (orders: Order[]): string => {\n  return JSON.stringify(\n    orders.map((o) => ({\n      ...o,\n      startDate: formatDateKey(toDate(o.startDate)),\n    })),\n  )\n}\n\nconst deserializeOrders = (json: string): Order[] => {\n  try {\n    const parsed = JSON.parse(json)\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n    const threeMonthsAgo = new Date(today)\n    threeMonthsAgo.setMonth(threeMonthsAgo.getMonth() - 3)\n\n    return parsed\n      .map((o: any) => ({\n        ...o,\n        startDate: toDate(o.startDate),\n        paid: o.paid ?? false,\n      }))\n      .filter((o: Order) => {\n        const orderDate = toDate(o.startDate)\n        return orderDate >= threeMonthsAgo\n      })\n  } catch {\n    return []\n  }\n}\n\n// Используем функцию из menu-utils.ts для получения доступных дат\nconst getAvailableDates = (): Date[] => {\n  return getAvailableDatesForOrdering().map((item) => item.date)\n}\n\nconst filterAvailableItems = (order: Order): Order => {\n  const filteredPersons: Person[] = order.persons.map((person) => {\n    const filterDayMeals = (meals: DayMeals): DayMeals => {\n      return {\n        breakfast: {\n          dish: meals.breakfast?.dish && isMealAvailable(meals.breakfast.dish.name) ? meals.breakfast.dish : null,\n        },\n        lunch: {\n          salad: meals.lunch?.salad && isMealAvailable(meals.lunch.salad.name) ? meals.lunch.salad : null,\n          soup: meals.lunch?.soup && isMealAvailable(meals.lunch.soup.name) ? meals.lunch.soup : null,\n          main: meals.lunch?.main && isMealAvailable(meals.lunch.main.name) ? meals.lunch.main : null,\n        },\n        dinner: {\n          salad: meals.dinner?.salad && isMealAvailable(meals.dinner.salad.name) ? meals.dinner.salad : null,\n          soup: meals.dinner?.soup && isMealAvailable(meals.dinner.soup.name) ? meals.dinner.soup : null,\n          main: meals.dinner?.main && isMealAvailable(meals.dinner.main.name) ? meals.dinner.main : null,\n        },\n      }\n    }\n\n    return {\n      ...person,\n      day1: filterDayMeals(person.day1),\n      day2: filterDayMeals(person.day2),\n    }\n  })\n\n  const filteredExtras: Extra[] = (order.extras || []).filter((extra) => isExtraAvailable(extra.name))\n\n  return {\n    ...order,\n    persons: filteredPersons,\n    extras: filteredExtras,\n  }\n}\n\nconst calculateOrderTotal = (order: Order): number => {\n  let total = 0\n  order.persons.forEach((person) => {\n    ;[\"day1\", \"day2\"].forEach((day) => {\n      const dayMeals = person[day as \"day1\" | \"day2\"]\n\n      if (dayMeals.breakfast?.dish) {\n        const dish = dayMeals.breakfast.dish\n        total += dish.price * (dish.portion || 1)\n        if (dish.garnish) {\n          total += dish.garnish.price * (dish.garnish.portion || 1)\n        }\n      }\n\n      if (dayMeals.lunch) {\n        if (dayMeals.lunch.salad) {\n          total += dayMeals.lunch.salad.price * (dayMeals.lunch.salad.portion || 1)\n        }\n        if (dayMeals.lunch.soup) {\n          total += dayMeals.lunch.soup.price * (dayMeals.lunch.soup.portion || 1)\n        }\n        if (dayMeals.lunch.main) {\n          const main = dayMeals.lunch.main\n          total += main.price * (main.portion || 1)\n          if (main.garnish) {\n            total += main.garnish.price * (main.garnish.portion || 1)\n          }\n        }\n      }\n\n      if (dayMeals.dinner) {\n        if (dayMeals.dinner.salad) {\n          total += dayMeals.dinner.salad.price * (dayMeals.dinner.salad.portion || 1)\n        }\n        if (dayMeals.dinner.soup) {\n          total += dayMeals.dinner.soup.price * (dayMeals.dinner.soup.portion || 1)\n        }\n        if (dayMeals.dinner.main) {\n          const main = dayMeals.dinner.main\n          total += main.price * (main.portion || 1)\n          if (main.garnish) {\n            total += main.garnish.price * (main.garnish.portion || 1)\n          }\n        }\n      }\n    })\n  })\n  order.extras?.forEach((extra) => {\n    total += extra.price * extra.quantity\n  })\n  return total\n}\n\nconst calculateOrderTotalForHistory = (order: Order): number => {\n  let total = 0\n  order.persons.forEach((person) => {\n    ;[\"day1\", \"day2\"].forEach((day) => {\n      const dayMeals = person[day as \"day1\" | \"day2\"]\n\n      if (dayMeals.breakfast?.dish) {\n        const dish = dayMeals.breakfast.dish\n        total += dish.price * (dish.portion || 1)\n        if (dish.garnish) {\n          total += dish.garnish.price * (dish.garnish.portion || 1)\n        }\n      }\n\n      if (dayMeals.lunch) {\n        if (dayMeals.lunch.salad) {\n          total += dayMeals.lunch.salad.price * (dayMeals.lunch.salad.portion || 1)\n        }\n        if (dayMeals.lunch.soup) {\n          total += dayMeals.lunch.soup.price * (dayMeals.lunch.soup.portion || 1)\n        }\n        if (dayMeals.lunch.main) {\n          const main = dayMeals.lunch.main\n          total += main.price * (main.portion || 1)\n          if (main.garnish) {\n            total += main.garnish.price * (main.garnish.portion || 1)\n          }\n        }\n      }\n\n      if (dayMeals.dinner) {\n        if (dayMeals.dinner.salad) {\n          total += dayMeals.dinner.salad.price * (dayMeals.dinner.salad.portion || 1)\n        }\n        if (dayMeals.dinner.soup) {\n          total += dayMeals.dinner.soup.price * (dayMeals.dinner.soup.portion || 1)\n        }\n        if (dayMeals.dinner.main) {\n          const main = dayMeals.dinner.main\n          total += main.price * (main.portion || 1)\n          if (main.garnish) {\n            total += main.garnish.price * (main.garnish.portion || 1)\n          }\n        }\n      }\n    })\n  })\n  order.extras?.forEach((extra) => {\n    total += extra.price * extra.quantity\n  })\n  return total\n}\n\nexport default function Home() {\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null)\n  const [orders, setOrders] = useState<Order[]>([])\n  const [view, setView] = useState<\"calendar\" | \"history\">(\"calendar\")\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [currentUser, setCurrentUser] = useState<string | null>(null)\n  const [showProfile, setShowProfile] = useState(false)\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null)\n  const [paymentOrder, setPaymentOrder] = useState<{ order: Order; total: number } | null>(null)\n  const [reviews, setReviews] = useState<Review[]>([])\n  const [reviewOrder, setReviewOrder] = useState<Order | null>(null)\n  const [showAuthModal, setShowAuthModal] = useState(false)\n  const [pendingCheckout, setPendingCheckout] = useState<{ order: Order; total: number } | null>(null)\n  const [selectedDish, setSelectedDish] = useState<{\n    dish: { name: string; image: string; price: number; description?: string }\n    availableDate: Date\n  } | null>(null)\n  const { toast } = useToast()\n  \n  // Warning dialog state\n  const [warningDialog, setWarningDialog] = useState<{\n    open: boolean\n    title: string\n    description: string\n    variant?: \"warning\" | \"error\" | \"info\"\n    onConfirm?: () => void\n  }>({\n    open: false,\n    title: \"\",\n    description: \"\",\n    variant: \"warning\",\n  })\n  \n  const showWarning = (title: string, description: string, variant: \"warning\" | \"error\" | \"info\" = \"warning\", onConfirm?: () => void) => {\n    setWarningDialog({\n      open: true,\n      title,\n      description,\n      variant,\n      onConfirm,\n    })\n  }\n  \n  const closeWarning = () => {\n    setWarningDialog((prev) => {\n      if (prev.onConfirm) {\n        prev.onConfirm()\n      }\n      return { ...prev, open: false }\n    })\n  }\n\n  useEffect(() => {\n    const user = localStorage.getItem(\"currentUser\")\n    if (user) {\n      setIsAuthenticated(true)\n      setCurrentUser(user)\n      const savedOrders = localStorage.getItem(`orders_${user}`)\n      if (savedOrders) {\n        setOrders(deserializeOrders(savedOrders))\n      }\n      const savedProfile = localStorage.getItem(`profile_${user}`)\n      if (savedProfile) {\n        const profile = JSON.parse(savedProfile)\n        setUserProfile(profile)\n        \n        // Синхронизируем заказы из базы данных для получения номеров заказов\n        if (profile.id) {\n          fetch(`/api/orders?userId=${profile.id}`)\n            .then((res) => res.json())\n            .then((data) => {\n              if (data.orders && Array.isArray(data.orders)) {\n                // Обновляем заказы с номерами из базы данных\n                setOrders((prevOrders) => {\n                  const updatedOrders = prevOrders.map((localOrder) => {\n                    // Ищем соответствующий заказ в базе по id или дате\n                    const dbOrder = data.orders.find(\n                      (db: any) =>\n                        (localOrder.id && db.Id === localOrder.id) ||\n                        (db.start_date === formatDateKey(toDate(localOrder.startDate)))\n                    )\n                    \n                    if (dbOrder && dbOrder.order_number && !localOrder.orderNumber) {\n                      // Обновляем номер заказа из базы данных\n                      return {\n                        ...localOrder,\n                        id: dbOrder.Id,\n                        orderNumber: dbOrder.order_number,\n                      }\n                    }\n                    return localOrder\n                  })\n                  \n                  // Сохраняем обновленные заказы в localStorage\n                  localStorage.setItem(`orders_${user}`, serializeOrders(updatedOrders))\n                  return updatedOrders\n                })\n              }\n            })\n            .catch((error) => {\n              console.error(\"Failed to sync orders from database:\", error)\n            })\n        }\n      }\n      const savedReviews = localStorage.getItem(`reviews_${user}`)\n      if (savedReviews) {\n        setReviews(JSON.parse(savedReviews))\n      }\n    } else {\n      const guestOrders = localStorage.getItem(\"guest_orders\")\n      if (guestOrders) {\n        setOrders(deserializeOrders(guestOrders))\n      }\n    }\n  }, [])\n\n  // Helper: Check if there's a delivery (order start date) on this date\n  const hasDeliveryForDate = (date: Date) => {\n    const checkDate = new Date(date)\n    checkDate.setHours(0, 0, 0, 0)\n    \n    return orders.some(order => {\n      const deliveryDate = new Date(order.startDate)\n      deliveryDate.setHours(0, 0, 0, 0)\n      return checkDate.getTime() === deliveryDate.getTime()\n    })\n  }\n\n  // Helper: Check if there's food (eating days: day1 and day2 after delivery)\n  const hasFoodForDate = (date: Date) => {\n    const checkDate = new Date(date)\n    checkDate.setHours(0, 0, 0, 0)\n    \n    return orders.some(order => {\n      const deliveryDate = new Date(order.startDate)\n      deliveryDate.setHours(0, 0, 0, 0)\n      \n      const day1 = new Date(deliveryDate)\n      day1.setDate(day1.getDate() + 1)\n      \n      const day2 = new Date(deliveryDate)\n      day2.setDate(day2.getDate() + 2)\n      \n      return checkDate.getTime() === day1.getTime() || checkDate.getTime() === day2.getTime()\n    })\n  }\n\n  // Helper: Check if this date is the last day of food (day2) for any order\n  const isLastDayOfAnyOrder = (date: Date) => {\n    const checkDate = new Date(date)\n    checkDate.setHours(0, 0, 0, 0)\n    \n    return orders.some(order => {\n      const deliveryDate = new Date(order.startDate)\n      deliveryDate.setHours(0, 0, 0, 0)\n      \n      // day2 is the last eating day for this order\n      const day2 = new Date(deliveryDate)\n      day2.setDate(day2.getDate() + 2)\n      day2.setHours(0, 0, 0, 0)\n      \n      return checkDate.getTime() === day2.getTime()\n    })\n  }\n\n  // Helper: Check if there's food on the next day (chain continues without gap)\n  // Plus button should show if there's NO food on next day (gap exists)\n  const hasNextOrder = (date: Date) => {\n    const checkDate = new Date(date)\n    checkDate.setHours(0, 0, 0, 0)\n    \n    // PRIORITY 1: Check if there's delivery on this day (new order continues chain)\n    if (hasDeliveryForDate(date)) {\n      return true\n    }\n    \n    // PRIORITY 2: Check if there's FOOD on the next day (no gap - chain continues)\n    // If there's food on next day, the chain continues. If no food, there's a gap and plus should show\n    const nextDay = new Date(checkDate)\n    nextDay.setDate(nextDay.getDate() + 1)\n    nextDay.setHours(0, 0, 0, 0)\n    \n    return hasFoodForDate(nextDay)\n  }\n\n  // Helper: Check if yellow plus button should be shown (last day of any order with food, no delivery, no next order)\n  const shouldShowYellowPlus = (date: Date) => {\n    const hasFood = hasFoodForDate(date)\n    const isLastDayOfOrder = isLastDayOfAnyOrder(date)\n    const hasDelivery = hasDeliveryForDate(date)\n    const hasNextOrderForLastDay = hasNextOrder(date)\n    \n    return hasFood && isLastDayOfOrder && !hasDelivery && !hasNextOrderForLastDay\n  }\n\n  const handleDateClick = (date: Date) => {\n    const isSaturday = getDay(date) === 6\n    \n    // Проверяем, есть ли заказ на эту дату\n    const order = orders.find((order) => {\n      const orderDate = new Date(order.startDate)\n      return (\n        orderDate.getDate() === date.getDate() &&\n        orderDate.getMonth() === date.getMonth() &&\n        orderDate.getFullYear() === date.getFullYear()\n      )\n    })\n    \n    // Обработка субботы\n    if (isSaturday) {\n      const hasYellowPlus = shouldShowYellowPlus(date)\n      \n      if (hasYellowPlus) {\n        // Суббота + есть желтый плюс → показать предупреждение и переключить на воскресенье\n        const sunday = addDays(date, 1)\n        showWarning(\n          \"Доставка в воскресенье\",\n          \"Доставка ближайшая возможна только в воскресенье, потому что кухня отдыхает по субботам. Заказ будет оформлен на воскресенье.\",\n          \"warning\",\n          () => {\n            setSelectedDate(sunday)\n          }\n        )\n        return\n      } else {\n        // Суббота + нет желтого плюса → показать ошибку про кухню\n        showWarning(\n          \"Кухня отдыхает\",\n          \"На субботу заказ невозможен, потому что кухня отдыхает. Выберите другую дату.\",\n          \"error\"\n        )\n        return\n      }\n    }\n    \n    // Проверяем, есть ли еда на эту дату (от предыдущего заказа)\n    const hasFood = hasFoodForDate(date)\n    \n    // Если есть еда от предыдущего заказа, но нет заказа на эту дату\n    // И дата недоступна для заказа (прошла или вне диапазона) - показать сообщение\n    if (hasFood && !order && !canOrderForDate(date)) {\n      showWarning(\n        \"Меню еще не обновлено\",\n        \"На эту дату есть еда от предыдущего заказа, но пока нельзя оформить новый заказ. Пожалуйста, дождитесь обновления меню.\",\n        \"info\"\n      )\n      return\n    }\n    \n    // Открываем модальное окно если:\n    // 1. Есть существующий заказ на эту дату (можно просмотреть/изменить)\n    // 2. Можно заказать на эту дату (даже если есть еда от предыдущего заказа - можно перезаказать)\n    if (order || canOrderForDate(date)) {\n      setSelectedDate(date)\n    } else {\n      showWarning(\n        \"Дата недоступна\",\n        \"На эту дату нельзя оформить заказ. Выберите другую дату.\",\n        \"error\"\n      )\n    }\n  }\n\n  const handleCloseModal = () => {\n    setSelectedDate(null)\n  }\n\n  const handleSaveOrder = async (order: Order) => {\n    const user = localStorage.getItem(\"currentUser\")\n    const orderTimestamp = getDateTimestamp(order.startDate)\n    const existingOrder = orders.find((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n    \n    console.log(\"🔵 handleSaveOrder вызван:\", {\n      isAuthenticated,\n      hasUserProfile: !!userProfile,\n      userId: userProfile?.id,\n      hasExistingOrder: !!existingOrder?.id,\n    })\n    \n    // Если заказ существует и имеет id, и пользователь авторизован, обновляем через API\n    if (existingOrder?.id && isAuthenticated && userProfile?.id) {\n      try {\n        // Вычисляем итоговую сумму заказа\n        const total = calculateOrderTotal(order)\n        const updatedOrder: Order = {\n          ...order,\n          id: existingOrder.id,\n          orderNumber: existingOrder.orderNumber,\n          subtotal: total,\n          total: total,\n        }\n        \n        const response = await fetch(`/api/orders/${existingOrder.id}`, {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ order: updatedOrder }),\n        })\n        \n        if (!response.ok) {\n          throw new Error(\"Failed to update order\")\n        }\n        \n        const result = await response.json()\n        \n        // Обновляем заказ в состоянии с данными из API\n        setOrders((prev) => {\n          const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n          const newOrders = [\n            ...filtered,\n            {\n              ...updatedOrder,\n              orderNumber: result.orderNumber || existingOrder.orderNumber || updatedOrder.orderNumber, // Сохраняем номер заказа из ответа API\n              startDate: toDate(updatedOrder.startDate),\n              paid: updatedOrder.paid ?? false,\n            },\n          ]\n          if (user) {\n            localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n          }\n          return newOrders\n        })\n        \n        toast({\n          title: \"Заказ обновлен\",\n          description: \"Изменения успешно сохранены\",\n          duration: 3000,\n        })\n      } catch (error) {\n        console.error(\"Failed to update order:\", error)\n        toast({\n          title: \"Ошибка\",\n          description: \"Не удалось обновить заказ. Попробуйте еще раз.\",\n          variant: \"destructive\",\n          duration: 5000,\n        })\n        return\n      }\n    } else if (isAuthenticated && userProfile?.id) {\n      // Создаем новый заказ через API\n      console.log(\"✅ Условие для создания заказа выполнено:\", {\n        isAuthenticated,\n        hasUserProfile: !!userProfile,\n        userId: userProfile?.id,\n        sendingToServer: true,\n      })\n      try {\n        const total = calculateOrderTotal(order)\n        const newOrder: Order = {\n          ...order,\n          subtotal: total,\n          total: total,\n        }\n        \n        console.log(\"📤 Отправка заказа на сервер:\", {\n          personsCount: newOrder.persons?.length,\n          extrasCount: newOrder.extras?.length,\n          userId: userProfile.id,\n        })\n        \n        const response = await fetch(\"/api/orders\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ order: newOrder, userId: userProfile.id }),\n        })\n        \n        console.log(\"📥 Ответ сервера:\", response.status, response.statusText)\n        \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({ error: \"Unknown error\" }))\n          console.error(\"❌ Ошибка при создании заказа:\", errorData)\n          throw new Error(errorData.error || \"Failed to create order\")\n        }\n        \n        const result = await response.json()\n        console.log(\"✅ Результат создания заказа:\", result)\n        \n        // Проверяем, что номер заказа получен\n        console.log(\"Order creation result:\", result)\n        if (!result.orderNumber) {\n          console.warn(\"⚠️ Order number not received from API:\", result)\n          // Пытаемся получить номер заказа из базы данных\n          if (result.orderId) {\n            try {\n              const fetchResponse = await fetch(`/api/orders?userId=${userProfile.id}`)\n              const fetchData = await fetchResponse.json()\n              const dbOrder = fetchData.orders?.find((o: any) => o.Id === result.orderId)\n              if (dbOrder?.order_number) {\n                result.orderNumber = dbOrder.order_number\n                console.log(\"✅ Retrieved order number from DB:\", result.orderNumber)\n              }\n            } catch (error) {\n              console.error(\"Failed to fetch order number:\", error)\n            }\n          }\n        }\n        \n        // Обязательно проверяем наличие номера заказа\n        if (!result.orderNumber) {\n          console.error(\"❌ CRITICAL: Order number is missing from API response!\", result)\n          // Генерируем номер заказа на клиенте как fallback\n          const fallbackOrderNumber = `ORD-${new Date().toISOString().slice(0, 10).replace(/-/g, \"\")}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`\n          result.orderNumber = fallbackOrderNumber\n          console.warn(\"⚠️ Using fallback order number:\", fallbackOrderNumber)\n        }\n        \n        // Обновляем заказ в состоянии с id из API\n        const savedOrder: Order = {\n          ...newOrder,\n          id: result.orderId,\n          orderNumber: result.orderNumber, // Гарантируем, что номер заказа есть\n          startDate: toDate(newOrder.startDate),\n          paid: newOrder.paid ?? false,\n        }\n        \n        console.log(\"💾 Saving order to state:\", { \n          id: savedOrder.id, \n          orderNumber: savedOrder.orderNumber, \n          startDate: savedOrder.startDate,\n          hasOrderNumber: !!savedOrder.orderNumber,\n          orderNumberType: typeof savedOrder.orderNumber\n        })\n        \n        if (!savedOrder.orderNumber) {\n          console.error(\"❌ FATAL: Order number is still missing after all checks!\", savedOrder)\n        }\n        \n        setOrders((prev) => {\n          const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n          const newOrders = [...filtered, savedOrder]\n          \n          // Дополнительная проверка перед сохранением\n          const orderToSave = newOrders.find(o => o.id === savedOrder.id)\n          if (orderToSave && !orderToSave.orderNumber) {\n            console.error(\"❌ Order number lost during state update!\", orderToSave)\n            orderToSave.orderNumber = result.orderNumber\n          }\n          \n          if (user) {\n            const serialized = serializeOrders(newOrders)\n            localStorage.setItem(`orders_${user}`, serialized)\n            \n            // Проверяем после сериализации\n            const deserialized = deserializeOrders(serialized)\n            const checkOrder = deserialized.find(o => o.id === savedOrder.id)\n            console.log(\"✅ Saved to localStorage, orders count:\", newOrders.length)\n            console.log(\"🔍 Verification - saved order after serialize/deserialize:\", { \n              id: checkOrder?.id, \n              orderNumber: checkOrder?.orderNumber,\n              hasOrderNumber: !!checkOrder?.orderNumber,\n              allFields: Object.keys(checkOrder || {})\n            })\n            \n            if (checkOrder && !checkOrder.orderNumber) {\n              console.error(\"❌ Order number lost during serialization!\", checkOrder)\n              // Принудительно восстанавливаем номер заказа\n              checkOrder.orderNumber = result.orderNumber\n              // Обновляем localStorage с исправленным заказом\n              const fixedOrders = newOrders.map(o => \n                o.id === checkOrder.id ? { ...o, orderNumber: result.orderNumber } : o\n              )\n              localStorage.setItem(`orders_${user}`, serializeOrders(fixedOrders))\n              // Обновляем состояние\n              setTimeout(() => {\n                setOrders(fixedOrders)\n              }, 100)\n            }\n          }\n          \n          // Финальная проверка - убеждаемся, что номер заказа есть\n          const finalCheck = newOrders.find(o => o.id === savedOrder.id)\n          if (finalCheck && !finalCheck.orderNumber && result.orderNumber) {\n            console.warn(\"⚠️ Fixing missing order number in state...\")\n            finalCheck.orderNumber = result.orderNumber\n            if (user) {\n              localStorage.setItem(`orders_${user}`, serializeOrders(newOrders.map(o => \n                o.id === finalCheck.id ? finalCheck : o\n              )))\n            }\n          }\n          \n          return newOrders\n        })\n        \n        toast({\n          title: \"Заказ создан\",\n          description: result.orderNumber \n            ? `Заказ № ${result.orderNumber} успешно оформлен` \n            : \"Заказ успешно оформлен\",\n          duration: 5000,\n        })\n      } catch (error) {\n        console.error(\"❌ Ошибка при создании заказа:\", error)\n        toast({\n          title: \"Ошибка\",\n          description: error instanceof Error ? error.message : \"Не удалось создать заказ. Попробуйте еще раз.\",\n          variant: \"destructive\",\n          duration: 5000,\n        })\n      }\n    } else {\n      // Пользователь не авторизован или нет userProfile.id\n      const reason = !isAuthenticated \n        ? \"Пользователь не авторизован\" \n        : !userProfile \n          ? \"userProfile отсутствует\"\n          : !userProfile.id \n            ? \"userProfile.id отсутствует\" \n            : \"Неизвестная причина\"\n      \n      console.warn(\"⚠️ Заказ не создается через API, причина:\", {\n        isAuthenticated,\n        hasUserProfile: !!userProfile,\n        userId: userProfile?.id,\n        reason,\n        userProfileKeys: userProfile ? Object.keys(userProfile) : [],\n      })\n      \n      // Сохраняем только в localStorage (для гостей или если нет userId)\n      setOrders((prev) => {\n        const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n        const newOrders = [...filtered, { ...order, startDate: toDate(order.startDate), paid: order.paid ?? false }]\n        if (user) {\n          localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n        } else {\n          localStorage.setItem(\"guest_orders\", serializeOrders(newOrders))\n        }\n        return newOrders\n      })\n      \n      toast({\n        title: \"Заказ сохранен локально\",\n        description: !isAuthenticated \n          ? \"Войдите в систему, чтобы сохранить заказ на сервере\" \n          : \"Ошибка при создании заказа. Проверьте данные профиля.\",\n        variant: !isAuthenticated ? \"default\" : \"destructive\",\n        duration: 5000,\n      })\n    }\n    \n    setSelectedDate(null)\n  }\n  \n  // Удаляем дублирующий код - больше не нужен\n  /*\n  const handleSaveOrderOld = async (order: Order) => {\n    const user = localStorage.getItem(\"currentUser\")\n    const orderTimestamp = getDateTimestamp(order.startDate)\n    const existingOrder = orders.find((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n    \n    if (existingOrder?.id && isAuthenticated && userProfile?.id) {\n      // ... existing code ...\n    } else if (isAuthenticated && userProfile?.id) {\n      // ... existing code ...\n    } else {\n      // Сохраняем локально для неавторизованных пользователей\n      const updatedOrders = [...orders]\n      const index = updatedOrders.findIndex((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n      \n      if (index >= 0) {\n        updatedOrders[index] = { ...order, startDate: toDate(order.startDate) }\n      } else {\n        updatedOrders.push({ ...order, startDate: toDate(order.startDate) })\n      }\n      \n      setOrders(updatedOrders)\n      \n      const guestOrders = localStorage.getItem(\"guest_orders\")\n      if (guestOrders) {\n        const parsed = deserializeOrders(guestOrders)\n        const filtered = parsed.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n        localStorage.setItem(\"guest_orders\", serializeOrders([...filtered, { ...order, startDate: toDate(order.startDate) }]))\n      } else {\n        localStorage.setItem(\"guest_orders\", serializeOrders([{ ...order, startDate: toDate(order.startDate) }]))\n      }\n      \n      toast({\n        title: \"Заказ сохранен\",\n        description: \"Заказ сохранен локально. Войдите в систему, чтобы сохранить его на сервере.\",\n        duration: 3000,\n      })\n    }\n  }\n  \n  // Временная заглушка - удалить после проверки\n  const handleSaveOrderBackup = async (order: Order) => {\n    console.log(\"🔵 handleSaveOrder вызван:\", {\n      isAuthenticated,\n      hasUserProfile: !!userProfile,\n      userId: userProfile?.id,\n    })\n    \n    const user = localStorage.getItem(\"currentUser\")\n    const orderTimestamp = getDateTimestamp(order.startDate)\n    const existingOrder = orders.find((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n    \n    if (existingOrder?.id && isAuthenticated && userProfile?.id) {\n      try {\n        const total = calculateOrderTotal(order)\n        const updatedOrder: Order = {\n          ...order,\n          id: existingOrder.id,\n          orderNumber: existingOrder.orderNumber,\n          subtotal: total,\n          total: total,\n        }\n        \n        const response = await fetch(`/api/orders/${existingOrder.id}`, {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ order: updatedOrder }),\n        })\n        \n        if (!response.ok) {\n          throw new Error(\"Failed to update order\")\n        }\n        \n        const result = await response.json()\n        \n        setOrders((prev) => {\n          const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n          const newOrders = [\n            ...filtered,\n            {\n              ...updatedOrder,\n              orderNumber: result.orderNumber || existingOrder.orderNumber || updatedOrder.orderNumber,\n              startDate: toDate(updatedOrder.startDate),\n              paid: updatedOrder.paid ?? false,\n            },\n          ]\n          if (user) {\n            localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n          }\n          return newOrders\n        })\n        \n        toast({\n          title: \"Заказ обновлен\",\n          description: \"Изменения успешно сохранены\",\n          duration: 3000,\n        })\n      } catch (error) {\n        console.error(\"Failed to update order:\", error)\n        toast({\n          title: \"Ошибка\",\n          description: \"Не удалось обновить заказ. Попробуйте еще раз.\",\n          variant: \"destructive\",\n          duration: 5000,\n        })\n        return\n      }\n    } else if (isAuthenticated && userProfile?.id) {\n      try {\n        const total = calculateOrderTotal(order)\n        const newOrder: Order = {\n          ...order,\n          subtotal: total,\n          total: total,\n        }\n        \n        console.log(\"📤 Отправка заказа на сервер:\", {\n          personsCount: newOrder.persons?.length,\n          extrasCount: newOrder.extras?.length,\n          userId: userProfile.id,\n        })\n        \n        const response = await fetch(\"/api/orders\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ order: newOrder, userId: userProfile.id }),\n        })\n        \n        console.log(\"📥 Ответ сервера:\", response.status, response.statusText)\n        \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({ error: \"Unknown error\" }))\n          console.error(\"❌ Ошибка при создании заказа:\", errorData)\n          throw new Error(errorData.error || \"Failed to create order\")\n        }\n        \n        const result = await response.json()\n        console.log(\"✅ Результат создания заказа:\", result)\n        \n        // Проверяем, что номер заказа получен\n        console.log(\"Order creation result:\", result)\n        if (!result.orderNumber) {\n          console.warn(\"⚠️ Order number not received from API:\", result)\n          // Пытаемся получить номер заказа из базы данных\n          if (result.orderId) {\n            try {\n              const fetchResponse = await fetch(`/api/orders?userId=${userProfile.id}`)\n              const fetchData = await fetchResponse.json()\n              const dbOrder = fetchData.orders?.find((o: any) => o.Id === result.orderId)\n              if (dbOrder?.order_number) {\n                result.orderNumber = dbOrder.order_number\n                console.log(\"✅ Retrieved order number from DB:\", result.orderNumber)\n              }\n            } catch (error) {\n              console.error(\"Failed to fetch order number:\", error)\n            }\n          }\n        }\n        \n        // Обязательно проверяем наличие номера заказа\n        if (!result.orderNumber) {\n          console.error(\"❌ CRITICAL: Order number is missing from API response!\", result)\n          // Генерируем номер заказа на клиенте как fallback\n          const fallbackOrderNumber = `ORD-${new Date().toISOString().slice(0, 10).replace(/-/g, \"\")}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`\n          result.orderNumber = fallbackOrderNumber\n          console.warn(\"⚠️ Using fallback order number:\", fallbackOrderNumber)\n        }\n        \n        // Обновляем заказ в состоянии с id из API\n        const savedOrder: Order = {\n          ...newOrder,\n          id: result.orderId,\n          orderNumber: result.orderNumber, // Гарантируем, что номер заказа есть\n          startDate: toDate(newOrder.startDate),\n          paid: newOrder.paid ?? false,\n        }\n        \n  */\n\n  const handleCancelOrder = (startDate: Date) => {\n    const orderTimestamp = getDateTimestamp(startDate)\n    const orderToCancel = orders.find((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n    const wasPaid = orderToCancel?.paid && orderToCancel?.paymentMethod !== \"cash\"\n\n    setOrders((prev) => {\n      const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n      const user = localStorage.getItem(\"currentUser\")\n      if (user) {\n        localStorage.setItem(`orders_${user}`, serializeOrders(filtered))\n      } else {\n        localStorage.setItem(\"guest_orders\", serializeOrders(filtered))\n      }\n      return filtered\n    })\n    setSelectedDate(null)\n\n    if (wasPaid) {\n      showWarning(\n        \"Заказ отменен\",\n        \"Деньги вернутся на карту в течение 3 рабочих дней.\",\n        \"info\"\n      )\n    } else {\n      showWarning(\n        \"Заказ отменен\",\n        \"Заказ был успешно удален.\",\n        \"info\"\n      )\n    }\n  }\n\n  const handleMoveOrder = (fromDate: Date, toDateValue: Date) => {\n    const user = localStorage.getItem(\"currentUser\")\n    const fromTimestamp = getDateTimestamp(fromDate)\n    const toTimestamp = getDateTimestamp(toDateValue)\n\n    setOrders((prev) => {\n      const existingOrderOnTarget = prev.find((o) => getDateTimestamp(o.startDate) === toTimestamp)\n      if (existingOrderOnTarget) {\n        alert(\"На эту дату уже есть заказ. Сначала отмените его.\")\n        return prev\n      }\n\n      const newOrders = prev.map((o) => {\n        if (getDateTimestamp(o.startDate) === fromTimestamp) {\n          return { ...o, startDate: toDateValue }\n        }\n        return o\n      })\n\n      if (user) {\n        localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n      }\n      return newOrders\n    })\n  }\n\n  const handleRepeatOrder = (order: Order, targetDate: Date) => {\n    const filteredOrder = filterAvailableItems(order)\n    const newOrder: Order = {\n      ...filteredOrder,\n      startDate: targetDate,\n      delivered: false,\n      paid: false,\n    }\n    handleSaveOrder(newOrder)\n  }\n\n  const handlePayOrder = (order: Order, total: number) => {\n    if (!isAuthenticated) {\n      setPendingCheckout({ order, total })\n      setShowAuthModal(true)\n      return\n    }\n    // Для заказов с наличными открываем модальное окно заказа для смены способа оплаты\n    if (order.paymentMethod === \"cash\" && !order.paid) {\n      const orderDate = toDate(order.startDate)\n      setSelectedDate(orderDate)\n      return\n    }\n    // Для других заказов открываем модальное окно оплаты\n    setPaymentOrder({ order, total })\n  }\n\n  const handleMarkCashOrderAsPaid = async (order: Order) => {\n    if (!order.id || !isAuthenticated || !userProfile?.id) {\n      toast({\n        title: \"Ошибка\",\n        description: \"Не удалось отметить заказ как оплаченный\",\n        variant: \"destructive\",\n        duration: 5000,\n      })\n      return\n    }\n\n    try {\n      const response = await fetch(`/api/orders/${order.id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          paid: true,\n          paid_at: new Date().toISOString(),\n          status: \"paid\",\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error(\"Failed to mark order as paid\")\n      }\n\n      // Обновляем заказ в состоянии\n      const user = localStorage.getItem(\"currentUser\")\n      const orderTimestamp = getDateTimestamp(order.startDate)\n      \n      setOrders((prev) => {\n        const newOrders = prev.map((o) => {\n          if (getDateTimestamp(o.startDate) === orderTimestamp) {\n            return { ...o, paid: true, paidAt: new Date().toISOString() }\n          }\n          return o\n        })\n        if (user) {\n          localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n        }\n        return newOrders\n      })\n\n      toast({\n        title: \"Заказ оплачен\",\n        description: \"Заказ успешно отмечен как оплаченный\",\n        duration: 3000,\n      })\n    } catch (error) {\n      console.error(\"Failed to mark order as paid:\", error)\n      toast({\n        title: \"Ошибка\",\n        description: \"Не удалось отметить заказ как оплаченный. Попробуйте еще раз.\",\n        variant: \"destructive\",\n        duration: 5000,\n      })\n    }\n  }\n\n  const handlePaymentComplete = (order: Order, pointsUsed: number) => {\n    const user = localStorage.getItem(\"currentUser\")\n    const orderTimestamp = getDateTimestamp(order.startDate)\n    const total = calculateOrderTotal(order)\n\n    setOrders((prev) => {\n      const newOrders = prev.map((o) => {\n        if (getDateTimestamp(o.startDate) === orderTimestamp) {\n          return { ...o, paid: true, paidAt: new Date().toISOString() }\n        }\n        return o\n      })\n      if (user) {\n        localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n      }\n      return newOrders\n    })\n\n    if (userProfile) {\n      const loyaltyLevel =\n        userProfile.totalSpent >= 50000 ? \"gold\" : userProfile.totalSpent >= 20000 ? \"silver\" : \"bronze\"\n      const cashbackPercent = loyaltyLevel === \"gold\" ? 7 : loyaltyLevel === \"silver\" ? 5 : 3\n      const earnedPoints = Math.floor((total - pointsUsed) * (cashbackPercent / 100))\n\n      const updatedProfile: UserProfile = {\n        ...userProfile,\n        loyaltyPoints: userProfile.loyaltyPoints - pointsUsed + earnedPoints,\n        totalSpent: userProfile.totalSpent + total - pointsUsed,\n      }\n      setUserProfile(updatedProfile)\n      localStorage.setItem(`profile_${user}`, JSON.stringify(updatedProfile))\n    }\n\n    setPaymentOrder(null)\n  }\n\n  const handleReviewSubmit = (orderId: string, rating: number, text: string) => {\n    const user = localStorage.getItem(\"currentUser\")\n    const newReview: Review = {\n      orderId,\n      rating,\n      text,\n      createdAt: new Date().toISOString(),\n    }\n    setReviews((prev) => {\n      const newReviews = [...prev, newReview]\n      if (user) {\n        localStorage.setItem(`reviews_${user}`, JSON.stringify(newReviews))\n      }\n      return newReviews\n    })\n  }\n\n  const handleLogin = async (phone: string) => {\n    setIsAuthenticated(true)\n    setCurrentUser(phone)\n    localStorage.setItem(\"currentUser\", phone)\n\n    const guestOrdersStr = localStorage.getItem(\"guest_orders\")\n    const savedOrders = localStorage.getItem(`orders_${phone}`)\n\n    let userOrders: Order[] = []\n    if (savedOrders) {\n      userOrders = deserializeOrders(savedOrders)\n    }\n\n    let mergedCount = 0\n    let conflictCount = 0\n\n    if (guestOrdersStr) {\n      const guestOrdersList = deserializeOrders(guestOrdersStr)\n\n      guestOrdersList.forEach((guestOrder) => {\n        const guestTimestamp = getDateTimestamp(guestOrder.startDate)\n        const existingOrder = userOrders.find((o) => getDateTimestamp(o.startDate) === guestTimestamp)\n\n        if (existingOrder) {\n          conflictCount++\n          if (!existingOrder.paid) {\n            const index = userOrders.findIndex((o) => getDateTimestamp(o.startDate) === guestTimestamp)\n            userOrders[index] = guestOrder\n            mergedCount++\n          }\n        } else {\n          userOrders.push(guestOrder)\n          mergedCount++\n        }\n      })\n\n      localStorage.removeItem(\"guest_orders\")\n    }\n\n    setOrders(userOrders)\n    localStorage.setItem(`orders_${phone}`, serializeOrders(userOrders))\n\n    if (mergedCount > 0 || conflictCount > 0) {\n      let description = \"\"\n      if (mergedCount > 0 && conflictCount === 0) {\n        description = `${mergedCount} ${mergedCount === 1 ? \"заказ добавлен\" : \"заказа добавлено\"} в ваш аккаунт`\n      } else if (conflictCount > 0) {\n        description = `Некоторые даты уже заняты оплаченными заказами. Добавлено: ${mergedCount}`\n      }\n\n      toast({\n        title: \"Добро пожаловать!\",\n        description,\n        duration: 5000,\n      })\n    } else {\n      toast({\n        title: \"Добро пожаловать!\",\n        description: \"Вы успешно вошли в аккаунт\",\n        duration: 3000,\n      })\n    }\n\n    const savedReviews = localStorage.getItem(`reviews_${phone}`)\n    if (savedReviews) {\n      setReviews(JSON.parse(savedReviews))\n    }\n    const savedProfile = localStorage.getItem(`profile_${phone}`)\n    let profile: UserProfile\n    \n    if (savedProfile) {\n      try {\n        const parsed = JSON.parse(savedProfile)\n        if (parsed.address && !parsed.street) {\n          parsed.street = parsed.address\n          delete parsed.address\n        }\n        profile = parsed\n      } catch {\n        profile = {\n          phone,\n          name: \"\",\n          street: \"\",\n          building: \"\",\n          loyaltyPoints: 0,\n          totalSpent: 0,\n        }\n        localStorage.setItem(`profile_${phone}`, JSON.stringify(profile))\n      }\n    } else {\n      profile = {\n        phone,\n        name: \"\",\n        street: \"\",\n        building: \"\",\n        loyaltyPoints: 0,\n        totalSpent: 0,\n      }\n      localStorage.setItem(`profile_${phone}`, JSON.stringify(profile))\n    }\n    \n    // Создаем или обновляем пользователя в NocoDB\n    console.log(\"🔄 Синхронизация пользователя с базой данных...\", { phone, hasProfile: !!profile })\n    try {\n      const { fetchUserByPhone, createUser, updateUser } = await import(\"@/lib/nocodb\")\n      console.log(\"📡 Ищем пользователя в базе по телефону:\", phone)\n      const dbUser = await fetchUserByPhone(phone)\n      \n      if (dbUser) {\n        console.log(\"✅ Пользователь найден в базе:\", dbUser.Id)\n        // Пользователь существует, обновляем профиль из базы\n        profile.id = dbUser.Id\n        profile.name = dbUser.name || profile.name\n        profile.street = dbUser.street || profile.street\n        profile.building = dbUser.building || profile.building\n        profile.loyaltyPoints = typeof dbUser.loyalty_points === 'number' ? dbUser.loyalty_points : parseInt(String(dbUser.loyalty_points)) || 0\n        profile.totalSpent = typeof dbUser.total_spent === 'number' ? dbUser.total_spent : parseFloat(String(dbUser.total_spent)) || 0\n        console.log(\"✅ Профиль обновлен из базы, userProfile.id:\", profile.id)\n      } else {\n        console.log(\"⚠️ Пользователя нет в базе, создаем нового...\")\n        // Пользователя нет в базе, создаем\n        const newDbUser = await createUser({\n          phone,\n          name: profile.name || \"\",\n          loyalty_points: profile.loyaltyPoints || 0,\n          total_spent: profile.totalSpent || 0,\n        })\n        profile.id = newDbUser.Id\n        console.log(\"✅ Пользователь создан в базе данных:\", newDbUser.Id, \"userProfile.id установлен:\", profile.id)\n      }\n      \n      // Сохраняем обновленный профиль в localStorage\n      localStorage.setItem(`profile_${phone}`, JSON.stringify(profile))\n      console.log(\"💾 Профиль сохранен в localStorage с id:\", profile.id)\n    } catch (error) {\n      console.error(\"❌ Ошибка при синхронизации пользователя с базой:\", error)\n      console.error(\"Stack:\", error instanceof Error ? error.stack : \"No stack\")\n      // Продолжаем работу даже если не удалось синхронизировать с базой\n    }\n    \n    console.log(\"👤 Устанавливаем userProfile:\", { id: profile.id, phone: profile.phone, hasId: !!profile.id })\n    setUserProfile(profile)\n\n    setShowAuthModal(false)\n    if (pendingCheckout) {\n      setPaymentOrder(pendingCheckout)\n      setPendingCheckout(null)\n    }\n  }\n\n  const handleLogout = () => {\n    setIsAuthenticated(false)\n    setCurrentUser(null)\n    setOrders([])\n    setUserProfile(null)\n    setReviews([])\n    localStorage.removeItem(\"currentUser\")\n    setView(\"calendar\")\n    const guestOrders = localStorage.getItem(\"guest_orders\")\n    if (guestOrders) {\n      setOrders(deserializeOrders(guestOrders))\n    }\n  }\n\n  const handleProfileSave = (profile: UserProfile) => {\n    setUserProfile(profile)\n  }\n\n  const existingOrder = selectedDate\n    ? orders.find((o) => {\n        const orderStartDate = new Date(o.startDate)\n        orderStartDate.setHours(0, 0, 0, 0)\n\n        const checkDate = new Date(selectedDate)\n        checkDate.setHours(0, 0, 0, 0)\n\n        return orderStartDate.getTime() === checkDate.getTime()\n      })\n    : undefined\n\n  const availableDates = getAvailableDates()\n\n  // Handler for dish click from FreshSection\n  const handleDishClick = (dish: { name: string; image: string; price: number; description?: string }) => {\n    // Get available dates and pick a random one (or first available)\n    const dates = getAvailableDatesForOrdering()\n    if (dates.length > 0) {\n      // Pick a random date from available dates\n      const randomIndex = Math.floor(Math.random() * dates.length)\n      const selectedDate = dates[randomIndex].date\n      setSelectedDish({ dish, availableDate: selectedDate })\n    } else {\n      showWarning(\n        \"Нет доступных дат\",\n        \"К сожалению, сейчас нет доступных дат для заказа. Попробуйте позже.\",\n        \"info\"\n      )\n    }\n  }\n\n  // Handler for \"Go to Order\" button in DishSmartModal\n  const handleGoToOrder = (date: Date) => {\n    // Scroll to calendar section\n    const calendarElement = document.getElementById(\"calendar-section\")\n    if (calendarElement) {\n      calendarElement.scrollIntoView({ behavior: \"smooth\", block: \"start\" })\n    }\n    \n    // Set selected date and open order modal\n    setTimeout(() => {\n      setSelectedDate(date)\n    }, 300) // Small delay for smooth scroll\n  }\n\n  // Handler for \"Open Existing Order\" button\n  const handleOpenExistingOrder = (date: Date) => {\n    setSelectedDate(date)\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Preloader />\n      <div className=\"bg-white px-4 pt-12 pb-6 border-b-2 border-black safe-area-top\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-14 w-14 rounded-full border-2 border-black overflow-hidden flex items-center justify-center shrink-0\">\n              <Image \n                src=\"/OGFooDY логотип.png\" \n                alt=\"OGFooDY Logo\" \n                width={56} \n                height={56} \n                className=\"rounded-full object-cover\"\n                priority\n              />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-black text-black tracking-tight\">OGFooDY</h1>\n              <p className=\"text-black/80 text-xs font-bold\">домашняя еда на каждый день</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <AppMenu userPhone={currentUser || \"\"} />\n            {isAuthenticated ? (\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleLogout} className=\"text-black hover:bg-muted border-0\">\n                <LogOut className=\"w-5 h-5\" />\n              </Button>\n            ) : (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowAuthModal(true)}\n                className=\"text-black hover:bg-muted border-0\"\n              >\n                <LogIn className=\"w-4 h-4 mr-2\" />\n                Войти\n              </Button>\n            )}\n          </div>\n        </div>\n        {isAuthenticated ? (\n          <button\n            onClick={() => setShowProfile(true)}\n            className=\"flex items-center gap-2 text-black bg-muted rounded-xl px-3 py-2 w-full hover:bg-muted/80 transition-colors border-2 border-black\"\n          >\n            <User className=\"w-4 h-4\" />\n            <span className=\"text-sm font-bold flex-1 text-left\">{userProfile?.name || currentUser}</span>\n            {userProfile && userProfile.loyaltyPoints > 0 && (\n              <span className=\"text-xs bg-[#9D00FF] text-white px-2 py-0.5 rounded-lg font-black border-2 border-black\">{userProfile.loyaltyPoints} баллов</span>\n            )}\n          </button>\n        ) : (\n          <div className=\"flex items-center gap-2 text-black bg-muted rounded-xl px-3 py-2 w-full border-2 border-black\">\n            <User className=\"w-4 h-4\" />\n            <span className=\"text-sm font-bold\">Гость</span>\n            <span className=\"text-xs text-black/70 ml-auto font-medium\">Войдите для оформления заказа</span>\n          </div>\n        )}\n      </div>\n\n      <div className=\"px-4 py-4 -mt-4 bg-background rounded-t-3xl border-t-2 border-black relative z-10\">\n        <p className=\"text-muted-foreground text-sm mb-4\">\n          {view === \"calendar\" ? \"Выберите дату для заказа\" : \"История ваших заказов\"}\n        </p>\n\n        <div className=\"mb-4 flex gap-2\">\n          <Button\n            variant={view === \"calendar\" ? \"default\" : \"outline\"}\n            onClick={() => setView(\"calendar\")}\n            className=\"flex-1\"\n          >\n            <CalendarIcon className=\"w-4 h-4 mr-2\" />\n            Календарь\n          </Button>\n          <Button\n            variant={view === \"history\" ? \"default\" : \"outline\"}\n            onClick={() => setView(\"history\")}\n            className=\"flex-1\"\n            disabled={!isAuthenticated}\n          >\n            <History className=\"w-4 h-4 mr-2\" />\n            История\n          </Button>\n        </div>\n\n        {view === \"calendar\" ? (\n          <>\n            {/* Daily Status Widget */}\n            <div className=\"mb-6\">\n              <DailyStatus\n                orders={orders}\n                onOrderClick={() => {\n                  // Find the next available date for ordering\n                  const today = new Date()\n                  today.setHours(0, 0, 0, 0)\n                  const nextAvailable = availableDates.find((date) => {\n                    const checkDate = new Date(date)\n                    checkDate.setHours(0, 0, 0, 0)\n                    return checkDate.getTime() >= today.getTime()\n                  })\n                  if (nextAvailable) {\n                    handleDateClick(nextAvailable)\n                  } else {\n                    showWarning(\n                      \"Нет доступных дат\",\n                      \"К сожалению, сейчас нет доступных дат для заказа. Попробуйте позже.\",\n                      \"info\"\n                    )\n                  }\n                }}\n                onFoodCardClick={() => {\n                  // Open today's menu/order modal\n                  const today = new Date()\n                  today.setHours(0, 0, 0, 0)\n                  \n                  // Check if there's an order for today (delivery day)\n                  const todayOrder = orders.find((order) => {\n                    const orderDate = new Date(order.startDate)\n                    orderDate.setHours(0, 0, 0, 0)\n                    return orderDate.getTime() === today.getTime()\n                  })\n                  \n                  // If there's an order for today, open it directly\n                  if (todayOrder) {\n                    setSelectedDate(today)\n                  } else {\n                    // If there's food today but no order, we still want to show the modal\n                    // Find the order that provides food for today\n                    const foodOrder = orders.find((order) => {\n                      const deliveryDate = new Date(order.startDate)\n                      deliveryDate.setHours(0, 0, 0, 0)\n                      \n                      const day1 = new Date(deliveryDate)\n                      day1.setDate(day1.getDate() + 1)\n                      \n                      const day2 = new Date(deliveryDate)\n                      day2.setDate(day2.getDate() + 2)\n                      \n                      return today.getTime() === day1.getTime() || today.getTime() === day2.getTime()\n                    })\n                    \n                    // Open today's date - the modal should handle showing the food\n                    setSelectedDate(today)\n                  }\n                }}\n              />\n            </div>\n\n            {/* Calendar */}\n            <div id=\"calendar-section\" className=\"mb-8\">\n              <Calendar\n                orders={orders}\n                selectedDate={selectedDate}\n                onSelectDate={setSelectedDate}\n                onDateClick={handleDateClick}\n                onMoveOrder={handleMoveOrder}\n              />\n            </div>\n\n            {/* СВЕЖАК Section */}\n            <FreshSection onDishClick={handleDishClick} />\n          </>\n        ) : (\n          <OrderHistory\n            orders={orders}\n            onCancelOrder={handleCancelOrder}\n            onRepeatOrder={handleRepeatOrder}\n            onPayOrder={handlePayOrder}\n            onReviewOrder={(order) => setReviewOrder(order)}\n            availableDates={availableDates}\n            userProfile={userProfile}\n            reviews={reviews}\n          />\n        )}\n      </div>\n\n      <OrderModal\n        date={selectedDate || new Date()}\n        existingOrder={existingOrder}\n        onClose={() => {\n          setSelectedDate(null)\n        }}\n        onSave={handleSaveOrder}\n        onCancel={handleCancelOrder}\n        allOrders={orders}\n        open={!!selectedDate}\n        onPaymentSuccess={(order) => {\n          if (userProfile) {\n            const newPoints = Math.floor(calculateOrderTotalForHistory(order) * 0.05)\n            const updatedProfile = {\n              ...userProfile,\n              loyaltyPoints: userProfile.loyaltyPoints + newPoints,\n            }\n            setUserProfile(updatedProfile)\n            localStorage.setItem(\"user_profile\", JSON.stringify(updatedProfile))\n          }\n          const deliveryDate = new Date(order.startDate).toLocaleDateString(\"ru-RU\", { day: \"numeric\", month: \"short\" })\n          const description = order.paymentMethod === \"cash\"\n            ? `Доставка ${deliveryDate} в ${order.deliveryTime}. Оплата наличными курьеру.`\n            : `Оплата прошла успешно. Доставка ${deliveryDate} в ${order.deliveryTime}.`\n          \n          showWarning(\n            \"Заказ оформлен\",\n            description,\n            \"info\"\n          )\n        }}\n        userLoyaltyPoints={userProfile?.loyaltyPoints || 0}\n        isAuthenticated={isAuthenticated}\n        onRequestAuth={() => {\n          setPendingCheckout(true)\n          setShowAuthModal(true)\n        }}\n        userAddress={userProfile?.address}\n        userCity={userProfile?.city}\n      />\n\n      <AuthModal\n        open={showAuthModal}\n        onClose={() => {\n          setShowAuthModal(false)\n          setPendingCheckout(null)\n        }}\n        onLogin={handleLogin}\n        redirectAfterLogin={pendingCheckout ? \"checkout\" : null}\n      />\n\n      {showProfile && currentUser && (\n        <ProfileModal phone={currentUser} onClose={() => setShowProfile(false)} onSave={handleProfileSave} />\n      )}\n\n      {paymentOrder && (\n        <PaymentModal\n          order={paymentOrder.order}\n          total={paymentOrder.total}\n          userProfile={userProfile}\n          onClose={() => setPaymentOrder(null)}\n          onPaymentComplete={handlePaymentComplete}\n        />\n      )}\n\n      {reviewOrder && (\n        <ReviewModal order={reviewOrder} onClose={() => setReviewOrder(null)} onSubmit={handleReviewSubmit} />\n      )}\n\n      <WarningDialog\n        open={warningDialog.open}\n        onClose={closeWarning}\n        title={warningDialog.title}\n        description={warningDialog.description}\n        variant={warningDialog.variant}\n      />\n\n      {/* Dish Smart Modal */}\n      {selectedDish && (\n        <DishSmartModal\n          open={!!selectedDish}\n          onClose={() => setSelectedDish(null)}\n          dish={selectedDish.dish}\n          availableDate={selectedDish.availableDate}\n          orders={orders}\n          onGoToOrder={handleGoToOrder}\n          onOpenExistingOrder={handleOpenExistingOrder}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}