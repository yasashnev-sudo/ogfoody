{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/lib/nocodb.ts"],"sourcesContent":["// NocoDB API client - все запросы идут через внутренний API proxy\n// Токен никогда не попадает в браузер\n\n// Определяем базовый URL для API proxy\n// На сервере используем абсолютный URL, на клиенте - относительный\nconst getApiBaseUrl = () => {\n  if (typeof window !== \"undefined\") {\n    return \"/api/db\"\n  }\n  return null\n}\n\nfunction getNocoDBUrl(): string {\n  return process.env.NOCODB_URL || \"\"\n}\n\nfunction getNocoDBToken(): string {\n  return process.env.NOCODB_TOKEN || \"\"\n}\n\nfunction getTableId(tableName: string): string {\n  const tableIds: Record<string, string | undefined> = {\n    Meals: process.env.NOCODB_TABLE_MEALS,\n    Extras: process.env.NOCODB_TABLE_EXTRAS,\n    Delivery_Zones: process.env.NOCODB_TABLE_DELIVERY_ZONES,\n    Users: process.env.NOCODB_TABLE_USERS,\n    Orders: process.env.NOCODB_TABLE_ORDERS,\n    Order_Persons: process.env.NOCODB_TABLE_ORDER_PERSONS,\n    Order_Meals: process.env.NOCODB_TABLE_ORDER_MEALS,\n    Order_Extras: process.env.NOCODB_TABLE_ORDER_EXTRAS,\n    Promo_Codes: process.env.NOCODB_TABLE_PROMO_CODES,\n    Reviews: process.env.NOCODB_TABLE_REVIEWS,\n  }\n\n  return tableIds[tableName] || \"\"\n}\n\n// Проверяем конфигурацию динамически\nfunction validateNocoDBConfig(): { isValid: boolean; error?: string } {\n  const url = getNocoDBUrl()\n  const token = getNocoDBToken()\n  const mealsTable = process.env.NOCODB_TABLE_MEALS\n\n  if (!url || !token) {\n    return { isValid: false, error: \"NOCODB_URL or NOCODB_TOKEN not set\" }\n  }\n  if (!mealsTable) {\n    return { isValid: false, error: \"NOCODB_TABLE_MEALS not set\" }\n  }\n  return { isValid: true }\n}\n\nexport function isNocoDBConfigured(): boolean {\n  return validateNocoDBConfig().isValid\n}\n\n// Типы для NocoDB ответов\ninterface NocoDBResponse<T> {\n  list: T[]\n  pageInfo?: {\n    totalRows: number\n    page: number\n    pageSize: number\n    isFirstPage: boolean\n    isLastPage: boolean\n  }\n}\n\nfunction buildNocoDBUrl(tableName: string, params: Record<string, string> = {}): string {\n  const queryString = new URLSearchParams(params).toString()\n  let baseUrl = getNocoDBUrl().replace(/\\/$/, \"\")\n\n  if (!baseUrl.endsWith(\"/api/v2\")) {\n    baseUrl = `${baseUrl}/api/v2`\n  }\n\n  const tableId = getTableId(tableName)\n\n  if (!tableId) {\n    throw new Error(`TABLE_NOT_CONFIGURED:${tableName}`)\n  }\n\n  return `${baseUrl}/tables/${tableId}/records${queryString ? `?${queryString}` : \"\"}`\n}\n\n// Серверный fetch напрямую к NocoDB (для ISR)\nasync function serverFetch<T>(tableName: string, params: Record<string, string> = {}): Promise<T> {\n  const config = validateNocoDBConfig()\n  if (!config.isValid) {\n    throw new Error(`NocoDB is not configured: ${config.error}`)\n  }\n\n  const url = buildNocoDBUrl(tableName, params)\n  const token = getNocoDBToken()\n\n  const response = await fetch(url, {\n    headers: {\n      \"xc-token\": token,\n      \"Content-Type\": \"application/json\",\n    },\n    next: { revalidate: 3600 },\n  })\n\n  const text = await response.text()\n\n  if (!response.ok) {\n    if (text.includes(\"TABLE_NOT_FOUND\") || response.status === 404) {\n      throw new Error(`TABLE_NOT_FOUND:${tableName}`)\n    }\n    throw new Error(`NocoDB API error: ${response.status} - ${text}`)\n  }\n\n  try {\n    return JSON.parse(text)\n  } catch {\n    throw new Error(`NocoDB returned invalid JSON: ${text.substring(0, 100)}...`)\n  }\n}\n\n// Клиентский fetch через API proxy\nasync function clientFetch<T>(\n  tableName: string,\n  params: Record<string, string> = {},\n  options: RequestInit = {},\n): Promise<T> {\n  const queryString = new URLSearchParams(params).toString()\n  const url = `/api/db/${tableName}/records${queryString ? `?${queryString}` : \"\"}`\n\n  const response = await fetch(url, {\n    ...options,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...options.headers,\n    },\n  })\n\n  const text = await response.text()\n\n  if (!response.ok) {\n    if (text.includes(\"TABLE_NOT_FOUND\") || response.status === 404) {\n      throw new Error(`TABLE_NOT_FOUND:${tableName}`)\n    }\n    throw new Error(`API error: ${response.status} - ${text}`)\n  }\n\n  try {\n    return JSON.parse(text)\n  } catch {\n    throw new Error(`API returned invalid JSON: ${text.substring(0, 100)}...`)\n  }\n}\n\n// Универсальный fetch\nasync function nocoFetch<T>(\n  tableName: string,\n  params: Record<string, string> = {},\n  options: RequestInit = {},\n): Promise<T> {\n  const apiBaseUrl = getApiBaseUrl()\n\n  if (apiBaseUrl === null) {\n    return serverFetch<T>(tableName, params)\n  } else {\n    return clientFetch<T>(tableName, params, options)\n  }\n}\n\n// === MEALS ===\n\nexport interface NocoDBMeal {\n  Id: number\n  name: string\n  category: string\n  ingredients: string\n  description?: string\n  price: number | string\n  price_single?: number | string\n  price_medium?: number | string\n  price_large?: number | string\n  weight?: number | string\n  weight_single?: number | string\n  weight_medium?: number | string\n  weight_large?: number | string\n  image?: string\n  available?: boolean | string\n  needs_garnish?: boolean | string\n  calories?: number | string\n  protein?: number | string\n  fats?: number | string\n  carbs?: number | string\n  is_current_week?: boolean | string\n  is_next_week?: boolean | string\n}\n\nexport async function fetchMeals(weekFilter?: \"current\" | \"next\"): Promise<NocoDBMeal[]> {\n  try {\n    const params: Record<string, string> = {\n      limit: \"1000\",\n    }\n\n    const response = await nocoFetch<NocoDBResponse<NocoDBMeal>>(\"Meals\", params)\n    console.log(\n      `[v0] fetchMeals: got ${response.list?.length || 0} meals, first item:`,\n      JSON.stringify(response.list?.[0] || {}).substring(0, 200),\n    )\n    return response.list || []\n  } catch (error) {\n    if (error instanceof Error && error.message.startsWith(\"TABLE_NOT_FOUND\")) {\n      console.warn(\"Table Meals not found in NocoDB, returning empty array\")\n      return []\n    }\n    throw error\n  }\n}\n\n// === EXTRAS ===\n\nexport interface NocoDBExtra {\n  Id: number\n  name: string\n  category: string\n  ingredients?: string\n  description?: string\n  price: number | string\n  image?: string\n  available?: boolean | string\n  calories?: number | string\n  protein?: number | string\n  fats?: number | string\n  carbs?: number | string\n  weight?: number | string\n}\n\nexport async function fetchExtras(): Promise<NocoDBExtra[]> {\n  try {\n    const response = await nocoFetch<NocoDBResponse<NocoDBExtra>>(\"Extras\", {\n      limit: \"1000\",\n    })\n    console.log(\n      `[v0] fetchExtras: got ${response.list?.length || 0} extras, first item:`,\n      JSON.stringify(response.list?.[0] || {}).substring(0, 200),\n    )\n    return response.list || []\n  } catch (error) {\n    if (error instanceof Error && error.message.startsWith(\"TABLE_NOT_FOUND\")) {\n      console.warn(\"Table Extras not found in NocoDB, returning empty array\")\n      return []\n    }\n    throw error\n  }\n}\n\n// === DELIVERY ZONES ===\n\nexport interface NocoDBDeliveryZone {\n  Id: number\n  city: string\n  district?: string\n  delivery_fee: number | string\n  min_order_amount: number | string\n  is_available?: boolean | string\n  available_intervals?: string\n}\n\nexport async function fetchDeliveryZones(): Promise<NocoDBDeliveryZone[]> {\n  try {\n    const response = await nocoFetch<NocoDBResponse<NocoDBDeliveryZone>>(\"Delivery_Zones\", {\n      // where: \"(is_available,eq,true)\",\n    })\n    console.log(`[v0] fetchDeliveryZones: got ${response.list?.length || 0} zones, first item:`, response.list?.[0])\n    return response.list || []\n  } catch (error) {\n    if (error instanceof Error && error.message.startsWith(\"TABLE_NOT_FOUND\")) {\n      console.warn(\"Table Delivery_Zones not found in NocoDB, returning empty array\")\n      return []\n    }\n    throw error\n  }\n}\n\n// === USERS ===\n\nexport interface NocoDBUser {\n  Id: number\n  phone: string\n  password_hash?: string\n  name: string\n  additional_phone?: string\n  street?: string\n  building?: string\n  building_section?: string\n  apartment?: string\n  entrance?: string\n  floor?: string\n  intercom?: string\n  district?: string\n  delivery_comment?: string\n  loyalty_points: number | string\n  total_spent: number | string\n  created_at: string\n  updated_at: string\n}\n\nexport async function fetchUserByPhone(phone: string): Promise<NocoDBUser | null> {\n  const response = await nocoFetch<NocoDBResponse<NocoDBUser>>(\"Users\", {\n    where: `(phone,eq,${phone})`,\n  })\n  return response.list?.[0] || null\n}\n\nexport async function fetchUserById(id: number): Promise<NocoDBUser | null> {\n  const response = await nocoFetch<NocoDBResponse<NocoDBUser>>(\"Users\", {\n    where: `(Id,eq,${id})`,\n  })\n  return response.list?.[0] || null\n}\n\nexport async function createUser(user: Omit<NocoDBUser, \"Id\" | \"created_at\" | \"updated_at\">): Promise<NocoDBUser> {\n  return clientFetch<NocoDBUser>(\n    \"Users\",\n    {},\n    {\n      method: \"POST\",\n      body: JSON.stringify(user),\n    },\n  )\n}\n\nexport async function updateUser(id: number, data: Partial<NocoDBUser>): Promise<NocoDBUser> {\n  return clientFetch<NocoDBUser>(\n    `Users/${id}`,\n    {},\n    {\n      method: \"PATCH\",\n      body: JSON.stringify(data),\n    },\n  )\n}\n\n// === ORDERS ===\n\nexport interface NocoDBOrder {\n  Id: number\n  user_id?: number\n  order_number: string\n  start_date: string\n  delivery_time: string\n  status: \"pending\" | \"paid\" | \"delivered\" | \"cancelled\"\n  payment_method: \"card\" | \"sbp\" | \"cash\"\n  paid?: boolean | string\n  paid_at?: string\n  delivered?: boolean | string\n  cancelled?: boolean | string\n  promo_code?: string\n  promo_discount?: number | string\n  loyalty_points_used: number | string\n  loyalty_points_earned: number | string\n  subtotal: number | string\n  total: number | string\n  guest_phone?: string\n  guest_address?: string\n  created_at: string\n  updated_at: string\n}\n\nexport async function fetchOrders(userId?: number): Promise<NocoDBOrder[]> {\n  const params: Record<string, string> = {\n    limit: \"1000\",\n    sort: \"-start_date\",\n  }\n\n  if (userId) {\n    params.where = `(user_id,eq,${userId})`\n  }\n\n  const response = await nocoFetch<NocoDBResponse<NocoDBOrder>>(\"Orders\", params)\n  return response.list || []\n}\n\nexport async function fetchOrdersByUser(userId: number): Promise<NocoDBOrder[]> {\n  return fetchOrders(userId)\n}\n\nexport function generateOrderNumber(): string {\n  const now = new Date()\n  const date = now.toISOString().slice(0, 10).replace(/-/g, \"\")\n  const random = Math.random().toString(36).substring(2, 8).toUpperCase()\n  return `ORD-${date}-${random}`\n}\n\nexport async function fetchOrderById(id: number): Promise<NocoDBOrder | null> {\n  const response = await nocoFetch<NocoDBResponse<NocoDBOrder>>(\"Orders\", {\n    where: `(Id,eq,${id})`,\n  })\n  return response.list?.[0] || null\n}\n\nexport async function createOrder(order: Omit<NocoDBOrder, \"Id\" | \"created_at\" | \"updated_at\">): Promise<NocoDBOrder> {\n  return clientFetch<NocoDBOrder>(\n    \"Orders\",\n    {},\n    {\n      method: \"POST\",\n      body: JSON.stringify(order),\n    },\n  )\n}\n\nexport async function updateOrder(id: number, data: Partial<NocoDBOrder>): Promise<NocoDBOrder> {\n  return clientFetch<NocoDBOrder>(\n    `Orders/${id}`,\n    {},\n    {\n      method: \"PATCH\",\n      body: JSON.stringify(data),\n    },\n  )\n}\n\n// === ORDER PERSONS ===\n\nexport interface NocoDBOrderPerson {\n  Id: number\n  order_id: number\n  person_number: number\n}\n\nexport async function createOrderPerson(orderPerson: Omit<NocoDBOrderPerson, \"Id\">): Promise<NocoDBOrderPerson> {\n  return clientFetch<NocoDBOrderPerson>(\n    \"Order_Persons\",\n    {},\n    {\n      method: \"POST\",\n      body: JSON.stringify(orderPerson),\n    },\n  )\n}\n\n// === ORDER MEALS ===\n\nexport interface NocoDBOrderMeal {\n  Id: number\n  order_person_id: number\n  day: \"day1\" | \"day2\"\n  meal_time: \"breakfast\" | \"lunch\" | \"dinner\"\n  meal_type: \"dish\" | \"salad\" | \"soup\" | \"main\"\n  meal_id: number\n  portion_size: \"single\" | \"medium\" | \"large\"\n  price: number | string\n  garnish_id?: number\n  garnish_portion_size?: \"single\" | \"medium\" | \"large\"\n  garnish_price?: number | string\n}\n\nexport async function createOrderMeal(orderMeal: Omit<NocoDBOrderMeal, \"Id\">): Promise<NocoDBOrderMeal> {\n  return clientFetch<NocoDBOrderMeal>(\n    \"Order_Meals\",\n    {},\n    {\n      method: \"POST\",\n      body: JSON.stringify(orderMeal),\n    },\n  )\n}\n\n// === ORDER EXTRAS ===\n\nexport interface NocoDBOrderExtra {\n  Id: number\n  order_id: number\n  extra_id: number\n  quantity: number | string\n  price: number | string\n}\n\nexport async function createOrderExtra(orderExtra: Omit<NocoDBOrderExtra, \"Id\">): Promise<NocoDBOrderExtra> {\n  return clientFetch<NocoDBOrderExtra>(\n    \"Order_Extras\",\n    {},\n    {\n      method: \"POST\",\n      body: JSON.stringify(orderExtra),\n    },\n  )\n}\n\n// Функции для получения данных заказа\nexport async function fetchOrderPersons(orderId: number): Promise<NocoDBOrderPerson[]> {\n  const response = await nocoFetch<NocoDBResponse<NocoDBOrderPerson>>(\"Order_Persons\", {\n    where: `(order_id,eq,${orderId})`,\n  })\n  return response.list || []\n}\n\nexport async function fetchOrderMeals(orderPersonId: number): Promise<NocoDBOrderMeal[]> {\n  const response = await nocoFetch<NocoDBResponse<NocoDBOrderMeal>>(\"Order_Meals\", {\n    where: `(order_person_id,eq,${orderPersonId})`,\n  })\n  return response.list || []\n}\n\nexport async function fetchOrderExtras(orderId: number): Promise<NocoDBOrderExtra[]> {\n  const response = await nocoFetch<NocoDBResponse<NocoDBOrderExtra>>(\"Order_Extras\", {\n    where: `(order_id,eq,${orderId})`,\n  })\n  return response.list || []\n}\n\n// Функции для удаления данных заказа\nexport async function deleteOrderPerson(id: number): Promise<void> {\n  const apiBaseUrl = getApiBaseUrl()\n  if (apiBaseUrl === null) {\n    // На сервере используем прямой запрос к NocoDB\n    const tableId = getTableId(\"Order_Persons\")\n    const nocodbUrl = getNocoDBUrl()\n    const token = getNocoDBToken()\n    const url = `${nocodbUrl}/api/v2/tables/${tableId}/records/${id}`\n    \n    const response = await fetch(url, {\n      method: \"DELETE\",\n      headers: {\n        \"xc-token\": token,\n        \"Content-Type\": \"application/json\",\n      },\n    })\n    \n    if (!response.ok) {\n      throw new Error(`Failed to delete order person: ${response.status}`)\n    }\n  } else {\n    // На клиенте используем API proxy\n    const response = await fetch(`/api/db/Order_Persons/records/${id}`, {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    \n    if (!response.ok) {\n      throw new Error(`Failed to delete order person: ${response.status}`)\n    }\n  }\n}\n\nexport async function deleteOrderMeal(id: number): Promise<void> {\n  const apiBaseUrl = getApiBaseUrl()\n  if (apiBaseUrl === null) {\n    const tableId = getTableId(\"Order_Meals\")\n    const nocodbUrl = getNocoDBUrl()\n    const token = getNocoDBToken()\n    const url = `${nocodbUrl}/api/v2/tables/${tableId}/records/${id}`\n    \n    const response = await fetch(url, {\n      method: \"DELETE\",\n      headers: {\n        \"xc-token\": token,\n        \"Content-Type\": \"application/json\",\n      },\n    })\n    \n    if (!response.ok) {\n      throw new Error(`Failed to delete order meal: ${response.status}`)\n    }\n  } else {\n    const response = await fetch(`/api/db/Order_Meals/records/${id}`, {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    \n    if (!response.ok) {\n      throw new Error(`Failed to delete order meal: ${response.status}`)\n    }\n  }\n}\n\nexport async function deleteOrderExtra(id: number): Promise<void> {\n  const apiBaseUrl = getApiBaseUrl()\n  if (apiBaseUrl === null) {\n    const tableId = getTableId(\"Order_Extras\")\n    const nocodbUrl = getNocoDBUrl()\n    const token = getNocoDBToken()\n    const url = `${nocodbUrl}/api/v2/tables/${tableId}/records/${id}`\n    \n    const response = await fetch(url, {\n      method: \"DELETE\",\n      headers: {\n        \"xc-token\": token,\n        \"Content-Type\": \"application/json\",\n      },\n    })\n    \n    if (!response.ok) {\n      throw new Error(`Failed to delete order extra: ${response.status}`)\n    }\n  } else {\n    const response = await fetch(`/api/db/Order_Extras/records/${id}`, {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    \n    if (!response.ok) {\n      throw new Error(`Failed to delete order extra: ${response.status}`)\n    }\n  }\n}\n\n// === PROMO CODES ===\n\nexport interface NocoDBPromoCode {\n  Id: number\n  code: string\n  discount_type: \"percentage\" | \"fixed\"\n  discount_value: number | string\n  min_order_amount?: number | string\n  max_discount?: number | string\n  valid_from?: string\n  valid_until?: string\n  usage_limit?: number | string\n  times_used: number | string\n  active?: boolean | string\n}\n\nexport async function fetchPromoCode(code: string): Promise<NocoDBPromoCode | null> {\n  const response = await nocoFetch<NocoDBResponse<NocoDBPromoCode>>(\"Promo_Codes\", {\n    where: `(code,eq,${code})~and(active,eq,true)`,\n  })\n  return response.list?.[0] || null\n}\n\nexport async function incrementPromoCodeUsage(id: number): Promise<void> {\n  await clientFetch(\n    \"Promo_Codes\",\n    {},\n    {\n      method: \"PATCH\",\n      body: JSON.stringify({ Id: id, times_used: { increment: 1 } }),\n    },\n  )\n}\n\n// === REVIEWS ===\n\nexport interface NocoDBReview {\n  Id: number\n  order_id: number\n  user_id: number\n  rating: number | string\n  text?: string\n  created_at: string\n  updated_at: string\n}\n\nexport async function fetchReviewsForUser(userId: number): Promise<NocoDBReview[]> {\n  const response = await nocoFetch<NocoDBResponse<NocoDBReview>>(\"Reviews\", {\n    where: `(user_id,eq,${userId})`,\n  })\n  return response.list || []\n}\n\nexport async function createReview(\n  review: Omit<NocoDBReview, \"Id\" | \"created_at\" | \"updated_at\">,\n): Promise<NocoDBReview> {\n  return clientFetch<NocoDBReview>(\n    \"Reviews\",\n    {},\n    {\n      method: \"POST\",\n      body: JSON.stringify(review),\n    },\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/lib/meals-data.ts"],"sourcesContent":["// Статические данные меню (используются как fallback если NocoDB недоступен)\n// В продакшене данные загружаются из NocoDB\n\nimport type { Meal, ExtraItem, PortionSize } from \"./types\"\n\nexport const MEALS: Record<string, Meal[]> = {\n  breakfast: [\n    {\n      id: 1,\n      name: \"Омлет с овощами\",\n      ingredients: \"Яйца, помидоры, шпинат, сыр фета\",\n      description: \"Воздушный омлет с сочными томатами, свежим шпинатом и нежным сыром фета\",\n      prices: { single: 280, medium: 350, large: 420 },\n      weights: { single: 250, medium: 350, large: 450 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/omelet-with-vegetables-tomatoes-spinach-feta-chees.jpg\",\n      available: true,\n      nutrition: { calories: 245, protein: 18, fats: 16, carbs: 8, weight: 250 },\n      category: \"breakfast\",\n      weekType: \"both\",\n    },\n    {\n      id: 2,\n      name: \"Овсяная каша\",\n      ingredients: \"Овсянка, банан, ягоды, мед, орехи\",\n      description: \"Полезная овсянка с натуральным медом, свежими ягодами и хрустящими орехами\",\n      prices: { single: 250, medium: 320, large: 390 },\n      weights: { single: 300, medium: 400, large: 500 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/oatmeal-with-banana-berries-honey-nuts.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 12, fats: 8, carbs: 52, weight: 300 },\n      category: \"breakfast\",\n      weekType: \"both\",\n    },\n    {\n      id: 3,\n      name: \"Сырники\",\n      ingredients: \"Творог, мука, яйца, сметана, ягодный соус\",\n      description: \"Классические сырники из домашнего творога со сметаной и ягодным соусом\",\n      prices: { single: 320, medium: 400, large: 480 },\n      weights: { single: 280, medium: 380, large: 480 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/russian-syrniki-pancakes-with-sour-cream-berry-sau.jpg\",\n      available: true,\n      nutrition: { calories: 380, protein: 16, fats: 14, carbs: 46, weight: 280 },\n      category: \"breakfast\",\n      weekType: \"current\",\n    },\n    {\n      id: 4,\n      name: \"Панкейки\",\n      ingredients: \"Мука, молоко, яйца, кленовый сироп\",\n      description: \"Пышные американские панкейки с натуральным кленовым сиропом\",\n      prices: { single: 290, medium: 360, large: 430 },\n      weights: { single: 250, medium: 350, large: 450 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/pancakes-maple-syrup.png\",\n      available: true,\n      nutrition: { calories: 340, protein: 10, fats: 8, carbs: 58, weight: 250 },\n      category: \"breakfast\",\n      weekType: \"next\",\n    },\n  ],\n  lunch_salad: [\n    {\n      id: 10,\n      name: \"Салат Греческий\",\n      ingredients: \"Огурцы, помидоры, перец, маслины, фета, оливковое масло\",\n      description: \"Свежий средиземноморский салат с сыром фета и оливковым маслом\",\n      prices: { single: 340, medium: 420, large: 500 },\n      weights: { single: 220, medium: 320, large: 420 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/greek-salad.jpg\",\n      available: true,\n      nutrition: { calories: 280, protein: 8, fats: 22, carbs: 12, weight: 220 },\n      category: \"lunch_salad\",\n      weekType: \"both\",\n    },\n    {\n      id: 11,\n      name: \"Салат с тунцом\",\n      ingredients: \"Тунец, яйцо, фасоль, помидоры, салат, оливки\",\n      description: \"Сытный салат Нисуаз с консервированным тунцом и фасолью\",\n      prices: { single: 420, medium: 520, large: 620 },\n      weights: { single: 280, medium: 380, large: 480 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/tuna-salad-nicoise.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 26, fats: 18, carbs: 14, weight: 280 },\n      category: \"lunch_salad\",\n      weekType: \"current\",\n    },\n    {\n      id: 12,\n      name: \"Салат Цезарь\",\n      ingredients: \"Курица, салат ромэн, пармезан, гренки, соус\",\n      description: \"Классический Цезарь с нежной курицей и хрустящими гренками\",\n      prices: { single: 380, medium: 470, large: 560 },\n      weights: { single: 260, medium: 360, large: 460 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/caesar-salad-with-chicken-parmesan-croutons.jpg\",\n      available: true,\n      nutrition: { calories: 350, protein: 28, fats: 20, carbs: 16, weight: 260 },\n      category: \"lunch_salad\",\n      weekType: \"next\",\n    },\n  ],\n  lunch_soup: [\n    {\n      id: 20,\n      name: \"Борщ\",\n      ingredients: \"Свекла, капуста, говядина, картофель, сметана\",\n      description: \"Традиционный украинский борщ на говяжьем бульоне со сметаной\",\n      prices: { single: 320, medium: 400, large: 480 },\n      weights: { single: 350, medium: 450, large: 550 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/borscht-soup-with-sour-cream.jpg\",\n      available: true,\n      nutrition: { calories: 240, protein: 14, fats: 10, carbs: 24, weight: 350 },\n      category: \"lunch_soup\",\n      weekType: \"both\",\n    },\n    {\n      id: 21,\n      name: \"Куриный суп\",\n      ingredients: \"Курица, лапша, морковь, лук, зелень\",\n      description: \"Домашний куриный суп с лапшой и свежей зеленью\",\n      prices: { single: 280, medium: 350, large: 420 },\n      weights: { single: 350, medium: 450, large: 550 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/chicken-noodle-soup.jpg\",\n      available: true,\n      nutrition: { calories: 180, protein: 16, fats: 6, carbs: 18, weight: 350 },\n      category: \"lunch_soup\",\n      weekType: \"current\",\n    },\n    {\n      id: 22,\n      name: \"Крем-суп из тыквы\",\n      ingredients: \"Тыква, сливки, имбирь, семечки\",\n      description: \"Нежный крем-суп из печеной тыквы с имбирем и тыквенными семечками\",\n      prices: { single: 300, medium: 380, large: 460 },\n      weights: { single: 300, medium: 400, large: 500 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/pumpkin-cream-soup.jpg\",\n      available: true,\n      nutrition: { calories: 220, protein: 6, fats: 14, carbs: 20, weight: 300 },\n      category: \"lunch_soup\",\n      weekType: \"next\",\n    },\n  ],\n  lunch_main: [\n    {\n      id: 30,\n      name: \"Куриная грудка\",\n      ingredients: \"Филе курицы, специи, оливковое масло\",\n      description: \"Сочная куриная грудка на гриле с ароматными травами\",\n      prices: { single: 380, medium: 470, large: 560 },\n      weights: { single: 180, medium: 260, large: 340 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/grilled-chicken-breast-with-herbs.jpg\",\n      available: true,\n      nutrition: { calories: 210, protein: 38, fats: 6, carbs: 2, weight: 180 },\n      category: \"lunch_main\",\n      weekType: \"both\",\n    },\n    {\n      id: 31,\n      name: \"Лосось на гриле\",\n      ingredients: \"Стейк лосося, лимон, укроп\",\n      description: \"Стейк норвежского лосося на гриле с лимоном и укропом\",\n      prices: { single: 580, medium: 720, large: 860 },\n      weights: { single: 200, medium: 280, large: 360 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/grilled-salmon-steak-with-lemon-dill.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 34, fats: 20, carbs: 0, weight: 200 },\n      category: \"lunch_main\",\n      weekType: \"current\",\n    },\n    {\n      id: 32,\n      name: \"Паста Карбонара\",\n      ingredients: \"Спагетти, бекон, сливки, пармезан, яйцо\",\n      description: \"Классическая итальянская паста с беконом и сливочным соусом\",\n      prices: { single: 420, medium: 520, large: 620 },\n      weights: { single: 320, medium: 420, large: 520 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/pasta-carbonara-with-bacon-parmesan.jpg\",\n      available: true,\n      nutrition: { calories: 520, protein: 22, fats: 26, carbs: 48, weight: 320 },\n      category: \"lunch_main\",\n      weekType: \"next\",\n    },\n  ],\n  dinner_salad: [\n    {\n      id: 40,\n      name: \"Салат Оливье\",\n      ingredients: \"Картофель, морковь, горошек, яйца, колбаса, майонез\",\n      description: \"Классический русский салат с домашним майонезом\",\n      prices: { single: 280, medium: 360, large: 440 },\n      weights: { single: 250, medium: 350, large: 450 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/olivier-salad-russian.jpg\",\n      available: true,\n      nutrition: { calories: 340, protein: 12, fats: 22, carbs: 24, weight: 250 },\n      category: \"dinner_salad\",\n      weekType: \"both\",\n    },\n    {\n      id: 41,\n      name: \"Салат Витаминный\",\n      ingredients: \"Капуста, морковь, болгарский перец, яблоко, лимонный сок\",\n      description: \"Легкий витаминный салат из свежих овощей с яблоком\",\n      prices: { single: 220, medium: 280, large: 340 },\n      weights: { single: 200, medium: 300, large: 400 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/vitamin-salad-cabbage.jpg\",\n      available: true,\n      nutrition: { calories: 120, protein: 3, fats: 2, carbs: 22, weight: 200 },\n      category: \"dinner_salad\",\n      weekType: \"current\",\n    },\n    {\n      id: 42,\n      name: \"Салат с авокадо\",\n      ingredients: \"Авокадо, руккола, черри, кедровые орехи, пармезан\",\n      description: \"Изысканный салат с авокадо, рукколой и кедровыми орешками\",\n      prices: { single: 390, medium: 480, large: 570 },\n      weights: { single: 200, medium: 300, large: 400 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/avocado-salad-arugula.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 8, fats: 28, carbs: 12, weight: 200 },\n      category: \"dinner_salad\",\n      weekType: \"next\",\n    },\n  ],\n  dinner_soup: [\n    {\n      id: 50,\n      name: \"Окрошка\",\n      ingredients: \"Квас, огурцы, редис, яйца, колбаса, зелень, сметана\",\n      description: \"Освежающий холодный суп на квасе с овощами\",\n      prices: { single: 290, medium: 370, large: 450 },\n      weights: { single: 350, medium: 450, large: 550 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/okroshka-cold-soup.jpg\",\n      available: true,\n      nutrition: { calories: 180, protein: 10, fats: 8, carbs: 18, weight: 350 },\n      category: \"dinner_soup\",\n      weekType: \"both\",\n    },\n    {\n      id: 51,\n      name: \"Грибной крем-суп\",\n      ingredients: \"Шампиньоны, сливки, лук, чеснок, зелень\",\n      description: \"Ароматный крем-суп из шампиньонов со сливками\",\n      prices: { single: 310, medium: 390, large: 470 },\n      weights: { single: 300, medium: 400, large: 500 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/mushroom-cream-soup.jpg\",\n      available: true,\n      nutrition: { calories: 200, protein: 6, fats: 16, carbs: 10, weight: 300 },\n      category: \"dinner_soup\",\n      weekType: \"current\",\n    },\n    {\n      id: 52,\n      name: \"Уха\",\n      ingredients: \"Рыба, картофель, морковь, лук, зелень\",\n      description: \"Наваристая уха из свежей рыбы с овощами\",\n      prices: { single: 350, medium: 440, large: 530 },\n      weights: { single: 350, medium: 450, large: 550 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/fish-soup-ukha.jpg\",\n      available: true,\n      nutrition: { calories: 160, protein: 18, fats: 4, carbs: 14, weight: 350 },\n      category: \"dinner_soup\",\n      weekType: \"next\",\n    },\n  ],\n  dinner_main: [\n    {\n      id: 60,\n      name: \"Стейк из индейки\",\n      ingredients: \"Филе индейки, травы, чеснок\",\n      description: \"Сочный стейк из индейки с ароматными травами\",\n      prices: { single: 420, medium: 520, large: 620 },\n      weights: { single: 180, medium: 260, large: 340 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/turkey-steak-with-herbs-garlic.jpg\",\n      available: true,\n      nutrition: { calories: 190, protein: 36, fats: 4, carbs: 2, weight: 180 },\n      category: \"dinner_main\",\n      weekType: \"both\",\n    },\n    {\n      id: 61,\n      name: \"Треска запеченная\",\n      ingredients: \"Филе трески, овощи, лимон\",\n      description: \"Запеченное филе трески с овощами и лимоном\",\n      prices: { single: 480, medium: 600, large: 720 },\n      weights: { single: 220, medium: 300, large: 380 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/baked-cod-fish-with-vegetables-lemon.jpg\",\n      available: true,\n      nutrition: { calories: 180, protein: 32, fats: 4, carbs: 6, weight: 220 },\n      category: \"dinner_main\",\n      weekType: \"current\",\n    },\n    {\n      id: 62,\n      name: \"Котлеты домашние\",\n      ingredients: \"Говядина, свинина, лук, яйцо, специи\",\n      description: \"Сочные домашние котлеты из мясного фарша\",\n      prices: { single: 360, medium: 450, large: 540 },\n      weights: { single: 200, medium: 280, large: 360 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: true,\n      image: \"/homemade-cutlets.jpg\",\n      available: true,\n      nutrition: { calories: 320, protein: 28, fats: 22, carbs: 4, weight: 200 },\n      category: \"dinner_main\",\n      weekType: \"next\",\n    },\n  ],\n  garnish: [\n    {\n      id: 70,\n      name: \"Гречка\",\n      ingredients: \"Гречневая крупа, соль\",\n      description: \"Рассыпчатая гречневая каша\",\n      prices: { single: 80, medium: 110, large: 140 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/buckwheat-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 110, protein: 4, fats: 1, carbs: 22, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n    {\n      id: 71,\n      name: \"Рис\",\n      ingredients: \"Белый рис басмати, соль\",\n      description: \"Ароматный рис басмати\",\n      prices: { single: 70, medium: 100, large: 130 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/white-rice-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 130, protein: 3, fats: 0, carbs: 28, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n    {\n      id: 72,\n      name: \"Овощи на пару\",\n      ingredients: \"Брокколи, морковь, цветная капуста\",\n      description: \"Овощной микс на пару\",\n      prices: { single: 100, medium: 140, large: 180 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/steamed-vegetables-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 60, protein: 3, fats: 0, carbs: 12, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n    {\n      id: 73,\n      name: \"Картофельное пюре\",\n      ingredients: \"Картофель, молоко, сливочное масло, соль\",\n      description: \"Нежное картофельное пюре\",\n      prices: { single: 90, medium: 130, large: 170 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/mashed-potatoes-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 140, protein: 3, fats: 4, carbs: 24, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n    {\n      id: 74,\n      name: \"Киноа\",\n      ingredients: \"Белая киноа, соль, специи\",\n      description: \"Полезная киноа со специями\",\n      prices: { single: 110, medium: 150, large: 190 },\n      weights: { single: 150, medium: 220, large: 290 },\n      portion: \"single\" as PortionSize,\n      needsGarnish: false,\n      image: \"/quinoa-garnish.jpg\",\n      available: true,\n      nutrition: { calories: 120, protein: 5, fats: 2, carbs: 21, weight: 150 },\n      category: \"garnish\",\n      weekType: \"both\",\n    },\n  ],\n}\n\nexport const EXTRAS: Record<string, ExtraItem[]> = {\n  drink: [\n    {\n      id: 100,\n      name: \"Морс клюквенный\",\n      price: 120,\n      image: \"/cranberry-mors-drink.jpg\",\n      available: true,\n      ingredients: \"Клюква, вода, сахар\",\n      description: \"Освежающий морс из свежей клюквы\",\n      nutrition: { calories: 80, protein: 0, fats: 0, carbs: 20, weight: 250 },\n      category: \"drink\",\n    },\n    {\n      id: 101,\n      name: \"Компот из сухофруктов\",\n      price: 100,\n      image: \"/dried-fruit-compote.jpg\",\n      available: true,\n      ingredients: \"Курага, чернослив, изюм, вода, сахар\",\n      description: \"Традиционный компот из сухофруктов\",\n      nutrition: { calories: 90, protein: 1, fats: 0, carbs: 22, weight: 250 },\n      category: \"drink\",\n    },\n    {\n      id: 102,\n      name: \"Лимонад домашний\",\n      price: 150,\n      image: \"/homemade-lemonade.jpg\",\n      available: true,\n      ingredients: \"Лимон, вода, сахар, мята\",\n      description: \"Домашний лимонад с мятой\",\n      nutrition: { calories: 70, protein: 0, fats: 0, carbs: 18, weight: 250 },\n      category: \"drink\",\n    },\n    {\n      id: 103,\n      name: \"Смузи ягодный\",\n      price: 180,\n      image: \"/berry-smoothie.jpg\",\n      available: true,\n      ingredients: \"Клубника, черника, банан, йогурт\",\n      description: \"Густой ягодный смузи с йогуртом\",\n      nutrition: { calories: 140, protein: 4, fats: 2, carbs: 28, weight: 250 },\n      category: \"drink\",\n    },\n  ],\n  sauce: [\n    {\n      id: 110,\n      name: \"Соус сырный\",\n      price: 60,\n      image: \"/cheese-sauce.jpg\",\n      available: true,\n      ingredients: \"Сыр, сливки, чеснок, специи\",\n      description: \"Нежный сливочно-сырный соус\",\n      nutrition: { calories: 180, protein: 6, fats: 16, carbs: 4, weight: 50 },\n      category: \"sauce\",\n    },\n    {\n      id: 111,\n      name: \"Соус томатный\",\n      price: 50,\n      image: \"/tomato-sauce.jpg\",\n      available: true,\n      ingredients: \"Томаты, лук, чеснок, базилик\",\n      description: \"Классический томатный соус\",\n      nutrition: { calories: 60, protein: 2, fats: 2, carbs: 10, weight: 50 },\n      category: \"sauce\",\n    },\n    {\n      id: 112,\n      name: \"Соус чесночный\",\n      price: 55,\n      image: \"/garlic-sauce.jpg\",\n      available: true,\n      ingredients: \"Чеснок, майонез, укроп\",\n      description: \"Пикантный чесночный соус\",\n      nutrition: { calories: 220, protein: 1, fats: 24, carbs: 2, weight: 50 },\n      category: \"sauce\",\n    },\n    {\n      id: 113,\n      name: \"Песто\",\n      price: 80,\n      image: \"/pesto-sauce.jpg\",\n      available: true,\n      ingredients: \"Базилик, кедровые орехи, пармезан, масло\",\n      description: \"Итальянский соус песто\",\n      nutrition: { calories: 240, protein: 4, fats: 24, carbs: 4, weight: 50 },\n      category: \"sauce\",\n    },\n  ],\n  dessert: [\n    {\n      id: 120,\n      name: \"Тирамису\",\n      price: 280,\n      image: \"/tiramisu-dessert.jpg\",\n      available: true,\n      ingredients: \"Маскарпоне, савоярди, кофе, какао\",\n      description: \"Классический итальянский десерт\",\n      nutrition: { calories: 320, protein: 6, fats: 18, carbs: 34, weight: 120 },\n      category: \"dessert\",\n    },\n    {\n      id: 121,\n      name: \"Чизкейк\",\n      price: 260,\n      image: \"/cheesecake-dessert.jpg\",\n      available: true,\n      ingredients: \"Сливочный сыр, печенье, сахар, сливки\",\n      description: \"Нежный чизкейк Нью-Йорк\",\n      nutrition: { calories: 380, protein: 8, fats: 24, carbs: 32, weight: 130 },\n      category: \"dessert\",\n    },\n    {\n      id: 122,\n      name: \"Панна котта\",\n      price: 220,\n      image: \"/panna-cotta-dessert.jpg\",\n      available: true,\n      ingredients: \"Сливки, сахар, ваниль, желатин, ягоды\",\n      description: \"Итальянский десерт с ягодами\",\n      nutrition: { calories: 280, protein: 4, fats: 18, carbs: 26, weight: 110 },\n      category: \"dessert\",\n    },\n    {\n      id: 123,\n      name: \"Брауни\",\n      price: 180,\n      image: \"/brownie-dessert.jpg\",\n      available: true,\n      ingredients: \"Шоколад, масло, яйца, мука, орехи\",\n      description: \"Шоколадный брауни с орехами\",\n      nutrition: { calories: 340, protein: 6, fats: 20, carbs: 36, weight: 100 },\n      category: \"dessert\",\n    },\n  ],\n}\n\nexport const DELIVERY_TIMES = [\"18:00 - 19:00\", \"19:00 - 20:00\", \"20:00 - 21:00\", \"21:00 - 22:00\"]\n\nexport function getMealsForWeek(weekType: \"current\" | \"next\"): Record<string, Meal[]> {\n  const filtered: Record<string, Meal[]> = {}\n\n  for (const [category, meals] of Object.entries(MEALS)) {\n    filtered[category] = meals.filter((meal) => meal.weekType === \"both\" || meal.weekType === weekType)\n  }\n\n  return filtered\n}\n\nexport function isMealAvailable(mealName: string, weekType?: \"current\" | \"next\"): boolean {\n  const allMeals = Object.values(MEALS).flat()\n  const meal = allMeals.find((m) => m.name === mealName)\n\n  if (!meal || !meal.available) return false\n\n  if (weekType) {\n    return meal.weekType === \"both\" || meal.weekType === weekType\n  }\n\n  return true\n}\n\nexport function isExtraAvailable(extraName: string): boolean {\n  const allExtras = Object.values(EXTRAS).flat()\n  const extra = allExtras.find((e) => e.name === extraName)\n  return extra?.available ?? false\n}\n\nexport function getGarnishes(): Meal[] {\n  return MEALS.garnish || []\n}\n\nexport function getMealById(id: number): Meal | undefined {\n  return Object.values(MEALS)\n    .flat()\n    .find((m) => m.id === id)\n}\n\nexport function getExtraById(id: number): ExtraItem | undefined {\n  return Object.values(EXTRAS)\n    .flat()\n    .find((e) => e.id === id)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1571, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/app/api/menu/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { fetchMeals, fetchExtras, fetchDeliveryZones, isNocoDBConfigured } from \"@/lib/nocodb\"\nimport { DELIVERY_TIMES } from \"@/lib/meals-data\"\n\nexport const revalidate = 3600\n\nfunction parsePrice(value: string | number | undefined | null): number {\n  if (value === undefined || value === null) return 0\n  if (value === \"#N/A\" || value === \"\") return 0\n  if (typeof value === \"number\") return Math.round(value)\n  // Replace comma with dot and parse, then round to integer\n  const parsed = Number.parseFloat(String(value).replace(\",\", \".\"))\n  return isNaN(parsed) ? 0 : Math.round(parsed)\n}\n\nfunction parseBoolean(value: string | boolean | number | undefined | null): boolean {\n  if (value === undefined || value === null) return false\n  if (typeof value === \"boolean\") return value\n  if (typeof value === \"number\") return value === 1\n  const str = String(value).toUpperCase()\n  return str === \"TRUE\" || str === \"1\" || str === \"YES\"\n}\n\nfunction parseNumber(value: string | number | undefined | null): number {\n  if (value === undefined || value === null) return 0\n  if (value === \"#N/A\" || value === \"\") return 0\n  if (typeof value === \"number\") return Math.round(value * 10) / 10\n  const parsed = Number.parseFloat(String(value).replace(\",\", \".\"))\n  return isNaN(parsed) ? 0 : Math.round(parsed * 10) / 10\n}\n\nfunction parseIntervals(value: string | undefined | null): string[] {\n  if (!value) return []\n  return value\n    .split(\",\")\n    .map((s) => s.trim())\n    .filter(Boolean)\n}\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url)\n  const weekType = searchParams.get(\"week\") as \"current\" | \"next\" | null\n\n  console.log(`[v0] /api/menu GET request, weekType: ${weekType}`)\n\n  if (!isNocoDBConfigured()) {\n    console.log(\"[v0] NocoDB not configured\")\n    return NextResponse.json({\n      meals: {\n        breakfast: [],\n        lunch_salad: [],\n        lunch_soup: [],\n        lunch_main: [],\n        dinner_salad: [],\n        dinner_soup: [],\n        dinner_main: [],\n        garnish: [],\n      },\n      extras: { drink: [], sauce: [], dessert: [], snack: [] },\n      deliveryZones: [],\n      deliveryTimes: DELIVERY_TIMES,\n      source: \"empty\",\n      reason: \"NocoDB not configured\",\n    })\n  }\n\n  try {\n    const [nocoMeals, nocoExtras, nocoZones] = await Promise.all([\n      fetchMeals(weekType || undefined),\n      fetchExtras(),\n      fetchDeliveryZones(),\n    ])\n\n    console.log(`[v0] Got data: meals=${nocoMeals.length}, extras=${nocoExtras.length}, zones=${nocoZones.length}`)\n\n    const groupedMeals: Record<string, any[]> = {\n      breakfast: [],\n      lunch_salad: [],\n      lunch_soup: [],\n      lunch_main: [],\n      dinner_salad: [],\n      dinner_soup: [],\n      dinner_main: [],\n      garnish: [],\n    }\n\n    let skippedNotAvailable = 0\n    let skippedWrongWeek = 0\n\n    for (const m of nocoMeals) {\n      const isCurrentWeek = parseBoolean(m.is_current_week)\n      const isNextWeek = parseBoolean(m.is_next_week)\n      const isAvailable = parseBoolean(m.available)\n\n      if (!isAvailable) {\n        skippedNotAvailable++\n        continue\n      }\n\n      // Фильтрация по неделе:\n      // - Для \"current\": блюдо должно быть доступно в текущей неделе (isCurrentWeek = true)\n      //   или в обеих неделях (isCurrentWeek = true && isNextWeek = true)\n      // - Для \"next\": блюдо должно быть доступно в следующей неделе (isNextWeek = true)\n      //   или в обеих неделях (isCurrentWeek = true && isNextWeek = true)\n      if (weekType === \"current\" && !isCurrentWeek) {\n        skippedWrongWeek++\n        continue\n      }\n      if (weekType === \"next\" && !isNextWeek) {\n        skippedWrongWeek++\n        continue\n      }\n\n      const category = String(m.category || \"\").toLowerCase()\n\n      // ... existing code for parsing prices ...\n      const priceSingle = parsePrice(m.price_single) || parsePrice(m.price)\n      const priceMedium = parsePrice(m.price_medium)\n      const priceLarge = parsePrice(m.price_large)\n\n      const weightSingle = parsePrice(m.weight_single) || parsePrice(m.weight)\n      const weightMedium = parsePrice(m.weight_medium)\n      const weightLarge = parsePrice(m.weight_large)\n\n      const meal = {\n        id: m.Id || m.id,\n        name: m.name || \"\",\n        ingredients: m.ingredients || \"\",\n        description: m.description || \"\",\n        prices: {\n          single: priceSingle,\n          medium: priceMedium,\n          large: priceLarge,\n        },\n        weights: {\n          single: weightSingle,\n          medium: weightMedium,\n          large: weightLarge,\n        },\n        portion: \"single\" as const,\n        needsGarnish: parseBoolean(m.needs_garnish),\n        image: m.image || \"\",\n        available: true,\n        nutrition: {\n          calories: parseNumber(m.calories),\n          protein: parseNumber(m.protein),\n          fats: parseNumber(m.fats),\n          carbs: parseNumber(m.carbs),\n          weight: weightSingle,\n        },\n        category: category,\n        weekType: isCurrentWeek && isNextWeek ? \"both\" : isCurrentWeek ? \"current\" : \"next\",\n      }\n\n      if (category === \"breakfast\") {\n        groupedMeals.breakfast.push(meal)\n      } else if (category === \"garnish\") {\n        groupedMeals.garnish.push(meal)\n      } else if (category === \"soup\" || category === \"salad\" || category === \"main\") {\n        const lunchCategory = `lunch_${category}`\n        const dinnerCategory = `dinner_${category}`\n\n        if (groupedMeals[lunchCategory]) {\n          groupedMeals[lunchCategory].push({ ...meal, category: lunchCategory })\n        }\n        if (groupedMeals[dinnerCategory]) {\n          groupedMeals[dinnerCategory].push({ ...meal, id: `${meal.id}_dinner`, category: dinnerCategory })\n        }\n      }\n    }\n\n    console.log(`[v0] Meals filter: skipped ${skippedNotAvailable} not available, ${skippedWrongWeek} wrong week`)\n    console.log(\n      `[v0] Grouped meals:`,\n      Object.entries(groupedMeals)\n        .map(([k, v]) => `${k}:${v.length}`)\n        .join(\", \"),\n    )\n\n    // ... existing code for extras ...\n    const groupedExtras: Record<string, any[]> = {\n      drink: [],\n      sauce: [],\n      dessert: [],\n      snack: [],\n    }\n\n    for (const e of nocoExtras) {\n      const isAvailable = parseBoolean(e.available)\n      if (!isAvailable) continue\n\n      const category = String(e.category || \"\").toLowerCase()\n\n      const extra = {\n        id: e.Id || e.id,\n        name: e.name || \"\",\n        price: parsePrice(e.price),\n        image: e.image || \"\",\n        available: true,\n        ingredients: e.ingredients || \"\",\n        description: e.description || \"\",\n        nutrition: {\n          calories: parseNumber(e.calories),\n          protein: parseNumber(e.protein),\n          fats: parseNumber(e.fats),\n          carbs: parseNumber(e.carbs),\n          weight: parsePrice(e.weight),\n        },\n        category: category,\n      }\n\n      if (groupedExtras[category]) {\n        groupedExtras[category].push(extra)\n      }\n    }\n\n    console.log(\n      `[v0] Grouped extras:`,\n      Object.entries(groupedExtras)\n        .map(([k, v]) => `${k}:${v.length}`)\n        .join(\", \"),\n    )\n\n    // ... existing code for deliveryZones ...\n    const deliveryZones = nocoZones\n      .filter((zone) => parseBoolean(zone.is_available))\n      .map((zone) => ({\n        id: zone.Id || zone.id,\n        city: zone.city || \"\",\n        district: zone.district || \"\",\n        deliveryFee: parsePrice(zone.delivery_fee),\n        minOrderAmount: parsePrice(zone.min_order_amount),\n        isAvailable: true,\n        availableIntervals: parseIntervals(zone.available_intervals),\n      }))\n\n    // Извлекаем все уникальные временные интервалы из зон доставки\n    const allIntervals = new Set<string>()\n    deliveryZones.forEach((zone) => {\n      zone.availableIntervals.forEach((interval) => {\n        if (interval) {\n          allIntervals.add(interval.trim())\n        }\n      })\n    })\n    \n    // Сортируем интервалы и используем их, если есть, иначе fallback\n    const deliveryTimes = allIntervals.size > 0 \n      ? Array.from(allIntervals).sort() \n      : DELIVERY_TIMES\n\n    return NextResponse.json({\n      meals: groupedMeals,\n      extras: groupedExtras,\n      deliveryZones,\n      deliveryTimes,\n      source: \"nocodb\",\n      counts: {\n        meals: nocoMeals.length,\n        filteredMeals: Object.values(groupedMeals).flat().length,\n        extras: nocoExtras.length,\n        deliveryZones: deliveryZones.length,\n      },\n    })\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : \"Unknown error\"\n    console.error(\"[v0] Failed to fetch from NocoDB:\", errorMessage)\n\n    return NextResponse.json({\n      meals: {\n        breakfast: [],\n        lunch_salad: [],\n        lunch_soup: [],\n        lunch_main: [],\n        dinner_salad: [],\n        dinner_soup: [],\n        dinner_main: [],\n        garnish: [],\n      },\n      extras: { drink: [], sauce: [], dessert: [], snack: [] },\n      deliveryZones: [],\n      deliveryTimes: DELIVERY_TIMES,\n      source: \"error\",\n      reason: errorMessage,\n    })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,MAAM,aAAa;AAE1B,SAAS,WAAW,KAAyC;IAC3D,IAAI,UAAU,aAAa,UAAU,MAAM,OAAO;IAClD,IAAI,UAAU,UAAU,UAAU,IAAI,OAAO;IAC7C,IAAI,OAAO,UAAU,UAAU,OAAO,KAAK,KAAK,CAAC;IACjD,0DAA0D;IAC1D,MAAM,SAAS,OAAO,UAAU,CAAC,OAAO,OAAO,OAAO,CAAC,KAAK;IAC5D,OAAO,MAAM,UAAU,IAAI,KAAK,KAAK,CAAC;AACxC;AAEA,SAAS,aAAa,KAAmD;IACvE,IAAI,UAAU,aAAa,UAAU,MAAM,OAAO;IAClD,IAAI,OAAO,UAAU,WAAW,OAAO;IACvC,IAAI,OAAO,UAAU,UAAU,OAAO,UAAU;IAChD,MAAM,MAAM,OAAO,OAAO,WAAW;IACrC,OAAO,QAAQ,UAAU,QAAQ,OAAO,QAAQ;AAClD;AAEA,SAAS,YAAY,KAAyC;IAC5D,IAAI,UAAU,aAAa,UAAU,MAAM,OAAO;IAClD,IAAI,UAAU,UAAU,UAAU,IAAI,OAAO;IAC7C,IAAI,OAAO,UAAU,UAAU,OAAO,KAAK,KAAK,CAAC,QAAQ,MAAM;IAC/D,MAAM,SAAS,OAAO,UAAU,CAAC,OAAO,OAAO,OAAO,CAAC,KAAK;IAC5D,OAAO,MAAM,UAAU,IAAI,KAAK,KAAK,CAAC,SAAS,MAAM;AACvD;AAEA,SAAS,eAAe,KAAgC;IACtD,IAAI,CAAC,OAAO,OAAO,EAAE;IACrB,OAAO,MACJ,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,IACjB,MAAM,CAAC;AACZ;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,QAAQ,GAAG,CAAC,CAAC,sCAAsC,EAAE,UAAU;IAE/D,IAAI,CAAC,IAAA,qIAAkB,KAAI;QACzB,QAAQ,GAAG,CAAC;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO;gBACL,WAAW,EAAE;gBACb,aAAa,EAAE;gBACf,YAAY,EAAE;gBACd,YAAY,EAAE;gBACd,cAAc,EAAE;gBAChB,aAAa,EAAE;gBACf,aAAa,EAAE;gBACf,SAAS,EAAE;YACb;YACA,QAAQ;gBAAE,OAAO,EAAE;gBAAE,OAAO,EAAE;gBAAE,SAAS,EAAE;gBAAE,OAAO,EAAE;YAAC;YACvD,eAAe,EAAE;YACjB,eAAe,wIAAc;YAC7B,QAAQ;YACR,QAAQ;QACV;IACF;IAEA,IAAI;QACF,MAAM,CAAC,WAAW,YAAY,UAAU,GAAG,MAAM,QAAQ,GAAG,CAAC;YAC3D,IAAA,6HAAU,EAAC,YAAY;YACvB,IAAA,8HAAW;YACX,IAAA,qIAAkB;SACnB;QAED,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,UAAU,MAAM,CAAC,SAAS,EAAE,WAAW,MAAM,CAAC,QAAQ,EAAE,UAAU,MAAM,EAAE;QAE9G,MAAM,eAAsC;YAC1C,WAAW,EAAE;YACb,aAAa,EAAE;YACf,YAAY,EAAE;YACd,YAAY,EAAE;YACd,cAAc,EAAE;YAChB,aAAa,EAAE;YACf,aAAa,EAAE;YACf,SAAS,EAAE;QACb;QAEA,IAAI,sBAAsB;QAC1B,IAAI,mBAAmB;QAEvB,KAAK,MAAM,KAAK,UAAW;YACzB,MAAM,gBAAgB,aAAa,EAAE,eAAe;YACpD,MAAM,aAAa,aAAa,EAAE,YAAY;YAC9C,MAAM,cAAc,aAAa,EAAE,SAAS;YAE5C,IAAI,CAAC,aAAa;gBAChB;gBACA;YACF;YAEA,wBAAwB;YACxB,sFAAsF;YACtF,oEAAoE;YACpE,kFAAkF;YAClF,oEAAoE;YACpE,IAAI,aAAa,aAAa,CAAC,eAAe;gBAC5C;gBACA;YACF;YACA,IAAI,aAAa,UAAU,CAAC,YAAY;gBACtC;gBACA;YACF;YAEA,MAAM,WAAW,OAAO,EAAE,QAAQ,IAAI,IAAI,WAAW;YAErD,2CAA2C;YAC3C,MAAM,cAAc,WAAW,EAAE,YAAY,KAAK,WAAW,EAAE,KAAK;YACpE,MAAM,cAAc,WAAW,EAAE,YAAY;YAC7C,MAAM,aAAa,WAAW,EAAE,WAAW;YAE3C,MAAM,eAAe,WAAW,EAAE,aAAa,KAAK,WAAW,EAAE,MAAM;YACvE,MAAM,eAAe,WAAW,EAAE,aAAa;YAC/C,MAAM,cAAc,WAAW,EAAE,YAAY;YAE7C,MAAM,OAAO;gBACX,IAAI,EAAE,EAAE,IAAI,EAAE,EAAE;gBAChB,MAAM,EAAE,IAAI,IAAI;gBAChB,aAAa,EAAE,WAAW,IAAI;gBAC9B,aAAa,EAAE,WAAW,IAAI;gBAC9B,QAAQ;oBACN,QAAQ;oBACR,QAAQ;oBACR,OAAO;gBACT;gBACA,SAAS;oBACP,QAAQ;oBACR,QAAQ;oBACR,OAAO;gBACT;gBACA,SAAS;gBACT,cAAc,aAAa,EAAE,aAAa;gBAC1C,OAAO,EAAE,KAAK,IAAI;gBAClB,WAAW;gBACX,WAAW;oBACT,UAAU,YAAY,EAAE,QAAQ;oBAChC,SAAS,YAAY,EAAE,OAAO;oBAC9B,MAAM,YAAY,EAAE,IAAI;oBACxB,OAAO,YAAY,EAAE,KAAK;oBAC1B,QAAQ;gBACV;gBACA,UAAU;gBACV,UAAU,iBAAiB,aAAa,SAAS,gBAAgB,YAAY;YAC/E;YAEA,IAAI,aAAa,aAAa;gBAC5B,aAAa,SAAS,CAAC,IAAI,CAAC;YAC9B,OAAO,IAAI,aAAa,WAAW;gBACjC,aAAa,OAAO,CAAC,IAAI,CAAC;YAC5B,OAAO,IAAI,aAAa,UAAU,aAAa,WAAW,aAAa,QAAQ;gBAC7E,MAAM,gBAAgB,CAAC,MAAM,EAAE,UAAU;gBACzC,MAAM,iBAAiB,CAAC,OAAO,EAAE,UAAU;gBAE3C,IAAI,YAAY,CAAC,cAAc,EAAE;oBAC/B,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC;wBAAE,GAAG,IAAI;wBAAE,UAAU;oBAAc;gBACtE;gBACA,IAAI,YAAY,CAAC,eAAe,EAAE;oBAChC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC;wBAAE,GAAG,IAAI;wBAAE,IAAI,GAAG,KAAK,EAAE,CAAC,OAAO,CAAC;wBAAE,UAAU;oBAAe;gBACjG;YACF;QACF;QAEA,QAAQ,GAAG,CAAC,CAAC,2BAA2B,EAAE,oBAAoB,gBAAgB,EAAE,iBAAiB,WAAW,CAAC;QAC7G,QAAQ,GAAG,CACT,CAAC,mBAAmB,CAAC,EACrB,OAAO,OAAO,CAAC,cACZ,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,GAAG,EAAE,CAAC,EAAE,EAAE,MAAM,EAAE,EAClC,IAAI,CAAC;QAGV,mCAAmC;QACnC,MAAM,gBAAuC;YAC3C,OAAO,EAAE;YACT,OAAO,EAAE;YACT,SAAS,EAAE;YACX,OAAO,EAAE;QACX;QAEA,KAAK,MAAM,KAAK,WAAY;YAC1B,MAAM,cAAc,aAAa,EAAE,SAAS;YAC5C,IAAI,CAAC,aAAa;YAElB,MAAM,WAAW,OAAO,EAAE,QAAQ,IAAI,IAAI,WAAW;YAErD,MAAM,QAAQ;gBACZ,IAAI,EAAE,EAAE,IAAI,EAAE,EAAE;gBAChB,MAAM,EAAE,IAAI,IAAI;gBAChB,OAAO,WAAW,EAAE,KAAK;gBACzB,OAAO,EAAE,KAAK,IAAI;gBAClB,WAAW;gBACX,aAAa,EAAE,WAAW,IAAI;gBAC9B,aAAa,EAAE,WAAW,IAAI;gBAC9B,WAAW;oBACT,UAAU,YAAY,EAAE,QAAQ;oBAChC,SAAS,YAAY,EAAE,OAAO;oBAC9B,MAAM,YAAY,EAAE,IAAI;oBACxB,OAAO,YAAY,EAAE,KAAK;oBAC1B,QAAQ,WAAW,EAAE,MAAM;gBAC7B;gBACA,UAAU;YACZ;YAEA,IAAI,aAAa,CAAC,SAAS,EAAE;gBAC3B,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC;YAC/B;QACF;QAEA,QAAQ,GAAG,CACT,CAAC,oBAAoB,CAAC,EACtB,OAAO,OAAO,CAAC,eACZ,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,GAAG,EAAE,CAAC,EAAE,EAAE,MAAM,EAAE,EAClC,IAAI,CAAC;QAGV,0CAA0C;QAC1C,MAAM,gBAAgB,UACnB,MAAM,CAAC,CAAC,OAAS,aAAa,KAAK,YAAY,GAC/C,GAAG,CAAC,CAAC,OAAS,CAAC;gBACd,IAAI,KAAK,EAAE,IAAI,KAAK,EAAE;gBACtB,MAAM,KAAK,IAAI,IAAI;gBACnB,UAAU,KAAK,QAAQ,IAAI;gBAC3B,aAAa,WAAW,KAAK,YAAY;gBACzC,gBAAgB,WAAW,KAAK,gBAAgB;gBAChD,aAAa;gBACb,oBAAoB,eAAe,KAAK,mBAAmB;YAC7D,CAAC;QAEH,+DAA+D;QAC/D,MAAM,eAAe,IAAI;QACzB,cAAc,OAAO,CAAC,CAAC;YACrB,KAAK,kBAAkB,CAAC,OAAO,CAAC,CAAC;gBAC/B,IAAI,UAAU;oBACZ,aAAa,GAAG,CAAC,SAAS,IAAI;gBAChC;YACF;QACF;QAEA,iEAAiE;QACjE,MAAM,gBAAgB,aAAa,IAAI,GAAG,IACtC,MAAM,IAAI,CAAC,cAAc,IAAI,KAC7B,wIAAc;QAElB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO;YACP,QAAQ;YACR;YACA;YACA,QAAQ;YACR,QAAQ;gBACN,OAAO,UAAU,MAAM;gBACvB,eAAe,OAAO,MAAM,CAAC,cAAc,IAAI,GAAG,MAAM;gBACxD,QAAQ,WAAW,MAAM;gBACzB,eAAe,cAAc,MAAM;YACrC;QACF;IACF,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,QAAQ,KAAK,CAAC,qCAAqC;QAEnD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO;gBACL,WAAW,EAAE;gBACb,aAAa,EAAE;gBACf,YAAY,EAAE;gBACd,YAAY,EAAE;gBACd,cAAc,EAAE;gBAChB,aAAa,EAAE;gBACf,aAAa,EAAE;gBACf,SAAS,EAAE;YACb;YACA,QAAQ;gBAAE,OAAO,EAAE;gBAAE,OAAO,EAAE;gBAAE,SAAS,EAAE;gBAAE,OAAO,EAAE;YAAC;YACvD,eAAe,EAAE;YACjB,eAAe,wIAAc;YAC7B,QAAQ;YACR,QAAQ;QACV;IACF;AACF"}}]
}