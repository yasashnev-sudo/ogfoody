{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/app/api/db/setup-tables/route.ts"],"sourcesContent":["// API route для автоматического создания таблиц в NocoDB\n// Создает все необходимые таблицы с правильной структурой\n\nimport { NextResponse } from \"next/server\"\n\n// Определения структуры таблиц\ninterface TableColumn {\n  column_name: string\n  title: string\n  uidt: string // NocoDB column type\n  dt?: string\n  rqd?: boolean // required\n  pk?: boolean // primary key\n  ai?: boolean // auto increment\n  cdf?: string // default value\n  un?: boolean // unique\n  dtx?: string // data type extra\n  ct?: string // column type\n  meta?: Record<string, any>\n}\n\ninterface TableDefinition {\n  title: string\n  table_name: string\n  columns: TableColumn[]\n}\n\nconst tableDefinitions: Record<string, TableColumn[]> = {\n  Meals: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"name\", title: \"Название\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"category\", title: \"Категория\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"ingredients\", title: \"Ингредиенты\", uidt: \"LongText\", rqd: true },\n    { column_name: \"description\", title: \"Описание\", uidt: \"LongText\", rqd: false },\n    { column_name: \"price_single\", title: \"Цена (стандарт)\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"price_medium\", title: \"Цена (средний)\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"price_large\", title: \"Цена (большой)\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"weight_single\", title: \"Вес (стандарт)\", uidt: \"Number\", rqd: false },\n    { column_name: \"weight_medium\", title: \"Вес (средний)\", uidt: \"Number\", rqd: false },\n    { column_name: \"weight_large\", title: \"Вес (большой)\", uidt: \"Number\", rqd: false },\n    { column_name: \"image\", title: \"Изображение\", uidt: \"Attachment\", rqd: false },\n    { column_name: \"available\", title: \"Доступно\", uidt: \"Checkbox\", rqd: false, cdf: \"true\" },\n    { column_name: \"needs_garnish\", title: \"Нужен гарнир\", uidt: \"Checkbox\", rqd: false, cdf: \"false\" },\n    { column_name: \"calories\", title: \"Калории\", uidt: \"Number\", rqd: false },\n    { column_name: \"protein\", title: \"Белки\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"fats\", title: \"Жиры\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"carbs\", title: \"Углеводы\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"is_current_week\", title: \"Текущая неделя\", uidt: \"Checkbox\", rqd: false },\n    { column_name: \"is_next_week\", title: \"Следующая неделя\", uidt: \"Checkbox\", rqd: false },\n  ],\n  Extras: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"name\", title: \"Название\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"category\", title: \"Категория\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"ingredients\", title: \"Ингредиенты\", uidt: \"LongText\", rqd: false },\n    { column_name: \"description\", title: \"Описание\", uidt: \"LongText\", rqd: false },\n    { column_name: \"price\", title: \"Цена\", uidt: \"Decimal\", rqd: true },\n    { column_name: \"image\", title: \"Изображение\", uidt: \"Attachment\", rqd: false },\n    { column_name: \"available\", title: \"Доступно\", uidt: \"Checkbox\", rqd: false, cdf: \"true\" },\n    { column_name: \"calories\", title: \"Калории\", uidt: \"Number\", rqd: false },\n    { column_name: \"protein\", title: \"Белки\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"fats\", title: \"Жиры\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"carbs\", title: \"Углеводы\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"weight\", title: \"Вес\", uidt: \"Number\", rqd: false },\n  ],\n  Delivery_Zones: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"city\", title: \"Город\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"district\", title: \"Район\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"delivery_fee\", title: \"Стоимость доставки\", uidt: \"Decimal\", rqd: true },\n    { column_name: \"min_order_amount\", title: \"Минимальная сумма заказа\", uidt: \"Decimal\", rqd: true },\n    { column_name: \"is_available\", title: \"Доступно\", uidt: \"Checkbox\", rqd: false, cdf: \"true\" },\n    { column_name: \"available_intervals\", title: \"Доступные интервалы\", uidt: \"JSON\", rqd: false },\n  ],\n  Users: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"phone\", title: \"Телефон\", uidt: \"PhoneNumber\", rqd: true, un: true },\n    { column_name: \"password_hash\", title: \"Хеш пароля\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"name\", title: \"Имя\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"additional_phone\", title: \"Дополнительный телефон\", uidt: \"PhoneNumber\", rqd: false },\n    { column_name: \"street\", title: \"Улица\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"building\", title: \"Дом\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"building_section\", title: \"Корпус/Секция\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"apartment\", title: \"Квартира\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"entrance\", title: \"Подъезд\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"floor\", title: \"Этаж\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"intercom\", title: \"Домофон\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"district\", title: \"Район\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"delivery_comment\", title: \"Комментарий к доставке\", uidt: \"LongText\", rqd: false },\n    { column_name: \"loyalty_points\", title: \"Баллы лояльности\", uidt: \"Number\", rqd: true, cdf: \"0\" },\n    { column_name: \"total_spent\", title: \"Всего потрачено\", uidt: \"Decimal\", rqd: true, cdf: \"0\" },\n  ],\n  Orders: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"user_id\", title: \"ID пользователя\", uidt: \"Number\", rqd: false },\n    { column_name: \"order_number\", title: \"Номер заказа\", uidt: \"SingleLineText\", rqd: true, un: true },\n    { column_name: \"start_date\", title: \"Дата начала\", uidt: \"Date\", rqd: true },\n    { column_name: \"delivery_time\", title: \"Время доставки\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"status\", title: \"Статус\", uidt: \"SingleLineText\", rqd: true, cdf: \"pending\" },\n    { column_name: \"payment_method\", title: \"Способ оплаты\", uidt: \"SingleLineText\", rqd: true, cdf: \"cash\" },\n    { column_name: \"paid\", title: \"Оплачено\", uidt: \"Checkbox\", rqd: false, cdf: \"false\" },\n    { column_name: \"paid_at\", title: \"Дата оплаты\", uidt: \"DateTime\", rqd: false },\n    { column_name: \"delivered\", title: \"Доставлено\", uidt: \"Checkbox\", rqd: false, cdf: \"false\" },\n    { column_name: \"cancelled\", title: \"Отменено\", uidt: \"Checkbox\", rqd: false, cdf: \"false\" },\n    { column_name: \"promo_code\", title: \"Промокод\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"promo_discount\", title: \"Скидка по промокоду\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"loyalty_points_used\", title: \"Использовано баллов\", uidt: \"Number\", rqd: true, cdf: \"0\" },\n    { column_name: \"loyalty_points_earned\", title: \"Заработано баллов\", uidt: \"Number\", rqd: true, cdf: \"0\" },\n    { column_name: \"subtotal\", title: \"Подытог\", uidt: \"Decimal\", rqd: true, cdf: \"0\" },\n    { column_name: \"total\", title: \"Итого\", uidt: \"Decimal\", rqd: true, cdf: \"0\" },\n    { column_name: \"guest_phone\", title: \"Телефон гостя\", uidt: \"PhoneNumber\", rqd: false },\n    { column_name: \"guest_address\", title: \"Адрес гостя\", uidt: \"LongText\", rqd: false },\n  ],\n  Order_Persons: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"order_id\", title: \"ID заказа\", uidt: \"Number\", rqd: true },\n    { column_name: \"person_number\", title: \"Номер персоны\", uidt: \"Number\", rqd: true },\n  ],\n  Order_Meals: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"order_person_id\", title: \"ID персоны заказа\", uidt: \"Number\", rqd: true },\n    { column_name: \"day\", title: \"День\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"meal_time\", title: \"Время приема пищи\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"meal_type\", title: \"Тип блюда\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"meal_id\", title: \"ID блюда\", uidt: \"Number\", rqd: true },\n    { column_name: \"portion_size\", title: \"Размер порции\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"price\", title: \"Цена\", uidt: \"Decimal\", rqd: true },\n    { column_name: \"garnish_id\", title: \"ID гарнира\", uidt: \"Number\", rqd: false },\n    { column_name: \"garnish_portion_size\", title: \"Размер порции гарнира\", uidt: \"SingleLineText\", rqd: false },\n    { column_name: \"garnish_price\", title: \"Цена гарнира\", uidt: \"Decimal\", rqd: false },\n  ],\n  Order_Extras: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"order_id\", title: \"ID заказа\", uidt: \"Number\", rqd: true },\n    { column_name: \"extra_id\", title: \"ID дополнения\", uidt: \"Number\", rqd: true },\n    { column_name: \"quantity\", title: \"Количество\", uidt: \"Number\", rqd: true, cdf: \"1\" },\n    { column_name: \"price\", title: \"Цена\", uidt: \"Decimal\", rqd: true },\n  ],\n  Promo_Codes: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"code\", title: \"Код\", uidt: \"SingleLineText\", rqd: true, un: true },\n    { column_name: \"discount_type\", title: \"Тип скидки\", uidt: \"SingleLineText\", rqd: true },\n    { column_name: \"discount_value\", title: \"Значение скидки\", uidt: \"Decimal\", rqd: true },\n    { column_name: \"min_order_amount\", title: \"Минимальная сумма заказа\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"max_discount\", title: \"Максимальная скидка\", uidt: \"Decimal\", rqd: false },\n    { column_name: \"valid_from\", title: \"Действителен с\", uidt: \"Date\", rqd: false },\n    { column_name: \"valid_until\", title: \"Действителен до\", uidt: \"Date\", rqd: false },\n    { column_name: \"usage_limit\", title: \"Лимит использований\", uidt: \"Number\", rqd: false },\n    { column_name: \"times_used\", title: \"Использовано раз\", uidt: \"Number\", rqd: true, cdf: \"0\" },\n    { column_name: \"active\", title: \"Активен\", uidt: \"Checkbox\", rqd: false, cdf: \"true\" },\n  ],\n  Reviews: [\n    { column_name: \"Id\", title: \"Id\", uidt: \"ID\", pk: true, ai: true },\n    { column_name: \"order_id\", title: \"ID заказа\", uidt: \"Number\", rqd: true },\n    { column_name: \"user_id\", title: \"ID пользователя\", uidt: \"Number\", rqd: true },\n    { column_name: \"rating\", title: \"Оценка\", uidt: \"Number\", rqd: true },\n    { column_name: \"text\", title: \"Текст отзыва\", uidt: \"LongText\", rqd: false },\n  ],\n}\n\nasync function createTable(\n  baseUrl: string,\n  token: string,\n  baseId: string,\n  tableName: string,\n  columns: TableColumn[],\n): Promise<{ success: boolean; tableId?: string; error?: string }> {\n  try {\n    // Сначала проверяем, существует ли таблица\n    const tablesUrl = `${baseUrl}/api/v2/meta/bases/${baseId}/tables`\n    const tablesResponse = await fetch(tablesUrl, {\n      headers: {\n        \"xc-token\": token,\n        \"Content-Type\": \"application/json\",\n      },\n    })\n\n    if (tablesResponse.ok) {\n      const tablesData = await tablesResponse.json()\n      const existingTable = tablesData?.list?.find(\n        (t: any) => t.title === tableName || t.table_name === tableName.toLowerCase().replace(/_/g, \"\"),\n      )\n      if (existingTable) {\n        return { success: true, tableId: existingTable.id }\n      }\n    }\n\n    // Создаем таблицу\n    const createTableUrl = `${baseUrl}/api/v2/meta/bases/${baseId}/tables`\n    const createResponse = await fetch(createTableUrl, {\n      method: \"POST\",\n      headers: {\n        \"xc-token\": token,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        table_name: tableName.toLowerCase().replace(/_/g, \"\"),\n        title: tableName,\n        columns: columns.map((col) => ({\n          column_name: col.column_name,\n          title: col.title,\n          uidt: col.uidt,\n          dt: col.dt,\n          rqd: col.rqd || false,\n          pk: col.pk || false,\n          ai: col.ai || false,\n          cdf: col.cdf,\n          un: col.un || false,\n          dtx: col.dtx,\n          ct: col.ct,\n          meta: col.meta || {},\n        })),\n      }),\n    })\n\n    if (!createResponse.ok) {\n      const errorText = await createResponse.text()\n      return { success: false, error: `Failed to create table: ${createResponse.status} - ${errorText}` }\n    }\n\n    const tableData = await createResponse.json()\n    return { success: true, tableId: tableData.id }\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : String(error) }\n  }\n}\n\nexport async function POST() {\n  const NOCODB_URL = process.env.NOCODB_URL\n  const NOCODB_TOKEN = process.env.NOCODB_TOKEN\n  const NOCODB_BASE_ID = process.env.NOCODB_PROJECT_ID || process.env.NOCODB_BASE_ID\n\n  if (!NOCODB_URL || !NOCODB_TOKEN) {\n    return NextResponse.json(\n      {\n        error: \"NocoDB not configured\",\n        message: \"NOCODB_URL и NOCODB_TOKEN должны быть установлены\",\n      },\n      { status: 500 },\n    )\n  }\n\n  if (!NOCODB_BASE_ID) {\n    return NextResponse.json(\n      {\n        error: \"NOCODB_BASE_ID not configured\",\n        message: \"NOCODB_PROJECT_ID или NOCODB_BASE_ID должны быть установлены\",\n      },\n      { status: 500 },\n    )\n  }\n\n  const baseUrl = NOCODB_URL.replace(/\\/api\\/v2\\/?$/, \"\")\n  const results: Record<string, any> = {}\n  const createdTableIds: Record<string, string> = {}\n\n  // Создаем каждую таблицу\n  for (const [tableName, columns] of Object.entries(tableDefinitions)) {\n    const result = await createTable(baseUrl, NOCODB_TOKEN, NOCODB_BASE_ID, tableName, columns)\n    results[tableName] = result\n\n    if (result.success && result.tableId) {\n      createdTableIds[tableName] = result.tableId\n    }\n  }\n\n  // Формируем переменные окружения для обновления\n  const envVars = Object.entries(createdTableIds)\n    .map(([name, id]) => `NOCODB_TABLE_${name.toUpperCase()}=${id}`)\n    .join(\"\\n\")\n\n  const summary = {\n    total: Object.keys(tableDefinitions).length,\n    created: Object.values(results).filter((r) => r.success).length,\n    errors: Object.values(results).filter((r) => !r.success).length,\n    existing: Object.values(results).filter((r) => r.success && !r.tableId).length,\n  }\n\n  return NextResponse.json({\n    success: summary.errors === 0,\n    summary,\n    results,\n    createdTableIds,\n    envVars,\n    instructions: `\nОбновите переменные окружения следующими значениями:\n\n${envVars}\n\nИли скопируйте и вставьте в ваш .env файл или настройки Vercel.\n    `.trim(),\n  })\n}\n\n// GET endpoint для просмотра плана создания таблиц\nexport async function GET() {\n  return NextResponse.json({\n    message: \"Используйте POST запрос для создания таблиц\",\n    tables: Object.keys(tableDefinitions),\n    endpoint: \"POST /api/db/setup-tables\",\n  })\n}\n\n"],"names":[],"mappings":"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"}}]
}