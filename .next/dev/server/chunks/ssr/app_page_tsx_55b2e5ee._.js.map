{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergejasasnev/Downloads/my-project%20%281%29/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Image from \"next/image\"\nimport { Calendar } from \"@/components/calendar\"\nimport { OrderModal } from \"@/components/order-modal\"\nimport { OrderHistory } from \"@/components/order-history\"\nimport { AuthModal } from \"@/components/auth-modal\"\nimport { AppMenu } from \"@/components/app-menu\"\nimport { ProfileModal } from \"@/components/profile-modal\"\nimport { PaymentModal } from \"@/components/payment-modal\"\nimport { ReviewModal } from \"@/components/review-modal\"\nimport { WarningDialog } from \"@/components/warning-dialog\"\nimport { Preloader } from \"@/components/preloader\"\nimport { DailyStatus } from \"@/components/daily-status\"\nimport { FreshSection } from \"@/components/fresh-section\"\nimport { DishSmartModal } from \"@/components/dish-smart-modal\"\nimport { OrderLoadingDialog } from \"@/components/order-loading-dialog\"\nimport { PaymentLoading } from \"@/components/payment-loading\"\nimport { CashPaymentAnimation } from \"@/components/cash-payment-animation\"\nimport { SuccessOrderDialog } from \"@/components/success-order-dialog\"\nimport { CancelOrderLoading } from \"@/components/cancel-order-loading\"\nimport { DistrictSelectionModal } from \"@/components/district-selection-modal\"\nimport { InfoBanner } from \"@/components/info-banner\"\nimport { Button } from \"@/components/ui/button\"\nimport { CalendarIcon, History, LogOut, User, Zap, LogIn } from \"lucide-react\"\nimport { isMealAvailable, isExtraAvailable } from \"@/lib/meals-data\"\nimport type { Order, Person, DayMeals, Extra, UserProfile, Review } from \"@/lib/types\"\nimport { getAvailableDatesForOrdering, canOrderForDate, getWeekTypeForDate } from \"@/lib/menu-utils\"\nimport { getDay, addDays } from \"date-fns\"\nimport { UserProfileHeaderSkeleton, OrderHistorySkeleton } from \"@/components/loading-skeletons\"\nimport { DebugProvider } from \"@/components/debug/DebugContext\"\nimport { DebugFloatingButton } from \"@/components/debug/DebugFloatingButton\"\nimport { useDebug } from \"@/components/debug/DebugContext\"\n\nconst formatDateKey = (date: Date): string => {\n  return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, \"0\")}-${date.getDate().toString().padStart(2, \"0\")}`\n}\n\nconst parseDateKey = (dateKey: string): Date => {\n  const [year, month, day] = dateKey.split(\"-\").map(Number)\n  return new Date(year, month - 1, day)\n}\n\nconst toDate = (value: Date | string): Date => {\n  if (value instanceof Date) return value\n  if (typeof value === \"string\") {\n    if (value.includes(\"T\")) return new Date(value)\n    if (value.includes(\"-\")) return parseDateKey(value)\n  }\n  return new Date(value)\n}\n\nconst getDateTimestamp = (value: Date | string): number => {\n  return toDate(value).getTime()\n}\n\nconst serializeOrders = (orders: Order[]): string => {\n  return JSON.stringify(\n    orders.map((o) => ({\n      ...o,\n      startDate: formatDateKey(toDate(o.startDate)),\n    })),\n  )\n}\n\nconst deserializeOrders = (json: string): Order[] => {\n  try {\n    const parsed = JSON.parse(json)\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n    \n    // ‚úÖ –î–ª—è –≥–æ—Å—Ç–µ–π: —Ö—Ä–∞–Ω–∏–º –∑–∞–∫–∞–∑—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π (–±–æ–ª–µ–µ —Ä–∞–∑—É–º–Ω—ã–π —Å—Ä–æ–∫)\n    const thirtyDaysAgo = new Date(today)\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30)\n\n    return parsed\n      .map((o: any) => ({\n        ...o,\n        startDate: toDate(o.startDate),\n        paid: o.paid ?? false,\n      }))\n      .filter((o: Order) => {\n        const orderDate = toDate(o.startDate)\n        // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∑–∞–∫–∞–∑—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π –∏–ª–∏ –±—É–¥—É—â–∏–µ\n        return orderDate >= thirtyDaysAgo\n      })\n  } catch {\n    return []\n  }\n}\n\n// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ menu-utils.ts –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç\nconst getAvailableDates = (): Date[] => {\n  return getAvailableDatesForOrdering().map((item) => item.date)\n}\n\nconst filterAvailableItems = (order: Order): Order => {\n  const filteredPersons: Person[] = order.persons.map((person) => {\n    const filterDayMeals = (meals: DayMeals): DayMeals => {\n      return {\n        breakfast: {\n          dish: meals.breakfast?.dish && isMealAvailable(meals.breakfast.dish.name) ? meals.breakfast.dish : null,\n        },\n        lunch: {\n          salad: meals.lunch?.salad && isMealAvailable(meals.lunch.salad.name) ? meals.lunch.salad : null,\n          soup: meals.lunch?.soup && isMealAvailable(meals.lunch.soup.name) ? meals.lunch.soup : null,\n          main: meals.lunch?.main && isMealAvailable(meals.lunch.main.name) ? meals.lunch.main : null,\n        },\n        dinner: {\n          salad: meals.dinner?.salad && isMealAvailable(meals.dinner.salad.name) ? meals.dinner.salad : null,\n          soup: meals.dinner?.soup && isMealAvailable(meals.dinner.soup.name) ? meals.dinner.soup : null,\n          main: meals.dinner?.main && isMealAvailable(meals.dinner.main.name) ? meals.dinner.main : null,\n        },\n      }\n    }\n\n    return {\n      ...person,\n      day1: filterDayMeals(person.day1),\n      day2: filterDayMeals(person.day2),\n    }\n  })\n\n  const filteredExtras: Extra[] = (order.extras || []).filter((extra) => isExtraAvailable(extra.name))\n\n  return {\n    ...order,\n    persons: filteredPersons,\n    extras: filteredExtras,\n  }\n}\n\nconst calculateOrderTotal = (order: Order): number => {\n  let total = 0\n  order.persons.forEach((person) => {\n    ;[\"day1\", \"day2\"].forEach((day) => {\n      const dayMeals = person[day as \"day1\" | \"day2\"]\n\n      if (dayMeals.breakfast?.dish) {\n        const dish = dayMeals.breakfast.dish\n        total += dish.price * (dish.portion || 1)\n        if (dish.garnish) {\n          total += dish.garnish.price * (dish.garnish.portion || 1)\n        }\n      }\n\n      if (dayMeals.lunch) {\n        if (dayMeals.lunch.salad) {\n          total += dayMeals.lunch.salad.price * (dayMeals.lunch.salad.portion || 1)\n        }\n        if (dayMeals.lunch.soup) {\n          total += dayMeals.lunch.soup.price * (dayMeals.lunch.soup.portion || 1)\n        }\n        if (dayMeals.lunch.main) {\n          const main = dayMeals.lunch.main\n          total += main.price * (main.portion || 1)\n          if (main.garnish) {\n            total += main.garnish.price * (main.garnish.portion || 1)\n          }\n        }\n      }\n\n      if (dayMeals.dinner) {\n        if (dayMeals.dinner.salad) {\n          total += dayMeals.dinner.salad.price * (dayMeals.dinner.salad.portion || 1)\n        }\n        if (dayMeals.dinner.soup) {\n          total += dayMeals.dinner.soup.price * (dayMeals.dinner.soup.portion || 1)\n        }\n        if (dayMeals.dinner.main) {\n          const main = dayMeals.dinner.main\n          total += main.price * (main.portion || 1)\n          if (main.garnish) {\n            total += main.garnish.price * (main.garnish.portion || 1)\n          }\n        }\n      }\n    })\n  })\n  order.extras?.forEach((extra) => {\n    total += extra.price * extra.quantity\n  })\n  return total\n}\n\nconst calculateOrderTotalForHistory = (order: Order): number => {\n  let total = 0\n  order.persons.forEach((person) => {\n    ;[\"day1\", \"day2\"].forEach((day) => {\n      const dayMeals = person[day as \"day1\" | \"day2\"]\n\n      if (dayMeals.breakfast?.dish) {\n        const dish = dayMeals.breakfast.dish\n        total += dish.price * (dish.portion || 1)\n        if (dish.garnish) {\n          total += dish.garnish.price * (dish.garnish.portion || 1)\n        }\n      }\n\n      if (dayMeals.lunch) {\n        if (dayMeals.lunch.salad) {\n          total += dayMeals.lunch.salad.price * (dayMeals.lunch.salad.portion || 1)\n        }\n        if (dayMeals.lunch.soup) {\n          total += dayMeals.lunch.soup.price * (dayMeals.lunch.soup.portion || 1)\n        }\n        if (dayMeals.lunch.main) {\n          const main = dayMeals.lunch.main\n          total += main.price * (main.portion || 1)\n          if (main.garnish) {\n            total += main.garnish.price * (main.garnish.portion || 1)\n          }\n        }\n      }\n\n      if (dayMeals.dinner) {\n        if (dayMeals.dinner.salad) {\n          total += dayMeals.dinner.salad.price * (dayMeals.dinner.salad.portion || 1)\n        }\n        if (dayMeals.dinner.soup) {\n          total += dayMeals.dinner.soup.price * (dayMeals.dinner.soup.portion || 1)\n        }\n        if (dayMeals.dinner.main) {\n          const main = dayMeals.dinner.main\n          total += main.price * (main.portion || 1)\n          if (main.garnish) {\n            total += main.garnish.price * (main.garnish.portion || 1)\n          }\n        }\n      }\n    })\n  })\n  order.extras?.forEach((extra) => {\n    total += extra.price * extra.quantity\n  })\n  return total\n}\n\nexport default function Home() {\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null)\n  \n  return (\n    <DebugProvider userId={userProfile?.id?.toString()} userEmail={userProfile?.email}>\n      <HomeWithDebug \n        userProfile={userProfile}\n        setUserProfile={setUserProfile}\n      />\n    </DebugProvider>\n  )\n}\n\ninterface HomeWithDebugProps {\n  userProfile: UserProfile | null;\n  setUserProfile: React.Dispatch<React.SetStateAction<UserProfile | null>>;\n}\n\nfunction HomeWithDebug({ userProfile: initialUserProfile, setUserProfile: setParentUserProfile }: HomeWithDebugProps) {\n  const debug = useDebug() // ‚úÖ –¢–µ–ø–µ—Ä—å –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!\n  \n  const [selectedDate, setSelectedDate] = useState<Date | null>(null)\n  const [orders, setOrders] = useState<Order[]>([])\n  const [view, setView] = useState<\"calendar\" | \"history\">(\"calendar\")\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [currentUser, setCurrentUser] = useState<string | null>(null)\n  const [showProfile, setShowProfile] = useState(false)\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(initialUserProfile)\n  \n  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º userProfile —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º\n  useEffect(() => {\n    setParentUserProfile(userProfile)\n  }, [userProfile, setParentUserProfile])\n  \n  useEffect(() => {\n    setUserProfile(initialUserProfile)\n  }, [initialUserProfile])\n  \n  // ‚úÖ –ù–ï –ò–ù–ò–¶–ò–ê–õ–ò–ó–ò–†–£–ï–ú Debug –∑–¥–µ—Å—å - –±—É–¥–µ–º –ø–æ–ª—É—á–∞—Ç—å –∏–∑ Provider\n  // const debug = useDebug() - –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—à–µ DebugProvider!\n  const [paymentOrder, setPaymentOrder] = useState<{ order: Order; total: number; isNewOrder?: boolean } | null>(null)\n  const [reviews, setReviews] = useState<Review[]>([])\n  const [reviewOrder, setReviewOrder] = useState<Order | null>(null)\n  const [showAuthModal, setShowAuthModal] = useState(false)\n  const [showDistrictModal, setShowDistrictModal] = useState(false)\n  const [pendingCheckout, setPendingCheckout] = useState<{ order: Order; total: number } | null>(null)\n  const [shouldAutoCheckout, setShouldAutoCheckout] = useState(false)\n  const [selectedDish, setSelectedDish] = useState<{\n    dish: { name: string; image: string; price: number; description?: string }\n    availableDate: Date\n  } | null>(null)\n  \n  // ‚úÖ SAFE DATA LOADING: Loading states –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç race condition\n  const [isUserLoading, setIsUserLoading] = useState(false)\n  const [isOrdersLoading, setIsOrdersLoading] = useState(false)\n  const [isPointsLoading, setIsPointsLoading] = useState(false)\n  \n  // Animation states\n  const [showOrderLoading, setShowOrderLoading] = useState(false)\n  const [showPaymentLoading, setShowPaymentLoading] = useState(false)\n  const [showCashPaymentAnimation, setShowCashPaymentAnimation] = useState(false)\n  const [showCancelLoading, setShowCancelLoading] = useState(false)\n  const [successDialog, setSuccessDialog] = useState<{\n    open: boolean\n    loyaltyPointsEarned?: number\n    loyaltyPointsStatus?: \"pending\" | \"earned\"\n    loyaltyPointsMessage?: string\n  }>({\n    open: false,\n    loyaltyPointsEarned: 0,\n    loyaltyPointsStatus: undefined,\n    loyaltyPointsMessage: undefined,\n  })\n  \n  // Warning dialog state\n  const [warningDialog, setWarningDialog] = useState<{\n    open: boolean\n    title: string\n    description: string\n    variant?: \"warning\" | \"error\" | \"info\"\n    onConfirm?: () => void\n  }>({\n    open: false,\n    title: \"\",\n    description: \"\",\n    variant: \"warning\",\n  })\n  \n  const showWarning = (title: string, description: string, variant: \"warning\" | \"error\" | \"info\" = \"warning\", onConfirm?: () => void) => {\n    setWarningDialog({\n      open: true,\n      title,\n      description,\n      variant,\n      onConfirm,\n    })\n  }\n  \n  const closeWarning = () => {\n    setWarningDialog((prev) => {\n      if (prev.onConfirm) {\n        prev.onConfirm()\n      }\n      return { ...prev, open: false }\n    })\n  }\n\n  // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –î–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ PaymentModal\n  const [cancelPaymentDialog, setCancelPaymentDialog] = useState<{\n    open: boolean\n    orderId: number | null\n  }>({\n    open: false,\n    orderId: null,\n  })\n\n  // ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞\n  const [selectedDistrict, setSelectedDistrict] = useState<string | null>(null)\n  const [showInfoBanner, setShowInfoBanner] = useState(true)\n\n  // ‚úÖ –ò–ó–ú–ï–ù–ï–ù–û 10.01.2026: –£–±–∏—Ä–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ —Ä–∞–π–æ–Ω–∞ –¥–ª—è –≥–æ—Å—Ç–µ–π\n  // –¢–µ–ø–µ—Ä—å –≥–æ—Å—Ç–∏ –≤—ã–±–∏—Ä–∞—é—Ç —Ä–∞–π–æ–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞\n  // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ä–∞–π–æ–Ω–∞ –∏–∑ localStorage\n  useEffect(() => {\n    const isAuth = localStorage.getItem(\"currentUser\")\n    const guestDistrict = localStorage.getItem(\"guest_district\")\n    \n    if (!isAuth && guestDistrict) {\n      console.log(\"üìç –ó–∞–≥—Ä—É–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π —Ä–∞–π–æ–Ω –≥–æ—Å—Ç—è:\", guestDistrict)\n      setSelectedDistrict(guestDistrict)\n    }\n  }, [])\n\n  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏\n  useEffect(() => {\n    console.log(\"üîç [useEffect] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å—Ä–∞–±–æ—Ç–∞–ª–∞:\", {\n      isAuthenticated,\n      hasUserProfile: !!userProfile,\n      shouldAutoCheckout,\n      hasPendingCheckout: !!pendingCheckout,\n      userName: userProfile?.name,\n      userStreet: userProfile?.street,\n      userBuilding: userProfile?.building,\n      userDistrict: userProfile?.district,\n    })\n    \n    console.log(\"üîç [useEffect] –î–ï–¢–ê–õ–¨–ù–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø:\", {\n      \"isAuthenticated (–æ–∂–∏–¥–∞–µ—Ç—Å—è true)\": isAuthenticated,\n      \"userProfile (–æ–∂–∏–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç)\": userProfile,\n      \"shouldAutoCheckout (–æ–∂–∏–¥–∞–µ—Ç—Å—è true)\": shouldAutoCheckout,\n      \"pendingCheckout (–æ–∂–∏–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç)\": pendingCheckout,\n    })\n    \n    if (!isAuthenticated) {\n      console.log(\"‚ùå isAuthenticated = false\")\n    }\n    if (!userProfile) {\n      console.log(\"‚ùå userProfile = null\")\n    }\n    if (!shouldAutoCheckout) {\n      console.log(\"‚ùå shouldAutoCheckout = false ‚Üê –ü–†–û–ë–õ–ï–ú–ê –ó–î–ï–°–¨!\")\n    }\n    if (!pendingCheckout) {\n      console.log(\"‚ùå pendingCheckout = null\")\n    }\n    \n    if (isAuthenticated && userProfile && shouldAutoCheckout && pendingCheckout) {\n      console.log(\"‚úÖ –í–°–ï –£–°–õ–û–í–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´! –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å...\")\n      console.log(\"üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–æ—Ñ–∏–ª—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:\", {\n        name: userProfile.name,\n        street: userProfile.street,\n        building: userProfile.building,\n        district: userProfile.district,\n      })\n      \n      const isProfileComplete = userProfile.name && userProfile.street && userProfile.building\n      \n      if (!isProfileComplete) {\n        console.log(\"‚ö†Ô∏è –ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω, –æ—Ç–∫—Ä—ã–≤–∞–µ–º ProfileModal\")\n        setShowProfile(true)\n      } else {\n        console.log(\"‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –∑–∞–ø–æ–ª–Ω–µ–Ω, –∑–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ\")\n        handleAutoCheckout()\n      }\n    } else {\n      console.log(\"‚ö†Ô∏è [useEffect] –£—Å–ª–æ–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, ProfileModal –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è\")\n    }\n  }, [isAuthenticated, userProfile, shouldAutoCheckout, pendingCheckout])\n\n  useEffect(() => {\n    // ‚úÖ –ù–û–í–û–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º URL –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ localStorage\n    const urlParams = new URLSearchParams(window.location.search)\n    if (urlParams.get('clear') === '1') {\n      console.log('üßπ –û—á–∏—Å—Ç–∫–∞ localStorage –ø–æ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—É...')\n      localStorage.clear()\n      // –£–±–∏—Ä–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–∑ URL –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º\n      window.history.replaceState({}, '', window.location.pathname)\n      window.location.reload()\n      return\n    }\n    \n    const user = localStorage.getItem(\"currentUser\")\n    console.log('üöÄ useEffect mount: currentUser =', user)\n    \n    if (user) {\n      setIsAuthenticated(true)\n      setCurrentUser(user)\n      \n      // üîí SAFE DATA LOADING: –í–∫–ª—é—á–∞–µ–º –≤—Å–µ –ª–æ–∞–¥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n      setIsUserLoading(true)\n      setIsOrdersLoading(true)\n      setIsPointsLoading(true)\n      \n      // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –û—á–∏—â–∞–µ–º –í–°–ï –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n      // –ü—Ä–∞–≤–∏–ª–æ: \"–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã - NocoDB\"\n      const oldOrdersKey = `orders_${user}`\n      const oldProfileKey = `profile_${user}`\n      \n      console.log('üßπ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è')\n      localStorage.removeItem(oldOrdersKey) // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∑–∞–∫–∞–∑—ã\n      // –ù–µ —É–¥–∞–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é, –Ω–æ –±—É–¥–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∞–ª–ª—ã –∏–∑ –Ω–µ–≥–æ\n      \n      const savedProfile = localStorage.getItem(oldProfileKey)\n      let tempProfile = null\n      \n      if (savedProfile) {\n        tempProfile = JSON.parse(savedProfile)\n        // ‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ë–ï–ó –±–∞–ª–ª–æ–≤ (–æ–Ω–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∏–∑ API)\n        setUserProfile({ ...tempProfile, loyaltyPoints: 0, totalSpent: 0 })\n        console.log('‚è≥ –ü—Ä–æ—Ñ–∏–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ –±–∞–ª–ª–æ–≤), –æ–∂–∏–¥–∞–µ–º API...')\n      }\n      \n      // üì° –ì–õ–ê–í–ù–ê–Ø –ó–ê–ì–†–£–ó–ö–ê: –¢–æ–ª—å–∫–æ API, –Ω–∏–∫–∞–∫–æ–≥–æ localStorage!\n      if (tempProfile?.id) {\n        console.log('üì° –ó–∞–≥—Ä—É–∑–∫–∞ –í–°–ï–• –¥–∞–Ω–Ω—ã—Ö –∏–∑ API –¥–ª—è userId:', tempProfile.id)\n        \n        fetch(`/api/orders?userId=${tempProfile.id}`)\n          .then(res => {\n            console.log('üì• –û—Ç–≤–µ—Ç API:', res.status)\n            if (!res.ok) throw new Error(`API error: ${res.status}`)\n            return res.json()\n          })\n          .then(data => {\n            console.log('üì¶ –î–∞–Ω–Ω—ã–µ –∏–∑ API –ø–æ–ª—É—á–µ–Ω—ã:', {\n              –∑–∞–∫–∞–∑–æ–≤: data.orders?.length || 0,\n              –±–∞–ª–ª—ã: data.userProfile?.loyaltyPoints,\n              –ø–æ—Ç—Ä–∞—á–µ–Ω–æ: data.userProfile?.totalSpent\n            })\n            \n            // ‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–î\n            if (data.userProfile) {\n              const updatedProfile = {\n                ...tempProfile,\n                loyaltyPoints: data.userProfile.loyaltyPoints ?? 0,\n                totalSpent: data.userProfile.totalSpent ?? 0,\n              }\n              setUserProfile(updatedProfile)\n              localStorage.setItem(oldProfileKey, JSON.stringify(updatedProfile))\n              console.log('‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ë–î:', {\n                id: updatedProfile.id,\n                name: updatedProfile.name,\n                loyaltyPoints: updatedProfile.loyaltyPoints,\n                totalSpent: updatedProfile.totalSpent,\n                district: updatedProfile.district,\n              })\n            }\n            \n            // ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–∫–∞–∑—ã –∏–∑ API\n            if (data.orders && Array.isArray(data.orders)) {\n              const mappedOrders: Order[] = data.orders\n                .filter((db: any) => {\n                  const status = db.orderStatus || db.order_status || db[\"Order Status\"]\n                  return status !== 'cancelled'\n                })\n                .map((db: any) => ({\n                  id: db.id ?? db.Id,\n                  orderNumber: db.orderNumber ?? db.order_number ?? db[\"Order Number\"],\n                  startDate: toDate(db.startDate ?? db.start_date ?? db[\"Start Date\"]),\n                  deliveryTime: db.deliveryTime ?? db.delivery_time ?? db[\"Delivery Time\"] ?? \"\",\n                  paymentMethod: db.paymentMethod ?? db.payment_method ?? db[\"Payment Method\"] ?? \"cash\",\n                  paid: db.paid ?? db.Paid ?? false,\n                  paidAt: db.paidAt ?? db.paid_at ?? db[\"Paid At\"],\n                  paymentStatus: db.paymentStatus ?? db.payment_status ?? db[\"Payment Status\"] ?? \"pending\",\n                  orderStatus: db.orderStatus ?? db.order_status ?? db[\"Order Status\"] ?? \"pending\",\n                  total: db.total ?? db.Total ?? 0,\n                  subtotal: db.subtotal ?? db.Subtotal ?? 0,\n                  deliveryFee: db.deliveryFee ?? db.delivery_fee ?? db[\"Delivery Fee\"] ?? 0,\n                  deliveryDistrict: db.deliveryDistrict ?? db.delivery_district ?? db[\"Delivery District\"],\n                  deliveryAddress: db.deliveryAddress ?? db.delivery_address ?? db[\"Delivery Address\"],\n                  loyaltyPointsUsed: db.loyaltyPointsUsed ?? db.loyalty_points_used ?? db[\"Loyalty Points Used\"] ?? 0,\n                  loyaltyPointsEarned: db.loyaltyPointsEarned ?? db.loyalty_points_earned ?? db[\"Loyalty Points Earned\"] ?? 0,\n                  persons: db.persons ?? [],\n                  extras: db.extras ?? [],\n                }))\n              \n              console.log('‚úÖ –ó–∞–∫–∞–∑—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ state:', mappedOrders.length)\n              setOrders(mappedOrders)\n            }\n          })\n          .catch(error => {\n            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API:', error)\n            // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ\n            setUserProfile(tempProfile) // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –±–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å\n          })\n          .finally(() => {\n            // ‚úÖ –°–Ω–∏–º–∞–µ–º –≤—Å–µ –ª–æ–∞–¥–µ—Ä—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è\n            setIsUserLoading(false)\n            setIsOrdersLoading(false)\n            setIsPointsLoading(false)\n            console.log('‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞')\n          })\n      } else {\n        // –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è —Å id, —Å–Ω–∏–º–∞–µ–º –ª–æ–∞–¥–µ—Ä—ã\n        setIsUserLoading(false)\n        setIsOrdersLoading(false)\n        setIsPointsLoading(false)\n      }\n      \n      const savedReviews = localStorage.getItem(`reviews_${user}`)\n      if (savedReviews) {\n        setReviews(JSON.parse(savedReviews))\n      }\n    } else {\n      // ‚úÖ –î–ª—è –≥–æ—Å—Ç–µ–π: –∑–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–∫–∞–∑—ã –∏–∑ localStorage –∏ –æ—á–∏—â–∞–µ–º —Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ/—Å—Ç–∞—Ä—ã–µ\n      const guestOrders = localStorage.getItem(\"guest_orders\")\n      if (guestOrders) {\n        const deserializedOrders = deserializeOrders(guestOrders)\n        \n        const today = new Date()\n        today.setHours(0, 0, 0, 0)\n        const threeDaysAgo = new Date(today)\n        threeDaysAgo.setDate(threeDaysAgo.getDate() - 3)\n        \n        // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –£–¥–∞–ª—è–µ–º:\n        // 1. –ó–∞–∫–∞–∑—ã —Å ID (—É–∂–µ –≤ –±–∞–∑–µ, –±–æ–ª—å—à–µ –Ω–µ \"–≥–æ—Å—Ç–µ–≤—ã–µ\")\n        // 2. –ó–∞–∫–∞–∑—ã —Å—Ç–∞—Ä—à–µ 3 –¥–Ω–µ–π –≤ –ø—Ä–æ—à–ª–æ–º (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ)\n        const actualGuestOrders = deserializedOrders.filter(order => {\n          // –ï—Å–ª–∏ –µ—Å—Ç—å ID - —ç—Ç–æ –Ω–µ –≥–æ—Å—Ç–µ–≤–æ–π –∑–∞–∫–∞–∑, —É–¥–∞–ª—è–µ–º\n          if (order.id) return false\n          \n          // –ï—Å–ª–∏ –¥–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å—Ç–∞—Ä—à–µ 3 –¥–Ω–µ–π - —É–¥–∞–ª—è–µ–º\n          const orderDate = new Date(order.startDate)\n          orderDate.setHours(0, 0, 0, 0)\n          if (orderDate < threeDaysAgo) return false\n          \n          return true\n        })\n        \n        setOrders(actualGuestOrders)\n        \n        // –û–±–Ω–æ–≤–ª—è–µ–º localStorage, —É–¥–∞–ª—è—è —Å—Ç–∞—Ä—ã–µ –∏ —Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ –∑–∞–∫–∞–∑—ã\n        if (actualGuestOrders.length !== deserializedOrders.length || actualGuestOrders.length > 0) {\n          const updatedCache = serializeOrders(actualGuestOrders)\n          localStorage.setItem(\"guest_orders\", updatedCache)\n          const removed = deserializedOrders.length - actualGuestOrders.length\n          if (removed > 0) {\n            console.log(`üßπ –£–¥–∞–ª–µ–Ω–æ —Ñ–∞–Ω—Ç–æ–º–Ω—ã—Ö/—Å—Ç–∞—Ä—ã—Ö –∑–∞–∫–∞–∑–æ–≤: ${removed}`)\n          }\n          console.log(`‚úÖ –û—Å—Ç–∞–ª–æ—Å—å –≥–æ—Å—Ç–µ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤: ${actualGuestOrders.length}`)\n        }\n        \n        // –ï—Å–ª–∏ –≤—Å–µ –∑–∞–∫–∞–∑—ã –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã, –æ—á–∏—â–∞–µ–º localStorage\n        if (actualGuestOrders.length === 0) {\n          localStorage.removeItem(\"guest_orders\")\n          console.log('üßπ –û—á–∏—â–µ–Ω localStorage –æ—Ç –≥–æ—Å—Ç–µ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤')\n        }\n      }\n    }\n  }, [])\n\n  // Helper: Check if there's a delivery (order start date) on this date\n  const hasDeliveryForDate = (date: Date) => {\n    const checkDate = new Date(date)\n    checkDate.setHours(0, 0, 0, 0)\n    \n    return orders.some(order => {\n      const deliveryDate = new Date(order.startDate)\n      deliveryDate.setHours(0, 0, 0, 0)\n      return checkDate.getTime() === deliveryDate.getTime()\n    })\n  }\n\n  // Helper: Check if there's food (eating days: day1 and day2 after delivery)\n  const hasFoodForDate = (date: Date) => {\n    const checkDate = new Date(date)\n    checkDate.setHours(0, 0, 0, 0)\n    \n    return orders.some(order => {\n      const deliveryDate = new Date(order.startDate)\n      deliveryDate.setHours(0, 0, 0, 0)\n      \n      const day1 = new Date(deliveryDate)\n      day1.setDate(day1.getDate() + 1)\n      \n      const day2 = new Date(deliveryDate)\n      day2.setDate(day2.getDate() + 2)\n      \n      return checkDate.getTime() === day1.getTime() || checkDate.getTime() === day2.getTime()\n    })\n  }\n\n  // Helper: Check if this date is the last day of food (day2) for any order\n  const isLastDayOfAnyOrder = (date: Date) => {\n    const checkDate = new Date(date)\n    checkDate.setHours(0, 0, 0, 0)\n    \n    return orders.some(order => {\n      const deliveryDate = new Date(order.startDate)\n      deliveryDate.setHours(0, 0, 0, 0)\n      \n      // day2 is the last eating day for this order\n      const day2 = new Date(deliveryDate)\n      day2.setDate(day2.getDate() + 2)\n      day2.setHours(0, 0, 0, 0)\n      \n      return checkDate.getTime() === day2.getTime()\n    })\n  }\n\n  // Helper: Check if there's food on the next day (chain continues without gap)\n  // Plus button should show if there's NO food on next day (gap exists)\n  const hasNextOrder = (date: Date) => {\n    const checkDate = new Date(date)\n    checkDate.setHours(0, 0, 0, 0)\n    \n    // PRIORITY 1: Check if there's delivery on this day (new order continues chain)\n    if (hasDeliveryForDate(date)) {\n      return true\n    }\n    \n    // PRIORITY 2: Check if there's FOOD on the next day (no gap - chain continues)\n    // If there's food on next day, the chain continues. If no food, there's a gap and plus should show\n    const nextDay = new Date(checkDate)\n    nextDay.setDate(nextDay.getDate() + 1)\n    nextDay.setHours(0, 0, 0, 0)\n    \n    return hasFoodForDate(nextDay)\n  }\n\n  // Helper: Check if yellow plus button should be shown (last day of any order with food, no delivery, no next order)\n  const shouldShowYellowPlus = (date: Date) => {\n    const hasFood = hasFoodForDate(date)\n    const isLastDayOfOrder = isLastDayOfAnyOrder(date)\n    const hasDelivery = hasDeliveryForDate(date)\n    const hasNextOrderForLastDay = hasNextOrder(date)\n    \n    return hasFood && isLastDayOfOrder && !hasDelivery && !hasNextOrderForLastDay\n  }\n\n  const handleDateClick = (date: Date) => {\n    const isSaturday = getDay(date) === 6\n    \n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∑–∞–∫–∞–∑ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É\n    const order = orders.find((order) => {\n      const orderDate = new Date(order.startDate)\n      return (\n        orderDate.getDate() === date.getDate() &&\n        orderDate.getMonth() === date.getMonth() &&\n        orderDate.getFullYear() === date.getFullYear()\n      )\n    })\n    \n    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—É–±–±–æ—Ç—ã\n    if (isSaturday) {\n      const hasYellowPlus = shouldShowYellowPlus(date)\n      \n      if (hasYellowPlus) {\n        // –°—É–±–±–æ—Ç–∞ + –µ—Å—Ç—å –∂–µ–ª—Ç—ã–π –ø–ª—é—Å ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ\n        const sunday = addDays(date, 1)\n        showWarning(\n          \"–î–æ—Å—Ç–∞–≤–∫–∞ –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ\",\n          \"–î–æ—Å—Ç–∞–≤–∫–∞ –±–ª–∏–∂–∞–π—à–∞—è –≤–æ–∑–º–æ–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫—É—Ö–Ω—è –æ—Ç–¥—ã—Ö–∞–µ—Ç –ø–æ —Å—É–±–±–æ—Ç–∞–º. –ó–∞–∫–∞–∑ –±—É–¥–µ—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω –Ω–∞ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ.\",\n          \"warning\",\n          () => {\n            setSelectedDate(sunday)\n          }\n        )\n        return\n      } else {\n        // –°—É–±–±–æ—Ç–∞ + –Ω–µ—Ç –∂–µ–ª—Ç–æ–≥–æ –ø–ª—é—Å–∞ ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –ø—Ä–æ –∫—É—Ö–Ω—é\n        showWarning(\n          \"–ö—É—Ö–Ω—è –æ—Ç–¥—ã—Ö–∞–µ—Ç\",\n          \"–ù–∞ —Å—É–±–±–æ—Ç—É –∑–∞–∫–∞–∑ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫—É—Ö–Ω—è –æ—Ç–¥—ã—Ö–∞–µ—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –¥–∞—Ç—É.\",\n          \"error\"\n        )\n        return\n      }\n    }\n    \n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –µ–¥–∞ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É (–æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞)\n    const hasFood = hasFoodForDate(date)\n    \n    // –ï—Å–ª–∏ –µ—Å—Ç—å –µ–¥–∞ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞, –Ω–æ –Ω–µ—Ç –∑–∞–∫–∞–∑–∞ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É\n    // –ò –¥–∞—Ç–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞ (–ø—Ä–æ—à–ª–∞ –∏–ª–∏ –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞) - –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ\n    if (hasFood && !order && !canOrderForDate(date)) {\n      showWarning(\n        \"–ú–µ–Ω—é –µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ\",\n        \"–ù–∞ —ç—Ç—É –¥–∞—Ç—É –µ—Å—Ç—å –µ–¥–∞ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞, –Ω–æ –ø–æ–∫–∞ –Ω–µ–ª—å–∑—è –æ—Ñ–æ—Ä–º–∏—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–∂–¥–∏—Ç–µ—Å—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ–Ω—é.\",\n        \"info\"\n      )\n      return\n    }\n    \n    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –µ—Å–ª–∏:\n    // 1. –ï—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–∞–∑ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É (–º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å)\n    // 2. –ú–æ–∂–Ω–æ –∑–∞–∫–∞–∑–∞—Ç—å –Ω–∞ —ç—Ç—É –¥–∞—Ç—É (–¥–∞–∂–µ –µ—Å–ª–∏ –µ—Å—Ç—å –µ–¥–∞ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞ - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–∫–∞–∑–∞—Ç—å)\n    if (order || canOrderForDate(date)) {\n      setSelectedDate(date)\n    } else {\n      showWarning(\n        \"–î–∞—Ç–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞\",\n        \"–ù–∞ —ç—Ç—É –¥–∞—Ç—É –Ω–µ–ª—å–∑—è –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –¥–∞—Ç—É.\",\n        \"error\"\n      )\n    }\n  }\n\n  const handleCloseModal = () => {\n    setSelectedDate(null)\n  }\n\n  const handleSaveOrder = async (order: Order) => {\n    // ‚úÖ –ù–û–í–û–ï: –ó–∞–∫—Ä—ã–≤–∞–µ–º OrderModal —Å—Ä–∞–∑—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ \"–ó–∞–∫–∞–∑–∞—Ç—å\"\n    // –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç UX - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ\n    setSelectedDate(null)\n    \n    const user = localStorage.getItem(\"currentUser\")\n    const orderTimestamp = getDateTimestamp(order.startDate)\n    const existingOrder = orders.find((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n    \n    console.log(\"üîµ handleSaveOrder –≤—ã–∑–≤–∞–Ω:\", {\n      isAuthenticated,\n      hasUserProfile: !!userProfile,\n      userId: userProfile?.id,\n      hasExistingOrder: !!existingOrder?.id,\n    })\n    \n    // –ï—Å–ª–∏ –∑–∞–∫–∞–∑ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç id, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –æ–±–Ω–æ–≤–ª—è–µ–º —á–µ—Ä–µ–∑ API\n    if (existingOrder?.id && isAuthenticated && userProfile?.id) {\n      try {\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞ –ù–ï –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º total –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ!\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ç.–∫. —Ü–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ Order_Meals\n        const updatedOrder: Order = {\n          ...order,\n          id: existingOrder.id,\n          orderNumber: existingOrder.orderNumber,\n          subtotal: existingOrder.subtotal,\n          total: existingOrder.total,\n        }\n        \n        const response = await fetch(`/api/orders/${existingOrder.id}`, {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ order: updatedOrder }),\n        })\n        \n        if (!response.ok) {\n          throw new Error(\"Failed to update order\")\n        }\n        \n        const result = await response.json()\n        console.log('üì¶ [handleSaveOrder] API –≤–µ—Ä–Ω—É–ª result:', result)\n        console.log('üì¶ [handleSaveOrder] result.order:', result.order)\n        console.log('üì¶ [handleSaveOrder] result.loyaltyPointsEarned:', result.loyaltyPointsEarned)\n        \n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–∫–∞–∑ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ API\n        if (result.order) {\n          const updatedOrderFromAPI = result.order\n          console.log('üì¶ [handleSaveOrder] updatedOrderFromAPI fields:', {\n            Id: updatedOrderFromAPI.Id,\n            id: updatedOrderFromAPI.id,\n            total: updatedOrderFromAPI.total,\n            Total: updatedOrderFromAPI.Total,\n            loyalty_points_earned: updatedOrderFromAPI.loyalty_points_earned,\n            'Loyalty Points Earned': updatedOrderFromAPI[\"Loyalty Points Earned\"],\n          })\n          \n          setOrders((prev) => {\n            const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n            const newOrders = [\n              ...filtered,\n              {\n                ...updatedOrder,\n                id: updatedOrderFromAPI.Id || updatedOrderFromAPI.id || existingOrder.id,\n                orderNumber: updatedOrderFromAPI.order_number || result.orderNumber || existingOrder.orderNumber,\n                startDate: toDate(updatedOrder.startDate),\n                paid: updatedOrderFromAPI.paid ?? updatedOrder.paid ?? false,\n                paidAt: updatedOrderFromAPI.paid_at || updatedOrderFromAPI[\"Paid At\"] || updatedOrder.paidAt,\n                paymentStatus: updatedOrderFromAPI.payment_status || updatedOrder.paymentStatus,\n                total: updatedOrderFromAPI.total || updatedOrderFromAPI.Total || updatedOrder.total,\n                subtotal: updatedOrderFromAPI.subtotal || updatedOrderFromAPI.Subtotal || updatedOrder.subtotal,\n                loyaltyPointsEarned: updatedOrderFromAPI.loyalty_points_earned || \n                                     updatedOrderFromAPI[\"Loyalty Points Earned\"] || \n                                     result.loyaltyPointsEarned || 0,\n                loyaltyPointsUsed: updatedOrderFromAPI.loyalty_points_used || \n                                   updatedOrderFromAPI[\"Loyalty Points Used\"] || \n                                   updatedOrder.loyaltyPointsUsed || 0,\n              },\n            ]\n            // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑—ã –≤ localStorage –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö\n            // –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç –∑–∞–∫–∞–∑—ã –∏–∑ API\n            // if (user) {\n            //   localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n            // }\n            \n            // –õ–æ–≥–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏\n            const finalOrder = newOrders.find(o => o.id === existingOrder.id)\n            console.log('‚úÖ [handleSaveOrder] –ó–∞–∫–∞–∑ –æ–±–Ω–æ–≤–ª–µ–Ω –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏:', {\n              id: finalOrder?.id,\n              total: finalOrder?.total,\n              loyaltyPointsEarned: finalOrder?.loyaltyPointsEarned,\n              paid: finalOrder?.paid,\n            })\n            \n            return newOrders\n          })\n        } else {\n          // Fallback: –µ—Å–ª–∏ API –Ω–µ –≤–µ—Ä–Ω—É–ª order, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É\n          setOrders((prev) => {\n            const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n            const newOrders = [\n              ...filtered,\n              {\n                ...updatedOrder,\n                orderNumber: result.orderNumber || existingOrder.orderNumber || updatedOrder.orderNumber,\n                startDate: toDate(updatedOrder.startDate),\n                paid: updatedOrder.paid ?? false,\n              },\n            ]\n            // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑—ã –≤ localStorage –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö\n            // if (user) {\n            //   localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n            // }\n            return newOrders\n          })\n        }\n        \n        // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ API\n        if (result.loyaltyPointsEarned && result.loyaltyPointsEarned > 0 && userProfile) {\n          try {\n            console.log('üí∞ –û–±–Ω–æ–≤–ª—è—é –±–∞–ª–ª—ã –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞...')\n            const profileResponse = await fetch(`/api/orders?userId=${userProfile.id}`)\n            const profileData = await profileResponse.json()\n            \n            if (profileData.userProfile) {\n              console.log('üí∞ –û–±–Ω–æ–≤–ª–µ–Ω—ã –±–∞–ª–ª—ã –∏–∑ API:', {\n                —Å—Ç–∞—Ä—ã–µ: userProfile.loyaltyPoints,\n                –Ω–æ–≤—ã–µ: profileData.userProfile.loyaltyPoints\n              })\n              \n              const updatedProfile = {\n                ...userProfile,\n                loyaltyPoints: profileData.userProfile.loyaltyPoints,\n                totalSpent: profileData.userProfile.totalSpent,\n              }\n              setUserProfile(updatedProfile)\n              \n              if (user) {\n                localStorage.setItem(`profile_${user}`, JSON.stringify(updatedProfile))\n              }\n            }\n          } catch (error) {\n            console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:', error)\n          }\n        }\n        \n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –£–±—Ä–∞–ª–∏ toast \"–ó–∞–∫–∞–∑ –æ–±–Ω–æ–≤–ª–µ–Ω\" (–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ)\n      } catch (error) {\n        console.error(\"Failed to update order:\", error)\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ó–∞–º–µ–Ω–∏–ª–∏ toast –Ω–∞ WarningDialog\n        setWarningDialog({\n          open: true,\n          title: \"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è\",\n          description: \"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.\",\n          variant: \"error\",\n        })\n        return\n      }\n    } else if (isAuthenticated && userProfile?.id) {\n      // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ API\n      console.log(\"‚úÖ –£—Å–ª–æ–≤–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:\", {\n        isAuthenticated,\n        hasUserProfile: !!userProfile,\n        userId: userProfile?.id,\n        sendingToServer: true,\n      })\n      \n      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞\n      setShowOrderLoading(true)\n      \n      try {\n        const total = calculateOrderTotal(order)\n        const newOrder: Order = {\n          ...order,\n          subtotal: total,\n          total: total,\n        }\n        \n        console.log(\"üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:\", {\n          personsCount: newOrder.persons?.length,\n          extrasCount: newOrder.extras?.length,\n          userId: userProfile.id,\n        })\n        \n        const response = await fetch(\"/api/orders\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ order: newOrder, userId: userProfile.id }),\n        })\n        \n        console.log(\"üì• –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:\", response.status, response.statusText)\n        \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({ error: \"Unknown error\" }))\n          console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\", errorData)\n          throw new Error(errorData.error || \"Failed to create order\")\n        }\n        \n        const result = await response.json()\n        console.log(\"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞:\", result)\n        \n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –ø–æ–ª—É—á–µ–Ω\n        console.log(\"Order creation result:\", result)\n        if (!result.orderNumber) {\n          console.warn(\"‚ö†Ô∏è Order number not received from API:\", result)\n          // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö\n          if (result.orderId) {\n            try {\n              const fetchResponse = await fetch(`/api/orders?userId=${userProfile.id}`)\n              const fetchData = await fetchResponse.json()\n              const dbOrder = fetchData.orders?.find((o: any) => o.Id === result.orderId)\n              if (dbOrder?.order_number) {\n                result.orderNumber = dbOrder.order_number\n                console.log(\"‚úÖ Retrieved order number from DB:\", result.orderNumber)\n              }\n            } catch (error) {\n              console.error(\"Failed to fetch order number:\", error)\n            }\n          }\n        }\n        \n        // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞\n        if (!result.orderNumber) {\n          console.error(\"‚ùå CRITICAL: Order number is missing from API response!\", result)\n          // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∫–∞–∫ fallback\n          const fallbackOrderNumber = `ORD-${new Date().toISOString().slice(0, 10).replace(/-/g, \"\")}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`\n          result.orderNumber = fallbackOrderNumber\n          console.warn(\"‚ö†Ô∏è Using fallback order number:\", fallbackOrderNumber)\n        }\n        \n        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–∫–∞–∑ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å id –∏–∑ API\n        const savedOrder: Order = {\n          ...newOrder,\n          id: result.orderId,\n          orderNumber: result.orderNumber, // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –µ—Å—Ç—å\n          startDate: toDate(newOrder.startDate),\n          paid: newOrder.paid ?? false,\n          // ‚úÖ –ù–û–í–û–ï: –ö–æ–ø–∏—Ä—É–µ–º –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è –∏–∑ API –æ—Ç–≤–µ—Ç–∞\n          total: result.order?.total || newOrder.total,\n          subtotal: result.order?.subtotal || newOrder.subtotal,\n          deliveryFee: result.order?.deliveryFee ?? newOrder.deliveryFee ?? 0, // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û\n          loyaltyPointsEarned: result.loyaltyPointsEarned || 0,\n          loyaltyPointsUsed: newOrder.loyaltyPointsUsed || 0,\n        }\n        \n        console.log(\"üíæ Saving order to state:\", { \n          id: savedOrder.id, \n          orderNumber: savedOrder.orderNumber, \n          startDate: savedOrder.startDate,\n          hasOrderNumber: !!savedOrder.orderNumber,\n          orderNumberType: typeof savedOrder.orderNumber\n        })\n        \n        if (!savedOrder.orderNumber) {\n          console.error(\"‚ùå FATAL: Order number is still missing after all checks!\", savedOrder)\n        }\n        \n        setOrders((prev) => {\n          const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n          const newOrders = [...filtered, savedOrder]\n          \n          // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º\n          const orderToSave = newOrders.find(o => o.id === savedOrder.id)\n          if (orderToSave && !orderToSave.orderNumber) {\n            console.error(\"‚ùå Order number lost during state update!\", orderToSave)\n            orderToSave.orderNumber = result.orderNumber\n          }\n          \n          // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¢–û–õ–¨–ö–û –¥–ª—è –≥–æ—Å—Ç–µ–π\n          if (!user) {\n            const serialized = serializeOrders(newOrders)\n            localStorage.setItem(\"guest_orders\", serialized)\n            \n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å–ª–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏\n            const deserialized = deserializeOrders(serialized)\n            const checkOrder = deserialized.find(o => o.id === savedOrder.id)\n            console.log(\"‚úÖ Saved to localStorage, orders count:\", newOrders.length)\n            console.log(\"üîç Verification - saved order after serialize/deserialize:\", { \n              id: checkOrder?.id, \n              orderNumber: checkOrder?.orderNumber,\n              hasOrderNumber: !!checkOrder?.orderNumber,\n              allFields: Object.keys(checkOrder || {})\n            })\n            \n            if (checkOrder && !checkOrder.orderNumber) {\n              console.error(\"‚ùå Order number lost during serialization!\", checkOrder)\n              // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞\n              checkOrder.orderNumber = result.orderNumber\n              // –û–±–Ω–æ–≤–ª—è–µ–º localStorage —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –∑–∞–∫–∞–∑–æ–º\n              const fixedOrders = newOrders.map(o => \n                o.id === checkOrder.id ? { ...o, orderNumber: result.orderNumber } : o\n              )\n              localStorage.setItem(\"guest_orders\", serializeOrders(fixedOrders))\n              // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n              setTimeout(() => {\n                setOrders(fixedOrders)\n              }, 100)\n            }\n          } else {\n            // –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º\n            console.log(\"‚úÖ Saved to localStorage, orders count:\", newOrders.length)\n            console.log(\"üîç Verification - saved order after serialize/deserialize:\", { \n              id: savedOrder.id, \n              orderNumber: savedOrder.orderNumber,\n              hasOrderNumber: !!savedOrder.orderNumber,\n            })\n          }\n          \n          // –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –µ—Å—Ç—å\n          const finalCheck = newOrders.find(o => o.id === savedOrder.id)\n          if (finalCheck && !finalCheck.orderNumber && result.orderNumber) {\n            console.warn(\"‚ö†Ô∏è Fixing missing order number in state...\")\n            finalCheck.orderNumber = result.orderNumber\n            // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö\n            // if (user) {\n            //   localStorage.setItem(`orders_${user}`, serializeOrders(newOrders.map(o => \n            //     o.id === finalCheck.id ? finalCheck : o\n            //   )))\n            // }\n          }\n          \n          return newOrders\n        })\n        \n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –ò—Å–ø–æ–ª—å–∑—É–µ–º userProfile –∏–∑ –æ—Ç–≤–µ—Ç–∞ POST –≤–º–µ—Å—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞\n        // –≠—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç race conditions\n        if (userProfile?.id && result.userProfile) {\n          const newLoyaltyPoints = typeof result.userProfile.loyaltyPoints === 'number' \n            ? result.userProfile.loyaltyPoints \n            : parseInt(String(result.userProfile.loyaltyPoints)) || 0\n          \n          const newTotalSpent = typeof result.userProfile.totalSpent === 'number'\n            ? result.userProfile.totalSpent\n            : parseFloat(String(result.userProfile.totalSpent)) || 0\n          \n          console.log('üí∞ –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞ POST:', {\n            —Å—Ç–∞—Ä—ã–µ_–±–∞–ª–ª—ã: userProfile.loyaltyPoints,\n            –Ω–æ–≤—ã–µ_–±–∞–ª–ª—ã: newLoyaltyPoints,\n            —Å—Ç–∞—Ä—ã–π_totalSpent: userProfile.totalSpent,\n            –Ω–æ–≤—ã–π_totalSpent: newTotalSpent,\n          })\n          \n          const updatedProfile = {\n            ...userProfile,\n            loyaltyPoints: newLoyaltyPoints,\n            totalSpent: newTotalSpent,\n          }\n          console.log('üíæ –í—ã–∑—ã–≤–∞–µ–º setUserProfile —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:', {\n            loyaltyPoints: updatedProfile.loyaltyPoints,\n            totalSpent: updatedProfile.totalSpent,\n          })\n          setUserProfile(updatedProfile)\n          \n          if (user) {\n            localStorage.setItem(`profile_${user}`, JSON.stringify(updatedProfile))\n            console.log('üíæ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ localStorage')\n          }\n        }\n        \n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –û—Ç–∫—Ä—ã–≤–∞–µ–º PaymentModal –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞\n        setShowOrderLoading(false)\n        \n        console.log(\"üéØ –û—Ç–∫—Ä—ã–≤–∞–µ–º PaymentModal –¥–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞: orderId =\", savedOrder.id, \"total =\", savedOrder.total)\n        setPaymentOrder({ \n          order: savedOrder, \n          total: savedOrder.total \n        })\n      } catch (error) {\n        console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\", error)\n        setShowOrderLoading(false) // –°–∫—Ä—ã–≤–∞–µ–º loading –ø—Ä–∏ –æ—à–∏–±–∫–µ\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ó–∞–º–µ–Ω–∏–ª–∏ toast –Ω–∞ WarningDialog\n        setWarningDialog({\n          open: true,\n          title: \"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞\",\n          description: error instanceof Error ? error.message : \"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.\",\n          variant: \"error\",\n        })\n      }\n    } else {\n      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ—Ç userProfile.id\n      const reason = !isAuthenticated \n        ? \"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω\" \n        : !userProfile \n          ? \"userProfile –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç\"\n          : !userProfile.id \n            ? \"userProfile.id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç\" \n            : \"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞\"\n      \n      console.warn(\"‚ö†Ô∏è –ó–∞–∫–∞–∑ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ API, –ø—Ä–∏—á–∏–Ω–∞:\", {\n        isAuthenticated,\n        hasUserProfile: !!userProfile,\n        userId: userProfile?.id,\n        reason,\n        userProfileKeys: userProfile ? Object.keys(userProfile) : [],\n      })\n      \n      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –≤ localStorage (–¥–ª—è –≥–æ—Å—Ç–µ–π –∏–ª–∏ –µ—Å–ª–∏ –Ω–µ—Ç userId)\n      setOrders((prev) => {\n        const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n        const newOrders = [...filtered, { ...order, startDate: toDate(order.startDate), paid: order.paid ?? false }]\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¢–û–õ–¨–ö–û –¥–ª—è –≥–æ—Å—Ç–µ–π\n        if (!user) {\n          localStorage.setItem(\"guest_orders\", serializeOrders(newOrders))\n        }\n        // –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å API\n        return newOrders\n      })\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –£–±—Ä–∞–ª–∏ toast \"–ó–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ\" (–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ)\n    }\n    \n    // ‚úÖ –£–î–ê–õ–ï–ù–û: setSelectedDate(null) - —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏\n  }\n  \n  // –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥ - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω\n  /*\n  const handleSaveOrderOld = async (order: Order) => {\n    const user = localStorage.getItem(\"currentUser\")\n    const orderTimestamp = getDateTimestamp(order.startDate)\n    const existingOrder = orders.find((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n    \n    if (existingOrder?.id && isAuthenticated && userProfile?.id) {\n      // ... existing code ...\n    } else if (isAuthenticated && userProfile?.id) {\n      // ... existing code ...\n    } else {\n      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n      const updatedOrders = [...orders]\n      const index = updatedOrders.findIndex((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n      \n      if (index >= 0) {\n        updatedOrders[index] = { ...order, startDate: toDate(order.startDate) }\n      } else {\n        updatedOrders.push({ ...order, startDate: toDate(order.startDate) })\n      }\n      \n      setOrders(updatedOrders)\n      \n      const guestOrders = localStorage.getItem(\"guest_orders\")\n      if (guestOrders) {\n        const parsed = deserializeOrders(guestOrders)\n        const filtered = parsed.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n        localStorage.setItem(\"guest_orders\", serializeOrders([...filtered, { ...order, startDate: toDate(order.startDate) }]))\n      } else {\n        localStorage.setItem(\"guest_orders\", serializeOrders([{ ...order, startDate: toDate(order.startDate) }]))\n      }\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –£–±—Ä–∞–ª–∏ toast \"–ó–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω\" (–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ)\n    }\n  }\n  \n  // –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞ - —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏\n  const handleSaveOrderBackup = async (order: Order) => {\n    console.log(\"üîµ handleSaveOrder –≤—ã–∑–≤–∞–Ω:\", {\n      isAuthenticated,\n      hasUserProfile: !!userProfile,\n      userId: userProfile?.id,\n    })\n    \n    const user = localStorage.getItem(\"currentUser\")\n    const orderTimestamp = getDateTimestamp(order.startDate)\n    const existingOrder = orders.find((o) => getDateTimestamp(o.startDate) === orderTimestamp)\n    \n    if (existingOrder?.id && isAuthenticated && userProfile?.id) {\n      try {\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞ –ù–ï –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º total –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ!\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ç.–∫. —Ü–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ Order_Meals\n        const updatedOrder: Order = {\n          ...order,\n          id: existingOrder.id,\n          orderNumber: existingOrder.orderNumber,\n          subtotal: existingOrder.subtotal,\n          total: existingOrder.total,\n        }\n        \n        const response = await fetch(`/api/orders/${existingOrder.id}`, {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ order: updatedOrder }),\n        })\n        \n        if (!response.ok) {\n          throw new Error(\"Failed to update order\")\n        }\n        \n        const result = await response.json()\n        \n        setOrders((prev) => {\n          const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n          const newOrders = [\n            ...filtered,\n            {\n              ...updatedOrder,\n              orderNumber: result.orderNumber || existingOrder.orderNumber || updatedOrder.orderNumber,\n              startDate: toDate(updatedOrder.startDate),\n              paid: updatedOrder.paid ?? false,\n            },\n          ]\n          // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö\n          // if (user) {\n          //   localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n          // }\n          return newOrders\n        })\n        \n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –£–±—Ä–∞–ª–∏ toast \"–ó–∞–∫–∞–∑ –æ–±–Ω–æ–≤–ª–µ–Ω\" (–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ)\n      } catch (error) {\n        console.error(\"Failed to update order:\", error)\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ó–∞–º–µ–Ω–∏–ª–∏ toast –Ω–∞ WarningDialog\n        setWarningDialog({\n          open: true,\n          title: \"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è\",\n          description: \"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.\",\n          variant: \"error\",\n        })\n        return\n      }\n    } else if (isAuthenticated && userProfile?.id) {\n      try {\n        const total = calculateOrderTotal(order)\n        const newOrder: Order = {\n          ...order,\n          subtotal: total,\n          total: total,\n        }\n        \n        console.log(\"üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:\", {\n          personsCount: newOrder.persons?.length,\n          extrasCount: newOrder.extras?.length,\n          userId: userProfile.id,\n        })\n        \n        const response = await fetch(\"/api/orders\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ order: newOrder, userId: userProfile.id }),\n        })\n        \n        console.log(\"üì• –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:\", response.status, response.statusText)\n        \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({ error: \"Unknown error\" }))\n          console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\", errorData)\n          throw new Error(errorData.error || \"Failed to create order\")\n        }\n        \n        const result = await response.json()\n        console.log(\"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞:\", result)\n        \n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –ø–æ–ª—É—á–µ–Ω\n        console.log(\"Order creation result:\", result)\n        if (!result.orderNumber) {\n          console.warn(\"‚ö†Ô∏è Order number not received from API:\", result)\n          // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö\n          if (result.orderId) {\n            try {\n              const fetchResponse = await fetch(`/api/orders?userId=${userProfile.id}`)\n              const fetchData = await fetchResponse.json()\n              const dbOrder = fetchData.orders?.find((o: any) => o.Id === result.orderId)\n              if (dbOrder?.order_number) {\n                result.orderNumber = dbOrder.order_number\n                console.log(\"‚úÖ Retrieved order number from DB:\", result.orderNumber)\n              }\n            } catch (error) {\n              console.error(\"Failed to fetch order number:\", error)\n            }\n          }\n        }\n        \n        // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞\n        if (!result.orderNumber) {\n          console.error(\"‚ùå CRITICAL: Order number is missing from API response!\", result)\n          // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∫–∞–∫ fallback\n          const fallbackOrderNumber = `ORD-${new Date().toISOString().slice(0, 10).replace(/-/g, \"\")}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`\n          result.orderNumber = fallbackOrderNumber\n          console.warn(\"‚ö†Ô∏è Using fallback order number:\", fallbackOrderNumber)\n        }\n        \n        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–∫–∞–∑ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å id –∏–∑ API\n        const savedOrder: Order = {\n          ...newOrder,\n          id: result.orderId,\n          orderNumber: result.orderNumber, // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –µ—Å—Ç—å\n          startDate: toDate(newOrder.startDate),\n          paid: newOrder.paid ?? false,\n        }\n        \n  */\n\n  const handleCancelOrder = async (order: Order) => {\n    console.log('üóëÔ∏è handleCancelOrder –≤—ã–∑–≤–∞–Ω –¥–ª—è –∑–∞–∫–∞–∑–∞:', order)\n    \n    if (!order) {\n      console.error('‚ùå –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç–æ–π –∑–∞–∫–∞–∑!')\n      showWarning(\"–û—à–∏–±–∫–∞\", \"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑: –∑–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω\", \"error\")\n      return\n    }\n\n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –ï—Å–ª–∏ –∑–∞–∫–∞–∑ –ë–ï–ó ID - —ç—Ç–æ –Ω–æ–≤—ã–π –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑\n    // –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ–º –µ–≥–æ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ state\n    if (!order.id) {\n      console.log('üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ state')\n      const orderTimestamp = getDateTimestamp(order.startDate)\n      setOrders((prev) => {\n        const filtered = prev.filter((o) => getDateTimestamp(o.startDate) !== orderTimestamp)\n        console.log(`‚úÖ –£–¥–∞–ª–µ–Ω–æ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ state: –±—ã–ª–æ ${prev.length}, —Å—Ç–∞–ª–æ ${filtered.length}`)\n        return filtered\n      })\n      setSelectedDate(null)\n      showWarning(\"–ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω\", \"–ù–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω\", \"success\")\n      return\n    }\n\n    const wasPaid = order.paid && order.paymentMethod !== \"cash\"\n\n    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞\n    setShowCancelLoading(true)\n\n    // 1. –û–ü–¢–ò–ú–ò–°–¢–ò–ß–ù–û–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI (—Å—Ä–∞–∑—É —É–¥–∞–ª—è–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞)\n    console.log('‚ö° –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ —É–¥–∞–ª—è—é –∑–∞–∫–∞–∑ ID=' + order.id + ' –∏–∑ UI...')\n    const previousOrders = [...orders]\n    setOrders((prev) => {\n      const filtered = prev.filter((o) => o.id !== order.id)\n      console.log(`‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ —É–¥–∞–ª–µ–Ω–æ: –±—ã–ª–æ ${prev.length}, —Å—Ç–∞–ª–æ ${filtered.length}`)\n      return filtered\n    })\n    setSelectedDate(null)\n\n    // 2. –í—ã–∑–æ–≤ API –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤ –ë–î\n    try {\n      console.log(`üì° –û—Ç–ø—Ä–∞–≤–ª—è—é DELETE /api/orders/${order.id}`)\n      const res = await fetch(`/api/orders/${order.id}`, {\n        method: 'DELETE',\n      })\n      \n      console.log(`üì• –û—Ç–≤–µ—Ç DELETE API: ${res.status}`)\n      \n      if (!res.ok) {\n        throw new Error(`–û—à–∏–±–∫–∞ API: ${res.status}`)\n      }\n\n      const result = await res.json()\n\n      // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–ª—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –æ—Ç–≤–µ—Ç–∞ API\n      if (result.updatedLoyaltyPoints !== undefined && userProfile && isAuthenticated) {\n        console.log('üí∞ –û–±–Ω–æ–≤–ª–µ–Ω—ã –±–∞–ª–ª—ã –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞:', {\n          —Å—Ç–∞—Ä—ã–µ: userProfile.loyaltyPoints,\n          –Ω–æ–≤—ã–µ: result.updatedLoyaltyPoints\n        })\n        const updatedProfile = {\n          ...userProfile,\n          loyaltyPoints: result.updatedLoyaltyPoints,\n        }\n        setUserProfile(updatedProfile)\n        if (currentUser) {\n          localStorage.setItem(`profile_${currentUser}`, JSON.stringify(updatedProfile))\n        }\n      }\n\n      // 3. –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î\n      if (isAuthenticated && userProfile?.id) {\n        console.log('üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é –∑–∞–∫–∞–∑—ã –∏–∑ –ë–î –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏...')\n        const ordersRes = await fetch(`/api/orders?userId=${userProfile.id}`)\n        if (ordersRes.ok) {\n          const data = await ordersRes.json()\n          console.log(`üì¶ –ü–æ–ª—É—á–µ–Ω–æ ${data.orders?.length || 0} –∑–∞–∫–∞–∑–æ–≤ –∏–∑ –ë–î –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è`)\n          \n          if (data.orders && Array.isArray(data.orders)) {\n            const dbOrders: Order[] = data.orders\n              .filter((db: any) => {\n                const status = db.orderStatus || db.order_status || db[\"Order Status\"]\n                return status !== 'cancelled'\n              })\n              .map((db: any) => ({\n                id: db.id ?? db.Id,\n                orderNumber: db.orderNumber ?? db.order_number ?? db[\"Order Number\"],\n                startDate: toDate(db.startDate ?? db.start_date ?? db[\"Start Date\"]),\n                deliveryTime: db.deliveryTime ?? db.delivery_time ?? db[\"Delivery Time\"] ?? \"\",\n                paymentMethod: db.paymentMethod ?? db.payment_method ?? db[\"Payment Method\"] ?? \"cash\",\n                paid: db.paid ?? db.Paid ?? false,\n                paidAt: db.paidAt ?? db.paid_at ?? db[\"Paid At\"],\n                paymentStatus: db.paymentStatus ?? db.payment_status ?? db[\"Payment Status\"] ?? \"pending\",\n                orderStatus: db.orderStatus ?? db.order_status ?? db[\"Order Status\"] ?? \"pending\",\n                total: db.total ?? db.Total ?? 0,\n                subtotal: db.subtotal ?? db.Subtotal ?? 0,\n                loyaltyPointsUsed: db.loyaltyPointsUsed ?? db.loyalty_points_used ?? db[\"Loyalty Points Used\"] ?? 0,\n                loyaltyPointsEarned: db.loyaltyPointsEarned ?? db.loyalty_points_earned ?? db[\"Loyalty Points Earned\"] ?? 0,\n                persons: db.persons ?? [],\n                extras: db.extras ?? [],\n              }))\n            \n            console.log(`‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${dbOrders.length} –∑–∞–∫–∞–∑–æ–≤ –∏–∑ –ë–î`)\n            setOrders(dbOrders)\n          }\n        }\n        \n        // ‚ùå –£–î–ê–õ–ï–ù–û: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Ñ–∏–ª—è (–±–∞–ª–ª—ã —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤—ã—à–µ)\n        // const profileRes = await fetch(`/api/users/${userProfile.id}`)\n        // if (profileRes.ok) {\n        //   const profileData = await profileRes.json()\n        //   setUserProfile(profileData)\n        //   localStorage.setItem(`profile_${currentUser}`, JSON.stringify(profileData))\n        // }\n      } else {\n        // –î–ª—è –≥–æ—Å—Ç–µ–π - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage\n        const user = localStorage.getItem(\"currentUser\")\n        if (!user) {\n          setOrders((prev) => {\n            localStorage.setItem(\"guest_orders\", serializeOrders(prev))\n            return prev\n          })\n        }\n      }\n\n      // –ò–º–∏—Ç–∏—Ä—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏\n      await new Promise(resolve => setTimeout(resolve, 800))\n      \n      // –°–∫—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é - –∑–∞–∫–∞–∑ —É–∂–µ —É–¥–∞–ª–µ–Ω –∏–∑ UI\n      setShowCancelLoading(false)\n      \n      // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–∏—Ö–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤\n      if (wasPaid) {\n        showWarning(\n          \"–ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω\",\n          \"–î–µ–Ω—å–≥–∏ –≤–µ—Ä–Ω—É—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ 3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π.\",\n          \"info\"\n        )\n      }\n    } catch (error) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:', error)\n      setShowCancelLoading(false) // –°–∫—Ä—ã–≤–∞–µ–º loading –ø—Ä–∏ –æ—à–∏–±–∫–µ\n      // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ\n      console.log('‚è™ –û—Ç–∫–∞—Ç—ã–≤–∞—é –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ...')\n      setOrders(previousOrders)\n      showWarning(\n        \"–û—à–∏–±–∫–∞\",\n        \"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.\",\n        \"error\"\n      )\n    }\n  }\n\n  const handleMoveOrder = (fromDate: Date, toDateValue: Date) => {\n    const user = localStorage.getItem(\"currentUser\")\n    const fromTimestamp = getDateTimestamp(fromDate)\n    const toTimestamp = getDateTimestamp(toDateValue)\n\n    setOrders((prev) => {\n      const existingOrderOnTarget = prev.find((o) => getDateTimestamp(o.startDate) === toTimestamp)\n      if (existingOrderOnTarget) {\n        alert(\"–ù–∞ —ç—Ç—É –¥–∞—Ç—É —É–∂–µ –µ—Å—Ç—å –∑–∞–∫–∞–∑. –°–Ω–∞—á–∞–ª–∞ –æ—Ç–º–µ–Ω–∏—Ç–µ –µ–≥–æ.\")\n        return prev\n      }\n\n      const newOrders = prev.map((o) => {\n        if (getDateTimestamp(o.startDate) === fromTimestamp) {\n          return { ...o, startDate: toDateValue }\n        }\n        return o\n      })\n\n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö\n      // if (user) {\n      //   localStorage.setItem(`orders_${user}`, serializeOrders(newOrders))\n      // }\n      return newOrders\n    })\n  }\n\n  /**\n   * –§—É–Ω–∫—Ü–∏—è \"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–∫–∞–∑\" - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ\n   * \n   * –ê–õ–ì–û–†–ò–¢–ú:\n   * 1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –∏–∑ API\n   * 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∑–∞–∫–∞–∑–∞\n   * 3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¢–ï–ö–£–©–ò–ï —Ü–µ–Ω—ã –∏–∑ –º–µ–Ω—é (–Ω–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ!)\n   * 4. –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ –Ω–µ—Ç –≤ –º–µ–Ω—é\n   * 5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç Toast –µ—Å–ª–∏ –±—ã–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã\n   * 6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç OrderModal —Å –∑–∞–∫–∞–∑–æ–º\n   */\n  const handleRepeatOrder = async (order: Order, targetDate: Date) => {\n    try {\n      // ‚úÖ –ü–æ–ª—É—á–∞–µ–º –Ω–µ–¥–µ–ª—é –¥–ª—è —Ü–µ–ª–µ–≤–æ–π –¥–∞—Ç—ã\n      const weekType = getWeekTypeForDate(targetDate)\n      \n      console.log('üîÑ [Repeat Order] –ù–∞—á–∞–ª–æ –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–∫–∞–∑–∞:', {\n        orderId: order.id,\n        orderNumber: order.orderNumber,\n        targetDate: targetDate.toISOString(),\n        weekType,\n      })\n\n      // ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –∏–∑ API\n      const response = await fetch(`/api/menu?week=${weekType}`)\n      if (!response.ok) {\n        throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–µ–Ω—é')\n      }\n\n      const menuData = await response.json()\n      console.log('üìã [Repeat Order] –ú–µ–Ω—é –∑–∞–≥—Ä—É–∂–µ–Ω–æ:', {\n        hasBreakfast: menuData.meals?.breakfast?.length > 0,\n        hasLunchSalad: menuData.meals?.lunch_salad?.length > 0,\n        hasExtras: menuData.extras ? Object.keys(menuData.extras).length : 0,\n      })\n\n      // ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã –∑–∞–∫–∞–∑–∞ –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º—É –º–µ–Ω—é\n      const { validateOrderItems } = await import('@/lib/cart-utils')\n      const { validatedOrder, unavailableItems, hasUnavailableItems } = validateOrderItems(\n        order,\n        menuData.meals || {},\n        menuData.extras || {}\n      )\n\n      console.log('‚úÖ [Repeat Order] –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞:', {\n        unavailableCount: unavailableItems.length,\n        unavailableItems,\n      })\n\n      // ‚ö†Ô∏è –ï—Å–ª–∏ –±—ã–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ\n      if (hasUnavailableItems) {\n        showWarning(\n          '–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã',\n          `–°–ª–µ–¥—É—é—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –±–æ–ª—å—à–µ –Ω–µ –≤ –º–µ–Ω—é –∏ –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã: ${unavailableItems.join(', ')}`,\n          'warning'\n        )\n      }\n\n      // ‚úÖ –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ —Ü–µ–Ω–∞–º–∏\n      const newOrder: Order = {\n        ...validatedOrder,\n        // –í–∞–∂–Ω–æ: –æ—á–∏—â–∞–µ–º –ø–æ–ª—è —Å—Ç–∞—Ä–æ–≥–æ –∑–∞–∫–∞–∑–∞\n        id: undefined,\n        orderNumber: undefined,\n        startDate: targetDate,\n        delivered: false,\n        paid: false,\n        paidAt: undefined,\n        paymentMethod: undefined,\n        orderStatus: 'pending',\n        // –¶–µ–Ω—ã –±—É–¥—É—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ OrderModal\n        total: undefined,\n        subtotal: undefined,\n        deliveryFee: undefined,\n        loyaltyPointsEarned: 0,\n        loyaltyPointsUsed: 0,\n      }\n\n      console.log('üöÄ [Repeat Order] –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑ –≤ state —á–µ—Ä–µ–∑ setOrders')\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ state\n      setOrders(prevOrders => {\n        const orderTimestamp = getDateTimestamp(targetDate)\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∑–∞–∫–∞–∑ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É\n        const existingIndex = prevOrders.findIndex(o => {\n          const oTimestamp = getDateTimestamp(o.startDate)\n          return oTimestamp === orderTimestamp\n        })\n        \n        if (existingIndex !== -1) {\n          // ‚úÖ –ó–∞–º–µ–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–∞–∑\n          const updated = [...prevOrders]\n          updated[existingIndex] = newOrder\n          console.log('üìù [Repeat Order] –ó–∞–º–µ–Ω–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–∞–∑ –Ω–∞ –¥–∞—Ç—É:', {\n            oldId: prevOrders[existingIndex].id,\n            timestamp: orderTimestamp\n          })\n          return updated\n        } else {\n          // ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑\n          console.log('‚ûï [Repeat Order] –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –¥–ª—è –¥–∞—Ç—ã:', orderTimestamp)\n          return [...prevOrders, newOrder]\n        }\n      })\n      \n      // ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ–º OrderModal - state —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ\n      console.log('üéØ [Repeat Order] –û—Ç–∫—Ä—ã–≤–∞–µ–º OrderModal –¥–ª—è –¥–∞—Ç—ã:', targetDate.toISOString())\n      setSelectedDate(targetDate)\n\n    } catch (error) {\n      console.error('‚ùå [Repeat Order] –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ –∑–∞–∫–∞–∑–∞:', error)\n      showWarning(\n        '–û—à–∏–±–∫–∞',\n        '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',\n        'error'\n      )\n    }\n  }\n\n  const handlePayOrder = (order: Order, total: number) => {\n    if (!isAuthenticated) {\n      setPendingCheckout({ order, total })\n      setShowAuthModal(true)\n      return\n    }\n    // –î–ª—è –∑–∞–∫–∞–∑–æ–≤ —Å –Ω–∞–ª–∏—á–Ω—ã–º–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞ –¥–ª—è —Å–º–µ–Ω—ã —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã\n    if (order.paymentMethod === \"cash\" && !order.paid) {\n      const orderDate = toDate(order.startDate)\n      setSelectedDate(orderDate)\n      return\n    }\n    // –î–ª—è –¥—Ä—É–≥–∏—Ö –∑–∞–∫–∞–∑–æ–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã\n    setPaymentOrder({ order, total })\n  }\n\n  const handleMarkCashOrderAsPaid = async (order: Order) => {\n    if (!order.id || !isAuthenticated || !userProfile?.id) {\n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ó–∞–º–µ–Ω–∏–ª–∏ toast –Ω–∞ WarningDialog\n      setWarningDialog({\n        open: true,\n        title: \"–û—à–∏–±–∫–∞\",\n        description: \"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–º–µ—Ç–∏—Ç—å –∑–∞–∫–∞–∑ –∫–∞–∫ –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π\",\n        variant: \"error\",\n      })\n      return\n    }\n\n    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –æ–ø–ª–∞—Ç—ã\n    setShowPaymentLoading(true)\n\n    try {\n      const response = await fetch(`/api/orders/${order.id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          paid: true,\n          paid_at: new Date().toISOString(),\n          status: \"paid\",\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error(\"Failed to mark order as paid\")\n      }\n\n      // ‚úÖ –ù–û–í–û–ï: –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞\n      const data = await response.json()\n      console.log('üí∞ –û—Ç–≤–µ—Ç –æ—Ç API –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:', data)\n\n      // ‚úÖ –ù–û–í–û–ï: –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑ –∏–∑ API\n      if (data.order) {\n        const updatedOrderFromAPI = data.order\n        const orderTimestamp = getDateTimestamp(order.startDate)\n        \n        setOrders((prev) => {\n          return prev.map((o) => {\n            if (getDateTimestamp(o.startDate) === orderTimestamp) {\n              // –ò—Å–ø–æ–ª—å–∑—É–µ–º –í–°–ï –ø–æ–ª—è –∏–∑ API –æ—Ç–≤–µ—Ç–∞\n              return {\n                ...o,\n                id: updatedOrderFromAPI.Id || updatedOrderFromAPI.id,\n                paid: true,\n                paidAt: updatedOrderFromAPI.paid_at || updatedOrderFromAPI[\"Paid At\"],\n                paymentStatus: updatedOrderFromAPI.payment_status || \"paid\",\n                total: updatedOrderFromAPI.total || updatedOrderFromAPI.Total || 0,\n                subtotal: updatedOrderFromAPI.subtotal || updatedOrderFromAPI.Subtotal || 0,\n                loyaltyPointsEarned: updatedOrderFromAPI.loyalty_points_earned || \n                                     updatedOrderFromAPI[\"Loyalty Points Earned\"] || \n                                     data.loyaltyPointsEarned || 0,\n                loyaltyPointsUsed: updatedOrderFromAPI.loyalty_points_used || \n                                   updatedOrderFromAPI[\"Loyalty Points Used\"] || 0,\n              }\n            }\n            return o\n          })\n        })\n        \n        console.log('‚úÖ –ó–∞–∫–∞–∑ –æ–±–Ω–æ–≤–ª–µ–Ω –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ API')\n      }\n\n      // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –Ω–∞—á–∏—Å–ª–µ–Ω—ã\n      if (data.loyaltyPointsEarned && data.loyaltyPointsEarned > 0 && userProfile) {\n        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ API –¥–ª—è —Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n        try {\n          console.log('üí∞ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é –±–∞–ª–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ API...')\n          const profileResponse = await fetch(`/api/orders?userId=${userProfile.id}`)\n          const profileData = await profileResponse.json()\n          \n          if (profileData.userProfile) {\n            console.log('üí∞ –û–±–Ω–æ–≤–ª–µ–Ω—ã –±–∞–ª–ª—ã –∏–∑ API:', {\n              —Å—Ç–∞—Ä—ã–µ: userProfile.loyaltyPoints,\n              –Ω–æ–≤—ã–µ: profileData.userProfile.loyaltyPoints\n            })\n            \n            const updatedProfile = {\n              ...userProfile,\n              loyaltyPoints: profileData.userProfile.loyaltyPoints,\n              totalSpent: profileData.userProfile.totalSpent,\n            }\n            setUserProfile(updatedProfile)\n            \n            const user = localStorage.getItem(\"currentUser\")\n            if (user) {\n              localStorage.setItem(`profile_${user}`, JSON.stringify(updatedProfile))\n            }\n          }\n        } catch (error) {\n          console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:', error)\n        }\n      }\n\n      // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –æ–ø–ª–∞—Ç—ã –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏\n      await new Promise(resolve => setTimeout(resolve, 1500))\n      \n      // –°–∫—Ä—ã–≤–∞–µ–º loading –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º success\n      setShowPaymentLoading(false)\n      setSuccessDialog({\n        open: true,\n        loyaltyPointsEarned: data.loyaltyPointsEarned || 0,\n        loyaltyPointsStatus: \"earned\",\n      })\n    } catch (error) {\n      console.error(\"Failed to mark order as paid:\", error)\n      setShowPaymentLoading(false) // –°–∫—Ä—ã–≤–∞–µ–º loading –ø—Ä–∏ –æ—à–∏–±–∫–µ\n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ó–∞–º–µ–Ω–∏–ª–∏ toast –Ω–∞ WarningDialog\n      setWarningDialog({\n        open: true,\n        title: \"–û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã\",\n        description: \"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–º–µ—Ç–∏—Ç—å –∑–∞–∫–∞–∑ –∫–∞–∫ –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.\",\n        variant: \"error\",\n      })\n    }\n  }\n\n  // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è PaymentModal\n  const handlePaymentModalClose = () => {\n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –£–¥–∞–ª—è–µ–º –∑–∞–∫–∞–∑ –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –∏–∑ –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\n    if (paymentOrder?.order?.id && paymentOrder.isNewOrder) {\n      // –î–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å —É–¥–∞–ª–µ–Ω–∏–µ–º\n      console.log(\"‚ö†Ô∏è –ó–∞–∫—Ä—ã—Ç–∏–µ PaymentModal –¥–ª—è –ù–û–í–û–ì–û –∑–∞–∫–∞–∑–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ —É–¥–∞–ª–µ–Ω–∏—è\")\n      setCancelPaymentDialog({\n        open: true,\n        orderId: paymentOrder.order.id,\n      })\n    } else {\n      // –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–∫–∞–∑–æ–≤ –∏–ª–∏ –±–µ–∑ ID - –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º\n      console.log(\"‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ PaymentModal –¥–ª—è –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –∑–∞–∫–∞–∑–∞ - –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º\")\n      setPaymentOrder(null)\n    }\n  }\n\n  // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞\n  const handleConfirmCancelPayment = async () => {\n    if (cancelPaymentDialog.orderId) {\n      console.log(\"üóëÔ∏è –û—Ç–º–µ–Ω—è–µ–º –∑–∞–∫–∞–∑ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ PaymentModal:\", cancelPaymentDialog.orderId)\n      \n      // –£–¥–∞–ª—è–µ–º –∑–∞–∫–∞–∑ –∏–∑ –ë–î\n      try {\n        const response = await fetch(`/api/orders/${cancelPaymentDialog.orderId}`, {\n          method: \"DELETE\",\n        })\n        \n        if (response.ok) {\n          // –£–¥–∞–ª—è–µ–º –∑–∞–∫–∞–∑ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è\n          setOrders((prev) => prev.filter((o) => o.id !== cancelPaymentDialog.orderId))\n          console.log(\"‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω\")\n        }\n      } catch (error) {\n        console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\", error)\n      }\n    }\n    \n    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–±–∞ –¥–∏–∞–ª–æ–≥–∞\n    setCancelPaymentDialog({ open: false, orderId: null })\n    setPaymentOrder(null)\n  }\n\n  // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –û—Ç–º–µ–Ω–∞ –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞ (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ)\n  const handleCancelPaymentDialogClose = async () => {\n    // –ï—Å–ª–∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ –æ—Ç–º–µ–Ω—ã - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º —É–¥–∞–ª–µ–Ω–∏–µ\n    if (cancelPaymentDialog.orderId) {\n      await handleConfirmCancelPayment()\n    } else {\n      setCancelPaymentDialog({ open: false, orderId: null })\n    }\n  }\n\n  const handlePaymentComplete = async (order: Order, pointsUsed: number, paymentMethod: \"card\" | \"sbp\" | \"cash\") => {\n    const user = localStorage.getItem(\"currentUser\")\n    const orderTimestamp = getDateTimestamp(order.startDate)\n\n    if (!order.id || !userProfile?.id) {\n      console.error('‚ùå –ù–µ—Ç ID –∑–∞–∫–∞–∑–∞ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –æ–ø–ª–∞—Ç—ã')\n      return\n    }\n\n    console.log(`üí≥ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–ª–∞—Ç—ã: –º–µ—Ç–æ–¥=${paymentMethod}, –±–∞–ª–ª—ã=${pointsUsed}`)\n\n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã\n    // –î–ª—è card/sbp - –∞–Ω–∏–º–∞—Ü–∏—è \"–ò–¥–µ—Ç –æ–ø–ª–∞—Ç–∞...\" —Å –∏–∫–æ–Ω–∫–æ–π –∫–∞—Ä—Ç—ã\n    // –î–ª—è cash - –∞–Ω–∏–º–∞—Ü–∏—è \"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –∑–∞–∫–∞–∑...\" —Å –∏–∫–æ–Ω–∫–æ–π –º–æ–Ω–µ—Ç\n    if (paymentMethod === 'card' || paymentMethod === 'sbp') {\n      setShowPaymentLoading(true)\n    } else if (paymentMethod === 'cash') {\n      setShowCashPaymentAnimation(true)\n    }\n\n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –î–ª—è –Ω–∞–ª–∏—á–Ω—ã—Ö –ù–ï —Å—Ç–∞–≤–∏–º paid=true!\n    // –û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞\n    const isPaid = paymentMethod === 'card' || paymentMethod === 'sbp'\n    const paymentStatus = isPaid ? 'paid' : 'pending'\n\n    try {\n      const response = await fetch(`/api/orders/${order.id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          paid: isPaid,\n          paid_at: isPaid ? new Date().toISOString() : undefined,\n          status: paymentStatus,\n          payment_method: paymentMethod,\n          loyaltyPointsUsed: pointsUsed, // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–µ—Ä–µ–¥–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –±–∞–ª–ª—ã –∏–∑ PaymentModal\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error(\"Failed to mark order as paid\")\n      }\n\n      const data = await response.json()\n      console.log('üí∞ –û—Ç–≤–µ—Ç –æ—Ç API –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:', data)\n\n      // ‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–∫–∞–∑ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ API\n      if (data.order) {\n        const updatedOrderFromAPI = data.order\n        \n        setOrders((prev) => {\n          return prev.map((o) => {\n            if (getDateTimestamp(o.startDate) === orderTimestamp) {\n              return {\n                ...o,\n                id: updatedOrderFromAPI.Id || updatedOrderFromAPI.id,\n                paid: isPaid, // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º isPaid (—Ç–æ–ª—å–∫–æ –¥–ª—è card/sbp)\n                paidAt: updatedOrderFromAPI.paid_at || updatedOrderFromAPI[\"Paid At\"],\n                paymentStatus: updatedOrderFromAPI.payment_status || paymentStatus,\n                total: updatedOrderFromAPI.total || updatedOrderFromAPI.Total || 0,\n                subtotal: updatedOrderFromAPI.subtotal || updatedOrderFromAPI.Subtotal || 0,\n                loyaltyPointsEarned: updatedOrderFromAPI.loyalty_points_earned || \n                                     updatedOrderFromAPI[\"Loyalty Points Earned\"] || \n                                     data.loyaltyPointsEarned || 0,\n                loyaltyPointsUsed: updatedOrderFromAPI.loyalty_points_used || \n                                   updatedOrderFromAPI[\"Loyalty Points Used\"] || 0,\n              }\n            }\n            return o\n          })\n        })\n      }\n\n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ API –í–°–ï–ì–î–ê –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã\n      // –ù–µ –∑–∞–≤–∏—Å–∏–º –æ—Ç loyaltyPointsEarned - –±–∞–ª–∞–Ω—Å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –∏–∑-–∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π\n      // ‚úÖ –ù–û–í–û–ï: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å userProfile –∏–∑ –æ—Ç–≤–µ—Ç–∞ PATCH\n      console.log('üîç [handlePayOrder] –û—Ç–≤–µ—Ç –æ—Ç PATCH API:', {\n        hasUserProfile: !!data.userProfile,\n        userProfile: data.userProfile,\n        fullData: data\n      })\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ä—ã–µ –±–∞–ª–ª—ã –î–û –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–Ω–∏—Ü—ã\n      const oldLoyaltyPoints = userProfile.loyaltyPoints || 0\n      \n      if (data.userProfile) {\n        console.log('üí∞ –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞ PATCH:', {\n          —Å—Ç–∞—Ä—ã–µ_–±–∞–ª–ª—ã: userProfile.loyaltyPoints,\n          –Ω–æ–≤—ã–µ_–±–∞–ª–ª—ã: data.userProfile.loyaltyPoints,\n          —Å—Ç–∞—Ä—ã–π_totalSpent: userProfile.totalSpent,\n          –Ω–æ–≤—ã–π_totalSpent: data.userProfile.totalSpent,\n        })\n        \n        const updatedProfile = {\n          ...userProfile,\n          loyaltyPoints: data.userProfile.loyaltyPoints,\n          totalSpent: data.userProfile.totalSpent,\n        }\n        setUserProfile(updatedProfile)\n        \n        if (user) {\n          localStorage.setItem(`profile_${user}`, JSON.stringify(updatedProfile))\n        }\n      } else {\n        // Fallback: –µ—Å–ª–∏ userProfile –Ω–µ –ø—Ä–∏—à–µ–ª –≤ –æ—Ç–≤–µ—Ç–µ, –¥–µ–ª–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å\n        try {\n          const profileResponse = await fetch(`/api/orders?userId=${userProfile.id}`)\n          const profileData = await profileResponse.json()\n          \n          if (profileData.userProfile) {\n            console.log('üí∞ –û–±–Ω–æ–≤–ª–µ–Ω—ã –±–∞–ª–ª—ã –∏–∑ API –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã (fallback):', {\n              —Å—Ç–∞—Ä—ã–µ: userProfile.loyaltyPoints,\n              –Ω–æ–≤—ã–µ: profileData.userProfile.loyaltyPoints,\n              loyaltyPointsEarnedFromResponse: data.loyaltyPointsEarned\n            })\n            \n            const updatedProfile = {\n              ...userProfile,\n              loyaltyPoints: profileData.userProfile.loyaltyPoints,\n              totalSpent: profileData.userProfile.totalSpent,\n            }\n            setUserProfile(updatedProfile)\n            \n            if (user) {\n              localStorage.setItem(`profile_${user}`, JSON.stringify(updatedProfile))\n            }\n          }\n        } catch (error) {\n          console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:', error)\n        }\n      }\n\n      // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –æ–ø–ª–∞—Ç—ã\n      await new Promise(resolve => setTimeout(resolve, 1500))\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ä–∞–∑–Ω–∏—Ü—É –±–∞–ª–ª–æ–≤\n      // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–ª—ã –∏–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è\n      const newLoyaltyPoints = data.userProfile?.loyaltyPoints || userProfile.loyaltyPoints || 0\n      const pointsDifference = newLoyaltyPoints - oldLoyaltyPoints\n      \n      console.log('üéÅ –†–∞—Å—á–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤:', {\n        oldLoyaltyPoints,\n        newLoyaltyPoints,\n        pointsDifference,\n        'data.loyaltyPointsEarned': data.loyaltyPointsEarned,\n        '–∏—Å–ø–æ–ª—å–∑—É–µ–º': pointsDifference > 0 ? pointsDifference : (data.loyaltyPointsEarned || 0)\n      })\n      \n      // –°–∫—Ä—ã–≤–∞–µ–º loading (–ª—é–±–æ–π) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º success\n      setShowPaymentLoading(false)\n      setShowCashPaymentAnimation(false)\n      setSuccessDialog({\n        open: true,\n        loyaltyPointsEarned: pointsDifference > 0 ? pointsDifference : (data.loyaltyPointsEarned || 0),\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –î–ª—è –Ω–∞–ª–∏—á–Ω—ã—Ö –±–∞–ª–ª—ã pending, –¥–ª—è –∫–∞—Ä—Ç—ã - earned\n        loyaltyPointsStatus: paymentMethod === 'cash' ? 'pending' : 'earned',\n      })\n    } catch (error) {\n      console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ –∑–∞–∫–∞–∑–∞:\", error)\n      // –°–∫—Ä—ã–≤–∞–µ–º –æ–±–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ\n      setShowPaymentLoading(false)\n      setShowCashPaymentAnimation(false)\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ò—Å–ø–æ–ª—å–∑—É–µ–º WarningDialog –≤–º–µ—Å—Ç–æ toast\n      setWarningDialog({\n        open: true,\n        title: \"–û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã\",\n        description: \"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.\",\n        variant: \"error\",\n      })\n    }\n\n    setPaymentOrder(null)\n  }\n\n  const handleReviewSubmit = (orderId: string, rating: number, text: string) => {\n    const user = localStorage.getItem(\"currentUser\")\n    const newReview: Review = {\n      orderId,\n      rating,\n      text,\n      createdAt: new Date().toISOString(),\n    }\n    setReviews((prev) => {\n      const newReviews = [...prev, newReview]\n      if (user) {\n        localStorage.setItem(`reviews_${user}`, JSON.stringify(newReviews))\n      }\n      return newReviews\n    })\n  }\n\n  const handleLogin = async (phone: string) => {\n    // üîí SAFE DATA LOADING: –û—á–∏—â–∞–µ–º –≤—Å–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n    // –ü—Ä–∞–≤–∏–ª–æ: \"–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã - NocoDB\"\n    console.log('üßπ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤—Ö–æ–¥–µ –¥–ª—è:', phone)\n    const oldOrdersKey = `orders_${phone}`\n    const oldProfileKey = `profile_${phone}`\n    \n    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∑–∞–∫–∞–∑—ã (–æ–Ω–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ API)\n    localStorage.removeItem(oldOrdersKey)\n    console.log('‚úÖ –û—á–∏—â–µ–Ω—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã')\n    \n    // –í–∫–ª—é—á–∞–µ–º –ª–æ–∞–¥–µ—Ä—ã –¥–ª—è —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö\n    setIsUserLoading(true)\n    setIsOrdersLoading(true)\n    setIsPointsLoading(true)\n    \n    setIsAuthenticated(true)\n    setCurrentUser(phone)\n    localStorage.setItem(\"currentUser\", phone)\n\n    const guestOrdersStr = localStorage.getItem(\"guest_orders\")\n    const savedOrders = localStorage.getItem(`orders_${phone}`)\n\n    let userOrders: Order[] = []\n    if (savedOrders) {\n      userOrders = deserializeOrders(savedOrders)\n    }\n\n    let mergedCount = 0\n    let conflictCount = 0\n\n    if (guestOrdersStr) {\n      const guestOrdersList = deserializeOrders(guestOrdersStr)\n\n      guestOrdersList.forEach((guestOrder) => {\n        const guestTimestamp = getDateTimestamp(guestOrder.startDate)\n        const existingOrder = userOrders.find((o) => getDateTimestamp(o.startDate) === guestTimestamp)\n\n        if (existingOrder) {\n          conflictCount++\n          if (!existingOrder.paid) {\n            const index = userOrders.findIndex((o) => getDateTimestamp(o.startDate) === guestTimestamp)\n            userOrders[index] = guestOrder\n            mergedCount++\n          }\n        } else {\n          userOrders.push(guestOrder)\n          mergedCount++\n        }\n      })\n\n      localStorage.removeItem(\"guest_orders\")\n    }\n\n    setOrders(userOrders)\n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö\n    // –ó–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ API –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã\n    // localStorage.setItem(`orders_${phone}`, serializeOrders(userOrders))\n\n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –£–±—Ä–∞–ª–∏ toast \"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å\" (–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ)\n    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ —Ç–∞–∫ –≤–∏–¥–∏—Ç —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏ –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É\n\n    const savedReviews = localStorage.getItem(`reviews_${phone}`)\n    if (savedReviews) {\n      setReviews(JSON.parse(savedReviews))\n    }\n    const savedProfile = localStorage.getItem(`profile_${phone}`)\n    let profile: UserProfile\n    \n    if (savedProfile) {\n      try {\n        const parsed = JSON.parse(savedProfile)\n        if (parsed.address && !parsed.street) {\n          parsed.street = parsed.address\n          delete parsed.address\n        }\n        profile = parsed\n      } catch {\n        profile = {\n          phone,\n          name: \"\",\n          street: \"\",\n          building: \"\",\n          loyaltyPoints: 0,\n          totalSpent: 0,\n        }\n        localStorage.setItem(`profile_${phone}`, JSON.stringify(profile))\n      }\n    } else {\n      profile = {\n        phone,\n        name: \"\",\n        street: \"\",\n        building: \"\",\n        loyaltyPoints: 0,\n        totalSpent: 0,\n      }\n      localStorage.setItem(`profile_${phone}`, JSON.stringify(profile))\n    }\n    \n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≥–æ—Å—Ç–µ–≤–æ–π —Ä–∞–π–æ–Ω, –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º –µ–≥–æ –≤ –ø—Ä–æ—Ñ–∏–ª—å\n    const guestDistrict = localStorage.getItem(\"guest_district\")\n    if (guestDistrict && !profile.district) {\n      console.log(\"üîÑ –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≥–æ—Å—Ç–µ–≤–æ–π —Ä–∞–π–æ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª—å:\", guestDistrict)\n      profile.district = guestDistrict\n      // –£–¥–∞–ª—è–µ–º –≥–æ—Å—Ç–µ–≤–æ–π —Ä–∞–π–æ–Ω –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞\n      localStorage.removeItem(\"guest_district\")\n      localStorage.removeItem(\"district_modal_seen\")\n    }\n\n    // –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ NocoDB\n    console.log(\"üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö...\", { phone, hasProfile: !!profile, district: profile.district })\n    let dbUser = null\n    try {\n      const { fetchUserByPhone, createUser, updateUser } = await import(\"@/lib/nocodb\")\n      console.log(\"üì° –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É:\", phone)\n      dbUser = await fetchUserByPhone(phone)\n      \n      if (dbUser) {\n        console.log(\"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ:\", dbUser.Id)\n        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ –±–∞–∑—ã\n        profile.id = dbUser.Id\n        profile.name = dbUser.name || profile.name\n        profile.street = dbUser.street || profile.street\n        profile.building = dbUser.building || profile.building\n        // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–∞–π–æ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–∏–∑ –≥–æ—Å—Ç—è), –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ, –∏–Ω–∞—á–µ –∏–∑ –±–∞–∑—ã\n        profile.district = profile.district || dbUser.district || dbUser.District\n        profile.loyaltyPoints = typeof dbUser.loyalty_points === 'number' ? dbUser.loyalty_points : parseInt(String(dbUser.loyalty_points)) || 0\n        profile.totalSpent = typeof dbUser.total_spent === 'number' ? dbUser.total_spent : parseFloat(String(dbUser.total_spent)) || 0\n        console.log(\"‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω –∏–∑ –±–∞–∑—ã, userProfile.id:\", profile.id, \"district:\", profile.district)\n        \n        // –ï—Å–ª–∏ —É –Ω–∞—Å –µ—Å—Ç—å —Ä–∞–π–æ–Ω –∏–∑ –≥–æ—Å—Ç—è, –æ–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ –≤ –±–∞–∑–µ\n        if (guestDistrict && profile.district === guestDistrict) {\n          console.log(\"üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –≥–æ—Å—Ç–µ–≤–æ–π —Ä–∞–π–æ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö\")\n          await updateUser(profile.id, {\n            district: profile.district,\n            District: profile.district,\n          })\n        }\n      } else {\n        console.log(\"‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –±–∞–∑–µ, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ...\")\n        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –±–∞–∑–µ, —Å–æ–∑–¥–∞–µ–º\n        const newDbUser = await createUser({\n          phone,\n          name: profile.name || \"\",\n          district: profile.district,\n          loyalty_points: profile.loyaltyPoints || 0,\n          total_spent: profile.totalSpent || 0,\n        })\n        profile.id = newDbUser.Id\n        dbUser = newDbUser\n        console.log(\"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:\", newDbUser.Id, \"userProfile.id —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:\", profile.id, \"—Å —Ä–∞–π–æ–Ω–æ–º:\", profile.district)\n        \n        // –í–ê–ñ–ù–û: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º User ID —Ä–∞–≤–Ω—ã–º Id\n        console.log(\"üìù –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º User ID =\", newDbUser.Id)\n        await updateUser(newDbUser.Id, {\n          user_id: newDbUser.Id,\n        })\n      }\n      \n      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –≤ localStorage\n      localStorage.setItem(`profile_${phone}`, JSON.stringify(profile))\n      console.log(\"üíæ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ localStorage —Å id:\", profile.id)\n    } catch (error) {\n      console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –±–∞–∑–æ–π:\", error)\n      console.error(\"Stack:\", error instanceof Error ? error.stack : \"No stack\")\n      // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –±–∞–∑–æ–π\n    }\n    \n    console.log(\"üë§ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º userProfile: ID =\", profile.id, \"—Ç–∏–ø =\", typeof profile.id)\n    console.log(\"üë§ userProfile =\", JSON.stringify(profile, null, 2))\n    setUserProfile(profile)\n\n    // üîí SAFE DATA LOADING: –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API\n    if (profile.id) {\n      console.log('üì° –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –¥–ª—è userId:', profile.id)\n      try {\n        const response = await fetch(`/api/orders?userId=${profile.id}`)\n        const data = await response.json()\n        \n        console.log('üì¶ –î–∞–Ω–Ω—ã–µ –∏–∑ API –ø–æ–ª—É—á–µ–Ω—ã:', {\n          –∑–∞–∫–∞–∑–æ–≤: data.orders?.length || 0,\n          –±–∞–ª–ª—ã: data.userProfile?.loyaltyPoints\n        })\n        \n        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –±–∞–ª–ª–∞–º–∏\n        if (data.userProfile) {\n          const updatedProfile = {\n            ...profile,\n            loyaltyPoints: data.userProfile.loyaltyPoints ?? 0,\n            totalSpent: data.userProfile.totalSpent ?? 0,\n          }\n          setUserProfile(updatedProfile)\n          localStorage.setItem(`profile_${phone}`, JSON.stringify(updatedProfile))\n          console.log('‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ë–î –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞:', {\n            id: updatedProfile.id,\n            name: updatedProfile.name,\n            loyaltyPoints: updatedProfile.loyaltyPoints,\n            totalSpent: updatedProfile.totalSpent,\n            district: updatedProfile.district,\n          })\n        }\n        \n        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–∫–∞–∑—ã –∏–∑ API\n        if (data.orders && Array.isArray(data.orders)) {\n          const mappedOrders: Order[] = data.orders\n            .filter((db: any) => {\n              const status = db.orderStatus || db.order_status || db[\"Order Status\"]\n              return status !== 'cancelled'\n            })\n            .map((db: any) => ({\n              id: db.id ?? db.Id,\n              orderNumber: db.orderNumber ?? db.order_number ?? db[\"Order Number\"],\n              startDate: toDate(db.startDate ?? db.start_date ?? db[\"Start Date\"]),\n              deliveryTime: db.deliveryTime ?? db.delivery_time ?? db[\"Delivery Time\"] ?? \"\",\n              paymentMethod: db.paymentMethod ?? db.payment_method ?? db[\"Payment Method\"] ?? \"cash\",\n              paid: db.paid ?? db.Paid ?? false,\n              paidAt: db.paidAt ?? db.paid_at ?? db[\"Paid At\"],\n              paymentStatus: db.paymentStatus ?? db.payment_status ?? db[\"Payment Status\"] ?? \"pending\",\n              orderStatus: db.orderStatus ?? db.order_status ?? db[\"Order Status\"] ?? \"pending\",\n              total: db.total ?? db.Total ?? 0,\n              subtotal: db.subtotal ?? db.Subtotal ?? 0,\n              deliveryFee: db.deliveryFee ?? db.delivery_fee ?? db[\"Delivery Fee\"] ?? 0,\n              deliveryDistrict: db.deliveryDistrict ?? db.delivery_district ?? db[\"Delivery District\"],\n              deliveryAddress: db.deliveryAddress ?? db.delivery_address ?? db[\"Delivery Address\"],\n              loyaltyPointsUsed: db.loyaltyPointsUsed ?? db.loyalty_points_used ?? db[\"Loyalty Points Used\"] ?? 0,\n              loyaltyPointsEarned: db.loyaltyPointsEarned ?? db.loyalty_points_earned ?? db[\"Loyalty Points Earned\"] ?? 0,\n              persons: db.persons ?? [],\n              extras: db.extras ?? [],\n            }))\n          \n          setOrders(mappedOrders)\n          console.log('‚úÖ –ó–∞–∫–∞–∑—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ API –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞:', mappedOrders.length)\n        }\n      } catch (error) {\n        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API:', error)\n      } finally {\n        // –û—Ç–∫–ª—é—á–∞–µ–º –ª–æ–∞–¥–µ—Ä—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏\n        setIsUserLoading(false)\n        setIsOrdersLoading(false)\n        setIsPointsLoading(false)\n        console.log('‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞')\n      }\n    } else {\n      // –ï—Å–ª–∏ –Ω–µ—Ç id, –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫–ª—é—á–∞–µ–º –ª–æ–∞–¥–µ—Ä—ã\n      setIsUserLoading(false)\n      setIsOrdersLoading(false)\n      setIsPointsLoading(false)\n    }\n\n    setShowAuthModal(false)\n    \n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –ï—Å–ª–∏ –µ—Å—Ç—å pendingCheckout, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º shouldAutoCheckout\n    if (pendingCheckout) {\n      console.log(\"‚úÖ –ï—Å—Ç—å pendingCheckout –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º shouldAutoCheckout = true\")\n      setShouldAutoCheckout(true)\n    }\n    \n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–π–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏\n    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ –±–∞–∑—ã –∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å —Ä–∞–π–æ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ\n    // –ï—Å–ª–∏ –Ω–µ—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –≤—ã–±–æ—Ä–∞ —Ä–∞–π–æ–Ω–∞\n    const userDistrict = profile.district\n    \n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É —Ä–∞–π–æ–Ω–∞ –µ—Å–ª–∏:\n    // 1. –ò–¥–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (pendingCheckout)\n    // 2. –ò —Ä–∞–π–æ–Ω —É–∂–µ –≤—ã–±—Ä–∞–Ω (selectedDistrict)\n    if (!userDistrict) {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≤—ã–±—Ä–∞–Ω –ª–∏ —Ä–∞–π–æ–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\n      if (pendingCheckout && selectedDistrict) {\n        console.log(\"‚úÖ –†–∞–π–æ–Ω —É–∂–µ –≤—ã–±—Ä–∞–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:\", selectedDistrict)\n        // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É, useEffect –∑–∞–ø—É—Å—Ç–∏—Ç –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ\n      } else {\n        console.log(\"‚ö†Ô∏è –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç —Ä–∞–π–æ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –≤—ã–±–æ—Ä–∞ —Ä–∞–π–æ–Ω–∞\")\n        setShowDistrictModal(true)\n      }\n    } else {\n      console.log(\"‚úÖ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å —Ä–∞–π–æ–Ω:\", userDistrict)\n      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –≤ useEffect\n    }\n  }\n\n  const handleLogout = () => {\n    setIsAuthenticated(false)\n    setCurrentUser(null)\n    setOrders([])\n    setUserProfile(null)\n    setReviews([])\n    localStorage.removeItem(\"currentUser\")\n    setView(\"calendar\")\n    const guestOrders = localStorage.getItem(\"guest_orders\")\n    if (guestOrders) {\n      setOrders(deserializeOrders(guestOrders))\n    }\n  }\n\n  const handleAutoCheckout = async () => {\n    if (!pendingCheckout || !userProfile) {\n      console.log(\"‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\")\n      return\n    }\n\n    // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 11.01.2026: –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∑–∞–∫–∞–∑ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É\n    const orderDate = pendingCheckout.order.startDate\n    const existingOrderOnDate = orders.find((o) => {\n      const oDate = typeof o.startDate === 'string' ? o.startDate : o.startDate.toISOString().split('T')[0]\n      const checkDate = typeof orderDate === 'string' ? orderDate : orderDate.toISOString().split('T')[0]\n      return oDate === checkDate\n    })\n\n    if (existingOrderOnDate) {\n      console.warn(`‚ö†Ô∏è –ù–∞ –¥–∞—Ç—É ${orderDate} —É–∂–µ –µ—Å—Ç—å –∑–∞–∫–∞–∑ (ID: ${existingOrderOnDate.id})`)\n      setWarningDialog({\n        open: true,\n        title: \"–ó–∞–∫–∞–∑ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç\",\n        description: `–ù–∞ —ç—Ç—É –¥–∞—Ç—É (${typeof orderDate === 'string' ? new Date(orderDate).toLocaleDateString('ru-RU') : orderDate.toLocaleDateString('ru-RU')}) —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∑–∞–∫–∞–∑. –û—Ç–º–µ–Ω–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–∞–∑ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –¥–∞—Ç—É.`,\n        variant: \"warning\",\n      })\n      // –û—á–∏—â–∞–µ–º pendingCheckout –∏ shouldAutoCheckout\n      setPendingCheckout(null)\n      setShouldAutoCheckout(false)\n      return\n    }\n\n    // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –≤–æ –≤—Ä–µ–º—è –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\n    setShowOrderLoading(true)\n\n    try {\n      console.log(\"üöÄ –ê–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏\")\n      \n      // ‚úÖ DEBUG RECORDER: –õ–æ–≥–∏—Ä—É–µ–º –Ω–∞—á–∞–ª–æ –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\n      debug.log(\"üöÄ START handleAutoCheckout\", {\n        userId: userProfile?.id,\n        userEmail: userProfile?.email,\n        hasPendingCheckout: !!pendingCheckout,\n        pendingCheckoutData: {\n          orderPersonsCount: pendingCheckout?.order?.persons?.length || 0,\n          orderSubtotal: pendingCheckout?.order?.subtotal,\n          orderTotal: pendingCheckout?.order?.total,\n          pendingTotal: pendingCheckout?.total\n        }\n      })\n      \n      // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 2026-01-11: –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï pendingCheckout\n      console.log(\"üì¶ [handleAutoCheckout] pendingCheckout:\", {\n        hasPendingCheckout: !!pendingCheckout,\n        orderPersonsCount: pendingCheckout?.order?.persons?.length || 0,\n        orderPersons: pendingCheckout?.order?.persons?.map(p => ({\n          id: p.id,\n          hasDay1: !!p.day1,\n          hasDay2: !!p.day2,\n        })),\n        orderSubtotal: pendingCheckout?.order?.subtotal,\n        orderTotal: pendingCheckout?.order?.total,\n        pendingTotal: pendingCheckout?.total\n      })\n      \n      // –ü–æ–ª—É—á–∞–µ–º —Ä–∞–π–æ–Ω –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏\n      const district = userProfile.district\n      \n      if (!district) {\n        console.error(\"‚ùå –†–∞–π–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω\")\n        // ‚úÖ DEBUG RECORDER: –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ä–∞–π–æ–Ω–∞\n        await debug.captureError({\n          errorMessage: \"–†–∞–π–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω –ø—Ä–∏ –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏\",\n          data: { userId: userProfile?.id, userEmail: userProfile?.email }\n        })\n        // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –°–∫—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –æ—à–∏–±–∫–µ\n        setShowOrderLoading(false)\n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ó–∞–º–µ–Ω–∏–ª–∏ toast –Ω–∞ WarningDialog\n        setWarningDialog({\n          open: true,\n          title: \"–û—à–∏–±–∫–∞\",\n          description: \"–†–∞–π–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ —É–∫–∞–∑–∞–Ω. –£–∫–∞–∂–∏—Ç–µ —Ä–∞–π–æ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ.\",\n          variant: \"error\",\n        })\n        return\n      }\n      \n      // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏\n      const { fetchDeliveryZones, calculateDeliveryFee } = await import(\"@/lib/nocodb\")\n      const zones = await fetchDeliveryZones()\n      \n      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏\n      const deliveryFee = await calculateDeliveryFee(district, pendingCheckout.order.subtotal || pendingCheckout.total, zones)\n      \n      console.log(`üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏: ${deliveryFee}‚ÇΩ –¥–ª—è —Ä–∞–π–æ–Ω–∞ \"${district}\"`)\n      debug.log(`üí∞ Delivery fee calculated: ${deliveryFee}‚ÇΩ`, { district, subtotal: pendingCheckout.order.subtotal || pendingCheckout.total })\n      \n      // –í–ê–ñ–ù–û: –ó–∞–∫–∞–∑ —É–∂–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω –≤ OrderModal, –∏—â–µ–º –µ–≥–æ –≤ —Å–ø–∏—Å–∫–µ orders\n      // –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–∫–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–æ—Ç–æ—Ä—ã–π —Ç–æ–ª—å–∫–æ —á—Ç–æ –±—ã–ª —Å–æ–∑–¥–∞–Ω)\n      const lastOrder = orders.length > 0 ? orders[orders.length - 1] : null\n      \n      console.log(\"üîç –ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–∫–∞–∑: id =\", lastOrder?.id, \"paid =\", lastOrder?.paid, \"—Ç–∏–ø =\", typeof lastOrder?.id, \"ordersLength =\", orders.length)\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-12: –ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω –ò–õ–ò –¥–ª—è –¥—Ä—É–≥–æ–π –¥–∞—Ç—ã, —Å–æ–∑–¥–∞–µ–º –ù–û–í–´–ô –∑–∞–∫–∞–∑\n      const shouldCreateNewOrder = !lastOrder || lastOrder.paid || lastOrder.startDate !== pendingCheckout.order.startDate\n      \n      // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–∫–∞–∑ —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –∞–¥—Ä–µ—Å–∞\n      const updatedOrder: Order = {\n        ...(shouldCreateNewOrder ? pendingCheckout.order : lastOrder),\n        deliveryFee,\n        deliveryDistrict: district,\n        deliveryAddress: `${userProfile.street}, ${userProfile.building}${userProfile.apartment ? ', –∫–≤. ' + userProfile.apartment : ''}`,\n        subtotal: pendingCheckout.order.subtotal || pendingCheckout.total,\n        total: (pendingCheckout.order.subtotal || pendingCheckout.total) + deliveryFee,\n      }\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–¥–∞–ª—è–µ–º paymentMethod –∏ ID –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞\n      // –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –¥–æ–ª–∂–µ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç–µ –≤ PaymentModal\n      if (shouldCreateNewOrder) {\n        delete updatedOrder.id\n        delete updatedOrder.paymentMethod\n        delete updatedOrder.paid\n        delete updatedOrder.paidAt\n        console.log(\"üîß –°–æ–∑–¥–∞–µ–º –ù–û–í–´–ô –∑–∞–∫–∞–∑ (–ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ–ø–ª–∞—á–µ–Ω –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)\")\n      }\n      \n      console.log(\"üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑: id =\", updatedOrder.id, \"—Ç–∏–ø =\", typeof updatedOrder.id, \"total =\", updatedOrder.total)\n      \n      // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 2026-01-11: –ü—Ä–æ–≤–µ—Ä–∫–∞ persons –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API\n      console.log(\"üë• –ü—Ä–æ–≤–µ—Ä–∫–∞ persons:\", {\n        personsCount: updatedOrder.persons?.length || 0,\n        personsEmpty: !updatedOrder.persons || updatedOrder.persons.length === 0,\n        personsData: updatedOrder.persons?.map(p => ({\n          id: p.id,\n          hasDay1: !!p.day1,\n          hasDay2: !!p.day2,\n          day1Meals: p.day1 ? {\n            hasBreakfast: !!p.day1.breakfast?.dish,\n            hasLunch: !!(p.day1.lunch?.salad || p.day1.lunch?.soup || p.day1.lunch?.main),\n            hasDinner: !!(p.day1.dinner?.salad || p.day1.dinner?.soup || p.day1.dinner?.main),\n          } : null\n        }))\n      })\n      \n      if (!updatedOrder.persons || updatedOrder.persons.length === 0) {\n        console.error(\"‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: persons –ø—É—Å—Ç –ø—Ä–∏ –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏!\")\n        // ‚úÖ DEBUG RECORDER: –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É —Å –ø—É—Å—Ç—ã–º persons\n        await debug.captureError({\n          errorMessage: \"CRITICAL: persons –ø—É—Å—Ç –ø—Ä–∏ –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏\",\n          data: {\n            updatedOrder,\n            pendingCheckout,\n            lastOrder,\n            shouldCreateNewOrder\n          }\n        })\n        setShowOrderLoading(false)\n        setWarningDialog({\n          open: true,\n          title: \"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞\",\n          description: \"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–µ –æ –±–ª—é–¥–∞—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.\",\n          variant: \"error\",\n        })\n        setPendingCheckout(null)\n        setShouldAutoCheckout(false)\n        return\n      }\n      \n      // –í–ê–ñ–ù–û: –ï—Å–ª–∏ —É –∑–∞–∫–∞–∑–∞ –ù–ï–¢ ID - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –æ–Ω –±—ã–ª —Å–æ–∑–¥–∞–Ω –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n      // –¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –Ω—É–∂–Ω–æ –°–û–ó–î–ê–¢–¨ –∑–∞–∫–∞–∑ –≤ –ë–î!\n      if (!updatedOrder.id) {\n        console.log(\"üÜï –ó–∞–∫–∞–∑ –±–µ–∑ ID - —Å–æ–∑–¥–∞–µ–º –µ–≥–æ –≤ API –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\")\n        \n        // ‚úÖ DEBUG RECORDER: –õ–æ–≥–∏—Ä—É–µ–º payload –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π\n        const createOrderPayload = { order: updatedOrder, userId: userProfile.id }\n        debug.log(\"üì§ POST /api/orders PAYLOAD:\", createOrderPayload)\n        \n        try {\n          const response = await fetch(\"/api/orders\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(createOrderPayload),\n          })\n          \n          if (!response.ok) {\n            const errorData = await response.json().catch(() => ({ error: \"Unknown error\" }))\n            console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\", errorData)\n            \n            // ‚úÖ DEBUG RECORDER: –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É API\n            await debug.captureError({\n              errorMessage: `API Error: POST /api/orders (${response.status})`,\n              data: {\n                status: response.status,\n                errorData,\n                payload: createOrderPayload\n              }\n            })\n            \n            throw new Error(errorData.error || \"Failed to create order\")\n          }\n          \n          const result = await response.json()\n          console.log(\"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –≤ API:\", result)\n          debug.log(\"‚úÖ Order created successfully\", { orderId: result.orderId, orderNumber: result.orderNumber })\n          \n          // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–∫–∞–∑ —Å ID –∏–∑ API\n          updatedOrder.id = result.orderId\n          updatedOrder.orderNumber = result.orderNumber || `ORD-${Date.now()}`\n          \n          console.log(\"‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω –≤ –ë–î —Å ID:\", updatedOrder.id)\n          \n          // ‚úÖ –î–û–ë–ê–í–õ–Ø–ï–ú –∑–∞–∫–∞–∑ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç, —á—Ç–æ–±—ã –æ–Ω —Å—Ä–∞–∑—É –æ—Ç–æ–±—Ä–∞–∑–∏–ª—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ\n          setOrders(prev => [...prev, updatedOrder])\n          console.log(\"üìÖ –ó–∞–∫–∞–∑ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å\")\n        } catch (error: any) {\n          console.error(\"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –≤ –ë–î:\", error)\n          \n          // ‚úÖ DEBUG RECORDER: –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ–±—â—É—é –æ—à–∏–±–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞\n          await debug.captureError({\n            errorMessage: `Failed to create order: ${error.message}`,\n            data: {\n              error: error.toString(),\n              payload: createOrderPayload,\n              stack: error.stack\n            }\n          })\n          \n          // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –°–∫—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞\n          setShowOrderLoading(false)\n          throw error\n        }\n      } else {\n        console.log(\"üîÑ –ó–∞–∫–∞–∑ —Å ID - –æ–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ –≤ –ë–î\")\n        await handleSaveOrder(updatedOrder)\n      }\n      \n      console.log(\"üéØ –û—Ç–∫—Ä—ã–≤–∞–µ–º PaymentModal: orderId =\", updatedOrder.id, \"userId =\", userProfile.id)\n      debug.log(\"üéØ Opening PaymentModal\", { orderId: updatedOrder.id, total: (pendingCheckout.order.subtotal || pendingCheckout.total) + deliveryFee })\n      \n      // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –°–∫—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º PaymentModal\n      setShowOrderLoading(false)\n      \n      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –æ–ø–ª–∞—Ç—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å—É–º–º–æ–π\n      setPaymentOrder({ \n        order: updatedOrder, \n        total: (pendingCheckout.order.subtotal || pendingCheckout.total) + deliveryFee,\n        isNewOrder: true // ‚úÖ –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ\n      })\n      \n      // –û—á–∏—â–∞–µ–º pending checkout\n      setPendingCheckout(null)\n      setShouldAutoCheckout(false)\n      \n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –£–±—Ä–∞–ª–∏ toast \"–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω\" (–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ)\n      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç PaymentModal\n      \n    } catch (error: any) {\n      console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\", error)\n      \n      // ‚úÖ DEBUG RECORDER: –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –ª—é–±—É—é –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—É—é –æ—à–∏–±–∫—É\n      await debug.captureError({\n        errorMessage: `Unhandled error in handleAutoCheckout: ${error.message || error}`,\n        data: {\n          error: error.toString(),\n          stack: error.stack,\n          pendingCheckout,\n          userProfile: { id: userProfile?.id, email: userProfile?.email, district: userProfile?.district }\n        }\n      })\n      \n      // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –°–∫—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –æ—à–∏–±–∫–µ\n      setShowOrderLoading(false)\n      // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 10.01.2026: –ó–∞–º–µ–Ω–∏–ª–∏ toast –Ω–∞ WarningDialog\n      setWarningDialog({\n        open: true,\n        title: \"–û—à–∏–±–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\",\n        description: \"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.\",\n        variant: \"error\",\n      })\n    }\n  }\n\n  const handleProfileSave = async (profile: UserProfile) => {\n    console.log(\"üíæ handleProfileSave: ID =\", profile.id, \"—Ç–∏–ø =\", typeof profile.id)\n    console.log(\"üíæ handleProfileSave: profile =\", JSON.stringify(profile, null, 2))\n    setUserProfile(profile)\n    \n    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –≤ localStorage\n    if (currentUser) {\n      localStorage.setItem(`profile_${currentUser}`, JSON.stringify(profile))\n    }\n    \n    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö\n    if (profile.id && typeof profile.id === 'number' && profile.id > 0) {\n      try {\n        const { updateUser } = await import(\"@/lib/nocodb\")\n        await updateUser(profile.id, {\n          name: profile.name,\n          street: profile.street,\n          building: profile.building,\n          buildingSection: profile.buildingSection,\n          apartment: profile.apartment,\n          entrance: profile.entrance,\n          floor: profile.floor,\n          intercom: profile.intercom,\n          district: profile.district,\n          deliveryComment: profile.deliveryComment,\n          additionalPhone: profile.additionalPhone,\n        })\n        console.log(\"‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID:\", profile.id)\n      } catch (error) {\n        console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è –≤ –ë–î:\", error)\n        // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É\n      }\n    } else {\n      console.log(\"‚ö†Ô∏è –£ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ—Ç –≤–∞–ª–∏–¥–Ω–æ–≥–æ ID, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î\")\n    }\n    \n    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –ø—Ä–æ—Ñ–∏–ª—è\n    // useEffect —Å–∞–º –∑–∞–ø—É—Å—Ç–∏—Ç handleAutoCheckout –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è\n    if (shouldAutoCheckout && pendingCheckout) {\n      console.log(\"‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –∑–∞–ø–æ–ª–Ω–µ–Ω, –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É. useEffect –∑–∞–ø—É—Å—Ç–∏—Ç –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ\")\n      setShowProfile(false)\n    } else {\n      // –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º - –∑–∞–∫—Ä—ã–≤–∞–µ–º —Å—Ä–∞–∑—É\n      setShowProfile(false)\n    }\n  }\n\n  const handleDistrictSelected = async (district: string) => {\n    try {\n      console.log(\"üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–∞–π–æ–Ω:\", district)\n      setSelectedDistrict(district) // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏\n      \n      // ‚úÖ –ù–û–í–û–ï: –ï—Å–ª–∏ –µ—Å—Ç—å pendingCheckout, —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\n      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–∞–π–æ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ OrderModal –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏ –æ–ø–ª–∞—Ç—ã\n      if (pendingCheckout) {\n        console.log(\"‚úÖ –†–∞–π–æ–Ω –≤—ã–±—Ä–∞–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ OrderModal\")\n        \n        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–∫–∞–∑ —Å —Ä–∞–π–æ–Ω–æ–º\n        const updatedOrder: Order = {\n          ...pendingCheckout.order,\n          deliveryDistrict: district,\n        }\n        \n        setPendingCheckout({\n          order: updatedOrder,\n          total: pendingCheckout.total,\n        })\n        \n        // –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–∞–π–æ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª—å\n        if (currentUser && userProfile) {\n          const updatedProfile = {\n            ...userProfile,\n            district: district,\n          }\n          \n          // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö\n          if (userProfile.id && typeof userProfile.id === 'number' && userProfile.id > 0) {\n            try {\n              const { updateUser } = await import(\"@/lib/nocodb\")\n              await updateUser(userProfile.id, {\n                district: district,\n                District: district,\n              })\n              console.log(\"‚úÖ –†–∞–π–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ë–î –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID:\", userProfile.id)\n            } catch (error) {\n              console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–∞–π–æ–Ω–∞ –≤ –ë–î:\", error)\n            }\n          }\n          \n          localStorage.setItem(`profile_${currentUser}`, JSON.stringify(updatedProfile))\n          setUserProfile(updatedProfile)\n          console.log(\"‚úÖ –†–∞–π–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ:\", district)\n        } else {\n          // –î–ª—è –≥–æ—Å—Ç–µ–π —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage\n          localStorage.setItem(\"guest_district\", district)\n          console.log(\"‚úÖ –†–∞–π–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –≥–æ—Å—Ç—è:\", district)\n        }\n        \n        setShowDistrictModal(false)\n        \n        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –î–ª—è –≥–æ—Å—Ç—è –æ—Ç–∫—Ä—ã–≤–∞–µ–º AuthModal –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ä–∞–π–æ–Ω–∞\n        if (!currentUser) {\n          console.log(\"üë§ –ì–æ—Å—Ç—å –≤—ã–±—Ä–∞–ª —Ä–∞–π–æ–Ω ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ–º AuthModal\")\n          setShowAuthModal(true)\n        } else {\n          // –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ - –æ—Ç–∫—Ä—ã–≤–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ OrderModal\n          console.log(\"‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª —Ä–∞–π–æ–Ω ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ OrderModal\")\n          setSelectedDate(toDate(pendingCheckout.order.startDate))\n        }\n        return\n      }\n      \n      // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - —Ç–∏—Ö–æ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å (–æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º, –Ω–µ checkout)\n      if (currentUser && userProfile) {\n        // ‚úÖ –¢–ò–•–û–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (–±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)\n        const updatedProfile = {\n          ...userProfile,\n          district: district,\n        }\n\n        // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö\n        if (userProfile.id && typeof userProfile.id === 'number' && userProfile.id > 0) {\n          try {\n            const { updateUser } = await import(\"@/lib/nocodb\")\n            await updateUser(userProfile.id, {\n              district: district,\n              District: district,\n            })\n            console.log(\"‚úÖ –†–∞–π–æ–Ω —Ç–∏—Ö–æ –æ–±–Ω–æ–≤–ª–µ–Ω –≤ –ë–î –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID:\", userProfile.id)\n          } catch (error) {\n            console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–∞–π–æ–Ω–∞ –≤ –ë–î:\", error)\n          }\n        }\n\n        localStorage.setItem(`profile_${currentUser}`, JSON.stringify(updatedProfile))\n        setUserProfile(updatedProfile)\n        console.log(\"‚úÖ –†–∞–π–æ–Ω —Ç–∏—Ö–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ:\", district)\n      } else {\n        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ –≥–æ—Å—Ç–µ–≤–æ–π —Ä–∞–π–æ–Ω\n        localStorage.setItem(\"guest_district\", district)\n        localStorage.setItem(\"district_modal_seen\", \"true\")\n        console.log(\"‚úÖ –†–∞–π–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –≥–æ—Å—Ç—è:\", district)\n      }\n\n      setShowDistrictModal(false)\n    } catch (error) {\n      console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–∞–π–æ–Ω–∞:\", error)\n      setWarningDialog({\n        open: true,\n        title: \"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è\",\n        description: \"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–π–æ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.\",\n        variant: \"error\",\n      })\n    }\n  }\n\n  const existingOrder = selectedDate\n    ? orders.find((o) => {\n        const orderStartDate = new Date(o.startDate)\n        orderStartDate.setHours(0, 0, 0, 0)\n\n        const checkDate = new Date(selectedDate)\n        checkDate.setHours(0, 0, 0, 0)\n\n        return orderStartDate.getTime() === checkDate.getTime()\n      })\n    : undefined\n\n  const availableDates = getAvailableDates()\n\n  // Handler for dish click from FreshSection\n  const handleDishClick = (dish: { name: string; image: string; price: number; description?: string }) => {\n    // Get available dates and pick a random one (or first available)\n    const dates = getAvailableDatesForOrdering()\n    if (dates.length > 0) {\n      // Pick a random date from available dates\n      const randomIndex = Math.floor(Math.random() * dates.length)\n      const selectedDate = dates[randomIndex].date\n      setSelectedDish({ dish, availableDate: selectedDate })\n    } else {\n      showWarning(\n        \"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç\",\n        \"–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç –¥–ª—è –∑–∞–∫–∞–∑–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.\",\n        \"info\"\n      )\n    }\n  }\n\n  // Handler for \"Go to Order\" button in DishSmartModal\n  const handleGoToOrder = (date: Date) => {\n    // Scroll to calendar section\n    const calendarElement = document.getElementById(\"calendar-section\")\n    if (calendarElement) {\n      calendarElement.scrollIntoView({ behavior: \"smooth\", block: \"start\" })\n    }\n    \n    // Set selected date and open order modal\n    setTimeout(() => {\n      setSelectedDate(date)\n    }, 300) // Small delay for smooth scroll\n  }\n\n  // Handler for \"Open Existing Order\" button\n  const handleOpenExistingOrder = (date: Date) => {\n    setSelectedDate(date)\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Preloader />\n      <div className=\"bg-white px-4 pt-12 pb-6 border-b-2 border-black safe-area-top\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-14 w-14 rounded-full border-2 border-black overflow-hidden flex items-center justify-center shrink-0\">\n              <Image \n                src=\"/OGFooDY –ª–æ–≥–æ—Ç–∏–ø.png\" \n                alt=\"OGFooDY Logo\" \n                width={56} \n                height={56} \n                className=\"rounded-full object-cover\"\n                priority\n              />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-black text-black tracking-tight\">OGFooDY</h1>\n              <p className=\"text-black/80 text-xs font-bold\">–¥–æ–º–∞—à–Ω—è—è –µ–¥–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <AppMenu userPhone={currentUser || \"\"} />\n            {isAuthenticated ? (\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleLogout} className=\"text-black hover:bg-muted border-0\" data-testid=\"logout-btn\">\n                <LogOut className=\"w-5 h-5\" />\n              </Button>\n            ) : (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowAuthModal(true)}\n                className=\"text-black hover:bg-muted border-0\"\n                data-testid=\"login-btn\"\n              >\n                <LogIn className=\"w-4 h-4 mr-2\" />\n                –í–æ–π—Ç–∏\n              </Button>\n            )}\n          </div>\n        </div>\n        {isAuthenticated ? (\n          isUserLoading || isPointsLoading ? (\n            // ‚úÖ SAFE DATA LOADING: Skeleton –ø–æ–∫–∞ –≥—Ä—É–∑—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ\n            <UserProfileHeaderSkeleton />\n          ) : (\n            <button\n              onClick={() => setShowProfile(true)}\n              className=\"flex items-center gap-2 text-black bg-muted rounded-xl px-3 py-2 w-full hover:bg-muted/80 transition-colors border-2 border-black\"\n            >\n              <User className=\"w-4 h-4\" />\n              <span className=\"text-sm font-bold flex-1 text-left\">{userProfile?.name || currentUser}</span>\n              {userProfile && (\n                <span className=\"text-xs bg-[#9D00FF] text-white px-2 py-0.5 rounded-lg font-black border-2 border-black\">{userProfile.loyaltyPoints || 0} –±–∞–ª–ª–æ–≤</span>\n              )}\n            </button>\n          )\n        ) : (\n          <div className=\"flex items-center gap-2 text-black bg-muted rounded-xl px-3 py-2 w-full border-2 border-black\">\n            <User className=\"w-4 h-4\" />\n            <span className=\"text-sm font-bold\">–ì–æ—Å—Ç—å</span>\n            <span className=\"text-xs text-black/70 ml-auto font-medium\">–í–æ–π–¥–∏—Ç–µ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞</span>\n          </div>\n        )}\n      </div>\n\n      <div className=\"px-4 py-4 -mt-4 bg-background rounded-t-3xl border-t-2 border-black relative z-10\">\n        <p className=\"text-muted-foreground text-sm mb-4\">\n          {view === \"calendar\" ? \"–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –¥–ª—è –∑–∞–∫–∞–∑–∞\" : \"–ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –∑–∞–∫–∞–∑–æ–≤\"}\n        </p>\n\n        <div className=\"mb-4 flex gap-2\">\n          <Button\n            variant={view === \"calendar\" ? \"default\" : \"outline\"}\n            onClick={() => setView(\"calendar\")}\n            className=\"flex-1\"\n            data-testid=\"view-calendar-btn\"\n          >\n            <CalendarIcon className=\"w-4 h-4 mr-2\" />\n            –ö–∞–ª–µ–Ω–¥–∞—Ä—å\n          </Button>\n          <Button\n            variant={view === \"history\" ? \"default\" : \"outline\"}\n            onClick={() => setView(\"history\")}\n            className=\"flex-1\"\n            disabled={!isAuthenticated}\n            data-testid=\"view-history-btn\"\n          >\n            <History className=\"w-4 h-4 mr-2\" />\n            –ò—Å—Ç–æ—Ä–∏—è\n          </Button>\n        </div>\n\n        {view === \"calendar\" ? (\n          <>\n            {/* ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–∞–Ω–Ω–µ—Ä */}\n            {showInfoBanner && (\n              <InfoBanner\n                isAuthenticated={isAuthenticated}\n                onAuthClick={() => setShowAuthModal(true)}\n                onClose={() => setShowInfoBanner(false)}\n              />\n            )}\n\n            {/* Daily Status Widget */}\n            <div className=\"mb-6\">\n              <DailyStatus\n                orders={orders}\n                onOrderClick={() => {\n                  // Find the next available date for ordering\n                  const today = new Date()\n                  today.setHours(0, 0, 0, 0)\n                  const nextAvailable = availableDates.find((date) => {\n                    const checkDate = new Date(date)\n                    checkDate.setHours(0, 0, 0, 0)\n                    return checkDate.getTime() >= today.getTime()\n                  })\n                  if (nextAvailable) {\n                    handleDateClick(nextAvailable)\n                  } else {\n                    showWarning(\n                      \"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç\",\n                      \"–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç –¥–ª—è –∑–∞–∫–∞–∑–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.\",\n                      \"info\"\n                    )\n                  }\n                }}\n                onFoodCardClick={() => {\n                  // Open today's menu/order modal\n                  const today = new Date()\n                  today.setHours(0, 0, 0, 0)\n                  \n                  // Check if there's an order for today (delivery day)\n                  const todayOrder = orders.find((order) => {\n                    const orderDate = new Date(order.startDate)\n                    orderDate.setHours(0, 0, 0, 0)\n                    return orderDate.getTime() === today.getTime()\n                  })\n                  \n                  // If there's an order for today, open it directly\n                  if (todayOrder) {\n                    setSelectedDate(today)\n                  } else {\n                    // If there's food today but no order, we still want to show the modal\n                    // Find the order that provides food for today\n                    const foodOrder = orders.find((order) => {\n                      const deliveryDate = new Date(order.startDate)\n                      deliveryDate.setHours(0, 0, 0, 0)\n                      \n                      const day1 = new Date(deliveryDate)\n                      day1.setDate(day1.getDate() + 1)\n                      \n                      const day2 = new Date(deliveryDate)\n                      day2.setDate(day2.getDate() + 2)\n                      \n                      return today.getTime() === day1.getTime() || today.getTime() === day2.getTime()\n                    })\n                    \n                    // Open today's date - the modal should handle showing the food\n                    setSelectedDate(today)\n                  }\n                }}\n              />\n            </div>\n\n            {/* Calendar */}\n            <div id=\"calendar-section\" className=\"mb-8 relative\">\n              {/* üéØ UX –£–õ–£–ß–®–ï–ù–ò–ï: –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –¥–ª—è –≥–æ—Å—Ç–µ–π */}\n              {!isAuthenticated && !selectedDate && (\n                <div className=\"absolute -top-16 left-1/2 -translate-x-1/2 z-20 pointer-events-none\">\n                  <div className=\"bg-[#FFEA00] border-2 border-black px-4 py-2 rounded-lg shadow-brutal animate-bounce\">\n                    <div className=\"flex items-center gap-2\">\n                      <CalendarIcon className=\"h-5 w-5\" />\n                      <span className=\"font-black text-sm whitespace-nowrap\">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∑–¥–µ—Å—å ‚Üì</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              <Calendar\n                orders={orders}\n                selectedDate={selectedDate}\n                onSelectDate={setSelectedDate}\n                onDateClick={handleDateClick}\n                onMoveOrder={handleMoveOrder}\n              />\n            </div>\n\n            {/* –°–í–ï–ñ–ê–ö Section */}\n            <FreshSection onDishClick={handleDishClick} />\n          </>\n        ) : (\n          // ‚úÖ SAFE DATA LOADING: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º skeleton –ø–æ–∫–∞ –≥—Ä—É–∑—è—Ç—Å—è –∑–∞–∫–∞–∑—ã\n          isOrdersLoading ? (\n            <OrderHistorySkeleton />\n          ) : (\n            <OrderHistory\n              orders={orders}\n              onCancelOrder={handleCancelOrder}\n              onRepeatOrder={handleRepeatOrder}\n              onPayOrder={handlePayOrder}\n              onReviewOrder={(order) => setReviewOrder(order)}\n              availableDates={availableDates}\n              userProfile={userProfile}\n              reviews={reviews}\n            />\n          )\n        )}\n      </div>\n\n      <OrderModal\n        key={`order-${selectedDate?.getTime()}-${existingOrder?.id}-${existingOrder?.paid}-${existingOrder?.total}-${existingOrder?.loyaltyPointsEarned}`}\n        date={selectedDate || new Date()}\n        existingOrder={existingOrder}\n        onClose={() => {\n          setSelectedDate(null)\n        }}\n        onSave={handleSaveOrder}\n        onCancel={handleCancelOrder}\n        allOrders={orders}\n        open={!!selectedDate}\n        isDataLoading={isUserLoading || isOrdersLoading || isPointsLoading}\n        onPaymentSuccess={async (order) => {\n          // ‚ùå –£–î–ê–õ–ï–ù–û: –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤\n          // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ API\n          if (userProfile?.id) {\n            try {\n              console.log('üí∞ –û–±–Ω–æ–≤–ª—è—é –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã...')\n              const response = await fetch(`/api/orders?userId=${userProfile.id}`)\n              const data = await response.json()\n              \n              if (data.userProfile) {\n                const newLoyaltyPoints = typeof data.userProfile.loyaltyPoints === 'number' \n                  ? data.userProfile.loyaltyPoints \n                  : parseInt(String(data.userProfile.loyaltyPoints)) || 0\n                \n                console.log('üí∞ –û–±–Ω–æ–≤–ª–µ–Ω—ã –±–∞–ª–ª—ã –∏–∑ API:', {\n                  —Å—Ç–∞—Ä—ã–µ: userProfile.loyaltyPoints,\n                  –Ω–æ–≤—ã–µ: newLoyaltyPoints,\n                  —Ç–∏–ø: typeof newLoyaltyPoints\n                })\n                \n                const updatedProfile = {\n                  ...userProfile,\n                  loyaltyPoints: newLoyaltyPoints,\n                  totalSpent: data.userProfile.totalSpent,\n                }\n                console.log('üíæ –í—ã–∑—ã–≤–∞–µ–º setUserProfile —Å –Ω–æ–≤—ã–º–∏ –±–∞–ª–ª–∞–º–∏:', updatedProfile.loyaltyPoints)\n                setUserProfile(updatedProfile)\n                console.log('‚úÖ setUserProfile –≤—ã–∑–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ')\n                const user = localStorage.getItem(\"currentUser\")\n                if (user) {\n                  localStorage.setItem(`profile_${user}`, JSON.stringify(updatedProfile))\n                  console.log('üíæ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ localStorage')\n                }\n              }\n              \n              // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤\n              if (data.orders) {\n                const mappedOrders: Order[] = data.orders\n                  .filter((db: any) => {\n                    const status = db.orderStatus || db.order_status || db[\"Order Status\"]\n                    return status !== 'cancelled'\n                  })\n                  .map((db: any) => ({\n                    id: db.id ?? db.Id,\n                    orderNumber: db.orderNumber ?? db.order_number ?? db[\"Order Number\"],\n                    startDate: toDate(db.startDate ?? db.start_date ?? db[\"Start Date\"]),\n                    deliveryTime: db.deliveryTime ?? db.delivery_time ?? db[\"Delivery Time\"] ?? \"\",\n                    paymentMethod: db.paymentMethod ?? db.payment_method ?? db[\"Payment Method\"] ?? \"cash\",\n                    paid: db.paid ?? db.Paid ?? false,\n                    paidAt: db.paidAt ?? db.paid_at ?? db[\"Paid At\"],\n                    paymentStatus: db.paymentStatus ?? db.payment_status ?? db[\"Payment Status\"] ?? \"pending\",\n                    orderStatus: db.orderStatus ?? db.order_status ?? db[\"Order Status\"] ?? \"pending\",\n                    total: db.total ?? db.Total ?? 0,\n                    subtotal: db.subtotal ?? db.Subtotal ?? 0,\n                    loyaltyPointsUsed: db.loyaltyPointsUsed ?? db.loyalty_points_used ?? db[\"Loyalty Points Used\"] ?? 0,\n                    loyaltyPointsEarned: db.loyaltyPointsEarned ?? db.loyalty_points_earned ?? db[\"Loyalty Points Earned\"] ?? 0,\n                    persons: db.persons ?? [],\n                    extras: db.extras ?? [],\n                  }))\n                setOrders(mappedOrders)\n                console.log('‚úÖ –ó–∞–∫–∞–∑—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–∑ API')\n              }\n            } catch (error) {\n              console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:', error)\n            }\n          }\n          \n          const deliveryDate = new Date(order.startDate).toLocaleDateString(\"ru-RU\", { day: \"numeric\", month: \"short\" })\n          const description = order.paymentMethod === \"cash\"\n            ? `–î–æ—Å—Ç–∞–≤–∫–∞ ${deliveryDate} –≤ ${order.deliveryTime}. –û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –∫—É—Ä—å–µ—Ä—É.`\n            : `–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ. –î–æ—Å—Ç–∞–≤–∫–∞ ${deliveryDate} –≤ ${order.deliveryTime}.`\n          \n          showWarning(\n            \"–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω\",\n            description,\n            \"info\"\n          )\n        }}\n        userLoyaltyPoints={userProfile?.loyaltyPoints || 0}\n        isAuthenticated={isAuthenticated}\n        onRequestAuth={(order, total) => {\n          const hasDistrict = userProfile?.district || localStorage.getItem(\"guest_district\")\n          \n          console.log(\"üîê –ó–∞–ø—Ä–æ—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:\", { \n            isAuthenticated, \n            hasDistrict: !!hasDistrict,\n            userDistrict: userProfile?.district,\n            guestDistrict: localStorage.getItem(\"guest_district\")\n          })\n          \n          // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 2026-01-11: –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï\n          console.log(\"üîç [onRequestAuth] –ü–æ–ª—É—á–µ–Ω order:\", {\n            hasOrder: !!order,\n            orderType: typeof order,\n            personsCount: order?.persons?.length || 0,\n            persons: order?.persons?.map(p => ({\n              id: p.id,\n              hasDay1: !!p.day1,\n              hasDay2: !!p.day2,\n            })) || [],\n            subtotal: order?.subtotal,\n            total: order?.total,\n            receivedTotal: total\n          })\n          \n          if (!order) {\n            console.error(\"‚ùå [onRequestAuth] order is undefined!\")\n            return\n          }\n          \n          setPendingCheckout({ order, total })\n          console.log(\"üíæ [onRequestAuth] –°–æ—Ö—Ä–∞–Ω–µ–Ω pendingCheckout —Å persons:\", order.persons?.length || 0)\n          setSelectedDate(null) // –ó–∞–∫—Ä—ã–≤–∞–µ–º OrderModal\n          \n          // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û 2026-01-11: –î–ª—è –≥–æ—Å—Ç–µ–π –í–°–ï–ì–î–ê –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ä–∞–π–æ–Ω–∞\n          // (–¥–∞–∂–µ –µ—Å–ª–∏ —Ä–∞–π–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω - –ø—É—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–¥—è—Ç)\n          // –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–∞–π–æ–Ω–∞ –Ω–µ—Ç\n          if (!isAuthenticated) {\n            console.log(\"üë§ –ì–æ—Å—Ç—å ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ä–∞–π–æ–Ω–∞\")\n            setSelectedDistrict(hasDistrict || \"\")\n            setShowDistrictModal(true)\n          } else if (!hasDistrict) {\n            // –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –Ω–æ —Ä–∞–π–æ–Ω–∞ –Ω–µ—Ç\n            console.log(\"‚ö†Ô∏è –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –Ω–æ —Ä–∞–π–æ–Ω –Ω–µ –≤—ã–±—Ä–∞–Ω ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ–º DistrictSelectionModal\")\n            setShowDistrictModal(true)\n          } else {\n            // –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ò —Ä–∞–π–æ–Ω –µ—Å—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å\n            console.log(\"‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ò —Ä–∞–π–æ–Ω –µ—Å—Ç—å - –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å\")\n            setSelectedDistrict(hasDistrict)\n            \n            const isProfileComplete = \n              userProfile.district && \n              userProfile.name && \n              userProfile.street && \n              userProfile.building\n            \n            if (!isProfileComplete) {\n              console.log(\"‚ö†Ô∏è –ü—Ä–æ—Ñ–∏–ª—å –Ω–µ–ø–æ–ª–Ω—ã–π, –æ—Ç–∫—Ä—ã–≤–∞–µ–º ProfileModal\")\n              setShouldAutoCheckout(true)\n              setShowProfile(true)\n            } else {\n              console.log(\"‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª–Ω—ã–π, –∑–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ\")\n              // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\n              setShouldAutoCheckout(true)\n            }\n          }\n        }}\n        onRequestPayment={(order, total) => {\n          // ‚úÖ –ù–û–í–û–ï 2026-01-11: –û—Ç–∫—Ä—ã–≤–∞–µ–º PaymentModal –¥–ª—è –æ–ø–ª–∞—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞\n          console.log(\"üí≥ –ó–∞–ø—Ä–æ—Å –æ–ø–ª–∞—Ç—ã –∑–∞–∫–∞–∑–∞:\", order.id, \"total:\", total)\n          setSelectedDate(null) // ‚úÖ –ó–∞–∫—Ä—ã–≤–∞–µ–º OrderModal\n          setPaymentOrder({ order, total })\n        }}\n        userAddress={userProfile?.street}\n        userCity=\"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥\"\n        userProfile={userProfile}\n      />\n\n      <AuthModal\n        open={showAuthModal}\n        onClose={() => {\n          setShowAuthModal(false)\n          // –ù–ï —Å–±—Ä–∞—Å—ã–≤–∞–µ–º pendingCheckout –∑–¥–µ—Å—å - –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –∞–≤—Ç–æ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è!\n        }}\n        onLogin={handleLogin}\n        redirectAfterLogin={pendingCheckout ? \"checkout\" : null}\n      />\n\n      {showProfile && currentUser && (\n        <ProfileModal \n          phone={currentUser} \n          onClose={() => setShowProfile(false)} \n          onSave={handleProfileSave} \n          userProfile={userProfile}\n          isCheckoutFlow={shouldAutoCheckout}\n        />\n      )}\n\n      {paymentOrder && (\n        <PaymentModal\n          order={paymentOrder.order}\n          total={paymentOrder.total}\n          userProfile={userProfile}\n          onClose={handlePaymentModalClose}\n          onPaymentComplete={handlePaymentComplete}\n          allowCash={paymentOrder.isNewOrder === true} // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (–Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö)\n        />\n      )}\n\n      {reviewOrder && (\n        <ReviewModal order={reviewOrder} onClose={() => setReviewOrder(null)} onSubmit={handleReviewSubmit} />\n      )}\n\n      <WarningDialog\n        open={warningDialog.open}\n        onClose={closeWarning}\n        title={warningDialog.title}\n        description={warningDialog.description}\n        variant={warningDialog.variant}\n      />\n\n      {/* ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û 10.01.2026: –î–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞ */}\n      <WarningDialog\n        open={cancelPaymentDialog.open}\n        onClose={handleCancelPaymentDialogClose}\n        title=\"–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞?\"\n        description=\"–ó–∞–∫–∞–∑ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. –í—ã —É–≤–µ—Ä–µ–Ω—ã?\"\n        variant=\"warning\"\n      />\n\n      {/* Dish Smart Modal */}\n      {selectedDish && (\n        <DishSmartModal\n          open={!!selectedDish}\n          onClose={() => setSelectedDish(null)}\n          dish={selectedDish.dish}\n          availableDate={selectedDish.availableDate}\n          orders={orders}\n          onGoToOrder={handleGoToOrder}\n          onOpenExistingOrder={handleOpenExistingOrder}\n        />\n      )}\n\n      {/* Animation Components */}\n      <OrderLoadingDialog open={showOrderLoading} />\n      <PaymentLoading open={showPaymentLoading} />\n      <CashPaymentAnimation open={showCashPaymentAnimation} />\n      <CancelOrderLoading open={showCancelLoading} />\n      <SuccessOrderDialog\n        open={successDialog.open}\n        onClose={() => setSuccessDialog({ open: false })}\n        loyaltyPointsEarned={successDialog.loyaltyPointsEarned}\n        loyaltyPointsStatus={successDialog.loyaltyPointsStatus}\n        loyaltyPointsMessage={successDialog.loyaltyPointsMessage}\n      />\n\n      {/* District Selection Modal */}\n      <DistrictSelectionModal\n        open={showDistrictModal}\n        onDistrictSelected={handleDistrictSelected}\n        userName={userProfile?.name}\n        isGuest={!isAuthenticated}\n        onLoginClick={() => {\n          console.log(\"üîê –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–Ω—É–ª '–í–æ–π—Ç–∏' –≤ –º–æ–¥–∞–ª–∫–µ –≤—ã–±–æ—Ä–∞ —Ä–∞–π–æ–Ω–∞\")\n          setShowDistrictModal(false)\n          setShowAuthModal(true)\n        }}\n        onCancel={() => {\n          console.log(\"‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞\")\n          setShowDistrictModal(false)\n          setPendingCheckout(null)\n          setShouldAutoCheckout(false)\n        }}\n      />\n\n      {/* Debug Floating Button */}\n      <DebugFloatingButton />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}